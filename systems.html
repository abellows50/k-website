<!DOCTYPE html>
<html lang="en">
<script>
function openNav() {
  document.getElementById("leftColumn").style.display = "block";
  document.getElementById("rightColumn").style.width = "80%";
  document.getElementById("openSidebar").style.display= "none";
}

function closeNav() {
  document.getElementById("leftColumn").style.display = "none";
    document.getElementById("openSidebar").style.display= "block";
	document.getElementById("rightColumn").style.width = "100%";
}
</script>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Systems Level Programming</title>
  <link rel="icon" href="img/thluffy-left.png">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
  <link rael="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Domine:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/default.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header id="TOP">
    <div id="logo">
      <a href="index.html"><img src="img/thluffy-left.png" id="thluffy"></a>
      <span id="className">Systems Level Programming</span>
    </div>
  </header>
  <main>

<div id="leftColumn">
  <button class="closebtn" onclick="closeNav()" >⨉</button>
  <h3>Lecture Notes</h3>
  <ul>
        <li><a href="#2024-09-05n">2024-09-05 <br> Logistics</a></li>
        <li><a href="#2024-09-06n">2024-09-06 <br> Getting started</a></li>
        <li><a href="#2024-09-09n">2024-09-09 <br> C language</a></li>
        <li><a href="#2024-09-10n">2024-09-10 <br> Printf</a></li>
        <li><a href="#2024-09-11n">2024-09-11 <br> Data Types</a></li>
        <li><a href="#2024-09-12n">2024-09-12 <br> Variables, Functions + Lab01</a></li>
        <li><a href="#2024-09-13n">2024-09-13 <br> Compiling and Linking</a></li>
        <li><a href="#2024-09-16n">2024-09-16 <br> Makefiles</a></li>
        <li><a href="#2024-09-17n">2024-09-17 <br> Memory bits and bytes</a></li>
        <li><a href="#2024-09-18n">2024-09-18 <br> more printf</a></li>
        <li><a href="#2024-09-19n">2024-09-19 <br> makefiles and math</a></li>
        <li><a href="#2024-09-23n">2024-09-23 <br> Scripting</a></li>
        <li><a href="#2024-09-24n">2024-09-24 <br> WSL and pointers</a></li>
        <li><a href="#2024-09-25n">2024-09-25 <br> Random numbers and Arrays</a></li>
        <li><a href="#2024-09-27n">2024-09-27 <br> Parameters and Arrays</a></li>
        <li><a href="#2024-09-30n">2024-09-30 <br> Stacks and Heap memory</a></li>
        <li><a href="#2024-10-02n">2024-10-02 <br> Sieve Lab</a></li>
        <li><a href="#2024-10-09n">2024-10-09 <br> Strings</a></li>
        <li><a href="#2024-10-10n">2024-10-10 <br> Strings Lab05</a></li>
        <li><a href="#2024-10-15n">2024-10-15 <br> Struct </a></li>
        <li><a href="#2024-10-16n">2024-10-16 <br> Struct Lab06</a></li>
        <li><a href="#2024-10-18n">2024-10-18 <br> Linked Lists</a></li>
        <li><a href="#2024-10-21n">2024-10-21 <br> File Functions</a></li>
        <li><a href="#2024-10-23n">2024-10-23 <br> Files Lab07</a></li>
        <li><a href="#2024-10-28n">2024-10-28 <br> Project: Music Library</a></li>
        <li><a href="#2024-10-30n">2024-10-30 <br> Pclassic</a></li>
        <li><a href="#2024-11-05n">2024-11-05 <br> Lab 08 </a></li>
        <li><a href="#2024-11-12n">2024-11-12 <br> Lab 09 </a></li>
        <li><a href="#2024-11-17n">2024-11-17 <br> Signals </a></li>
        <li><a href="#2024-11-18n">2024-11-18 <br> Lab 10 </a></li>
        <li><a href="#2024-11-20n">2024-11-20 <br> exec! </a></li>
        <li><a href="#2024-12-13n">2024-12-13 <br> pipes </a></li>
        <li><a href="#2024-12-19n">2024-12-19 <br> Networking </a></li>
        <li><a href="#2024-12-20n">2024-12-20 <br> NetworkingII </a></li>
        <li><a href="#2024-12-21n">2024-12-21 <br> NetworkingIII </a></li>
        <li><a href="#2024-12-22n">2024-12-22 <br> NetworkingIV </a></li>

  </ul>


</div>

<div id="rightColumn" >
<button class="openbtn" onclick="openNav()" id="openSidebar" style="display:none">☰</button>
    <!-- To Hide elements:  -->
    <div style="display:none"> HIDDEN CONTENT </div>


    <!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->
    <!--
<div class="contentBlock" id="2023-mm-ddn">
<h5>2023-mm-dd</h5>
<a href="#TOP">go back to the top of the page</a>
</div>
-->
<!-- contentBlock DIVS SHOULD BE LEFT JUSTIFIED -->

<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->
<div class="contentBlock" id="2025-01-06n">
  <h5>2025-01-06</h5>
  <h3>Final Project Repo:</h3>
  <p>Please add your proposal to the repo today.</p>
  <p>Please use formatting in your md files. The DEVLOG in particular should be formatted so that you do not have merge conflicts with your partner.</p>
  <p>Please create the README and replace the placeholder text. You should not have a readme that says "Group Name" in it.</p>
  <p><a href="https://classroom.github.com/a/Vh67aNdh">https://classroom.github.com/a/Vh67aNdh</a> </p>
  <h3>Today/Tonight</h3>
  <p>Design the functions/comments/headers of your project. Organization is extremely important.</p>
  <p>Create the skeleton files for your project and organize things as much as you can.</p>
  <p>All members should try to commit from EACH device of theirs, so they know that their commits show up the correct way. Please check the commits from the website to ensure ALL devices commit using YOUR name and link to your profile. You should see your avatar icon next to your commits as well. </p>
  <p>Make sure you are each working on your own dedicated branch, and merging onto main when you have good code.</p>
  <p>The <strong>only place you should commit changes directly to main</strong> would be the DEVLOG, and README files.</p>
  <p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->
<div class="contentBlock" id="2025-01-03h">
    <h5>2025-01-03</h5>
  <h2>Final Projects!</h2>
  <p>Your final project calendar:</p>
  <ul>
    <li>Jan 2: Choose 0-2 partners and a topic. If you have 2 partners, your project should be larger in scope.</li>
    <li>Jan 3: Create a proposal with your project outline and how you intend to create it.</li>
    <li>Jan 6: You will be given your repos. Start work on your project.</li>
    <li>Jan 21: (Tues) all projects due. Final commits 8am including links to your presentation.</li>
  </ul>
  <p>The deadline is a cutoff date: <strong>students will lose write access to their repository after the deadline</strong> .</p>
  <p>Any group-issues must be communicated to me ASAP. If a group member gets sick, or lazy, you must tell me what is going on.</p>

  <h3><code>PROPOSAL.md</code> - due Monday in class.(You must place it into a repo during class.)</h3>
  <p>This should contain:</p>
  <ul>
  <li>A list of Group Members</li>
  <li>A statement of the problem you are solving and/or a high level description of the project.</li>
  <li>A description as to how the project will be used (describe the user interface).</li>
  <li> A description of your technical design. This should include:</li>
  <ul class="subList">
    <li>How you will be using the topics covered in class in the project.</li>
    <li>How you are breaking down the project and who is responsible for which parts.</li>
    <li>What algorithms and / data structures you will be using and how they will be used..</li>

  </ul>
  <li>A timeline with expected completion dates of various milestones of the project.</li>
  </ul>


    <h3>Documentation Specifications</h3>
    <p>Documentation <strong>30% of your grade.</strong> </p>
    <ol>
    <li><code>PROPOSAL.md</code> as described above.</li>
    <li>
      <code>README.md</code></p>
      <p>It should have the following information:
          <ul>
            <li>Project Name</li>
            <li>Team name</li>
            <li>Team Members</li>
            <li>Broad description of project</li>
            <li>Link to your 5-8 minute video demo</li>
            <li>(Optional) List of any required libraries. Include instructions on how to install the libraries</li>
            <li>Instructions on how to install/use your project</li>
          </ul>
      </p>
    </li>
    <li><code>DEVLOG.md</code>
        <ul>
          <li>This will contain a running list of updates to the project.</li>
          <li>Each entry should be timestamped and attributed to the student(s) that contributed to the update, along with a brief description of what was done.</li>
          <li>You must update this daily for full credit.</li>
          <li>The updates are indended to be made when you remember what you did and why.</li>
        </ul>
    </li>
    <li><code>makefile</code> with compile and run targets. The exact instruction to use should be in the <code>README.md</code> file.</li>
    </ol>

    <h3>Git commits, messages, anti-procrastination:</h3>
    <p>commits/anti-procrastination <strong>30% of your grade.</strong> </p>
    <p>You have classwork and homework EVERY DAY to work on this project, there are no exceptions unless you are sick.</p>
    <p>You must make commits daily for your project. There should be multiple commits per work session. A single commit in class and a single commit at home is not sufficient.</p>
    <p>You will be penalized if you procrastinate, do not do work regularly, or do not commit regularly with meaningful commit messages.</p>
    <p>It is acceptable to occasionally make few commits when stuck on a difficult part of the code, or when fixing bugs. This should not be the normal workflow however.</p>

    <h3>Presentation</h3>
    <p>Presentation <strong>10% of your grade.</strong> </p>
    <p>You and your partner(s) will give a 5-8 minute video presentation of what your program does, and how it works.</p>
    <p>You will not edit code, or show code.</p>
    <p>You will discuss what works, and what "almost" works in the case of features that are slightly buggy.</p>
    <p>Do not talk about what you could have done with more time.</p>
    <p>Your presentation should sound rehearsed/planned.</p>

    <h3>The actual project</h3>
    <p>The codebase and project <strong>30% of your grade.</strong> </p>
    <p>This includes if you worked on a sufficiently technical project of appropriate scope.</p>
    <p>Does the project work, can it be run on the lab computers.</p>


    <h3>Grade Summary</h3>
    <p>30% The codebase and project</p>
    <p>30% Documentation</p>
    <p>30% commits/anti-procrastination</p>
    <p>10% Presentation</p>


    <h3 id="project-notes">Project Notes</h3>
    <p>You can use any external libraries you-d like, for example, gtk for windowing, sdl for games, etc. but you must do the following:</p>
    <ul>
      <li>Make sure to mention any libraries in the README where you describe compiling instructions.</li>
      <li>Check with me to make sure we can install them.</li>
      <li>Make sure your program will run in the cs lab computers.</li>
      <li>Make sure they don't trivialize a systems programming aspect of the project.
        (You get no credit for features that come from the libraries)</li>
    </ul>

    <p><a href="#TOP">[back to top of page]</a></p>
  </div>



  <div class="contentBlock" id="2024-12-22n">
    <h5>2024-12-22</h5>
  <h3 id="systems-networking-iv-a-new-hope">Systems: Networking IV: A New Hope</h3>
  <p><img src="img/l34_starwars.jpg" width="400px" alt="Star Wars"> </p>
  <h4 id="transport-layer">Transport Layer</h4>
  <p>Computer to computer connection over a network.</p>
  <p>Unconcerned with the individual hops of internet layer traffic.</p>
  <p>In a program, a <em>socket</em> is the data type associated with a transport layer connection.</p>
  <p>Network ports are used at the transport layer that allow a computer to have multiple open network connections at the same time.</p>
  <p>TCP and UDP are transport layer protocols.</p>
  <h4 id="network-ports">Network Ports</h4>
  <p>A network port is a computer specific sub-address that allows computers (that have a single IP address) to have multiple open netowkr connections.</p>
  <p>There are <a href="https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers">65,536 ports</a>.</p>
  <p>Ports &lt; 1024 are well known, reserved ports used for specific services.</p>
  <ul>
  <li>For example, an ssh server will have an open socket on port 22 (this is similar to a WKP). When a child process is created to communicate with a client, that process uses a different port, leaving 22 open for the listening server.</li>
  </ul>
  <p>Regulated by the Internet Assigned Numbers Authority (IANA)</p>
  <p><strong>Transmission Control Protocol (TCP)</strong></p>
  <ul>
  <li>Reliable connection, guarantees delivery of data.</li>
  <li>Data is considered a continuous stream that arrives in the order it is sent (which may not be true in the lower layers)</li>
  <li>Connections are established using a 3-way handshake</li>
  </ul>
  <p><strong>User Datagram Protocol (UDP)</strong></p>
  <ul>
  <li>Does not require an explicit connection, no gaurantee of data delivery (at the transport layer).</li>
  <li>Data is sent as discrete datagrams with a set size (as opposed to a continuous stream).</li>
  <li>Datagrams may be dropped, or received out of order.</li>
  <li>UDP connections are faster because they do not need to be reassembled at the other end.</li>
  <li>Error checking can still be handled at an upper level.</li>
  </ul>
  <h4 id="application-layer">Application Layer</h4>
  <p>Once a socket (transport layer connection) has been established, the data transmitted between computers is at the application layer.</p>
  <p>Think about the data/payload section of an IP packet, anything inside that is application layer inforation.</p>
  <p>Data at this layer will be packaged depending on the program or protcol being used.</p>
  <p>Common application layer protocols: http, ftp, ssh, dns...</p>
  <p>Many application layer applications have registered ports at the transport layer.</p>
  <h4 id="data-encapsulation">Data Encapsulation</h4>
  <p>As data crosses from an upper layer to a lower one, layer-specific metadata is added to help aid transmission.</p>
  <p>Application —&gt; Transport</p>
  <ul>
  <li>UDP or TCP headers are added, including network port information</li>
  </ul>
  <p>Transport —&gt; Internet</p>
  <ul>
  <li>Data (including Transport headers) is packaged into IP Packets.</li>
  </ul>
  <p>Internet —&gt; Link</p>
  <ul>
  <li>Packets (including IP and Transport headers) are packaged into Ethernet Frames.</li>
  </ul>

  <p><a href="#TOP">[back to top of page]</a></p>
  </div>


  <div class="contentBlock" id="2024-12-21n">

  <p><img src="img/l33_3d.png" ></p>
  <pfast><strong>Routing</strong></p>
  <p>Routers break IPv4 packets (more later) into fragments.</p>
  <p>When a router receives a packet, it has 2 options:</p>
  <ol>
  <li>Send that packet to the attached local network.</li>
  <li>Forward that packet to a different router.</li>
  </ol>
  <p>Routers have address tables that identify all connected networks/devices.</p>
  <p><strong>IP Packets</strong></p>
  <p>IPv4 Packet format:</p>
  <p><code>header</code> <code>source</code> <code>destination</code> <code>data</code></p>
  <hr>

  <p>--</p>
  <p><code>header</code> 12B: Packet metadata</p>
  <p><code>source</code> and <code>destination</code> 4B each: IP Address</p>
  <p><code>data</code>: MTU is 65,535 Bytes</p>
  <p>IPv6 uses 8 Byte addresses
  IPv6 allows for jumbograms, with an MTU of 4GB</p>
  <p><strong>IPv4 packet header</strong></p>
  <p><code>type</code> <code>size</code> <code>fragment info</code> <code>ttl</code> <code>protocol</code> <code>header checksum</code></p>
   <hr>

  <p>--</p>
  <p><code>type</code> 2B: IPv4 / v6, length of header</p>
  <p><code>size</code> 2B: Total size of the packet</p>
  <p><code>fragment info</code> 4B: full payloads may be broken into multiple fragments. Each packet will count the number of fragments and its individual fragment number.</p>
  <p><code>ttl</code> (time-to-live) 1B: Maximum number of hops a packet can make before reaching its destination.</p>
  <p><code>protocol</code> 1B: TCP / UDP (this is transport layer information)</p>
  <p><code>header checksum</code> 2B: only a checksum of the header, not the full packet.</p>
  <p><strong>IP Addressess</strong></p>
  <p>Every device connected to the internet has an I.P. (Internet Protocol) address.</p>
  <p>They might look like this: <code>149.89.150.100</code>  (IPv4)</p>
  <p>or this: <code>0:0:0:0:0:ffff:9559:9664</code> (IPv6)</p>
  <p>IP addresses are only needed when connected.</p>
  <p>For the most part, organizations own blocks of IP addresses, and give them to their users as needed.</p>
  <p>Because IP addresses are released in blocks, internet traffic can be routed in an efficient manner.</p>
  <p><strong>IPv4 / IPv6 differences</strong></p>
  <p>Address space: 2^32 / 2^128</p>
  <p>Packet format: In addition to address size change, IPv6 packet headers have less information. They do not include a checksum or fragment information.</p>
  <p>MTU:  IPv6 can allot for an MTU of 2^32 (these are called jumbograms)</p>
  <p>IPv6 puts more work onto Link layer devices and individual hosts (computers)</p>
  <p>IPv6 does not fragment packets at all, relying on other devices to potentially take advantage of jumbograms</p>
  <p>IPv6 has no checksum, assuming Link layer devices and hosts will check for data integrity if needed.</p>
  <h4 id="transport-layer">Transport Layer</h4>
  <p>Computer to computer connection over a network.</p>
  <p>Unconcerned with the individual hops of internet layer traffic.</p>
  <p>In a program, a <em>socket</em> is the data type associated with a transport layer connection.</p>
  <p>Network ports are used at the transport layer that allow a computer to have multiple open network connections at the same time.</p>
  <p>TCP and UDP are transport layer protocols.</p>
  <h4 id="network-ports">Network Ports</h4>
  <p>A network port is a computer specific sub-address that allows computers (that have a single IP address) to have multiple open netowkr connections.</p>
  <p>There are <a href="https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers">65,536 ports</a>.</p>
  <p>Ports &lt; 1024 are well known, reserved ports used for specific services.</p>
  <ul>
  <li>For example, an ssh server will have an open socket on port 22 (this is similar to a WKP). When a child process is created to communicate with a client, that process uses a different port, leaving 22 open for the listening server.</li>
  </ul>
  <p>Regulated by the Internet Assigned Numbers Authority (IANA)</p>
  <p><strong>Transmission Control Protocol (TCP)</strong></p>
  <ul>
  <li>Reliable connection, guarantees delivery of data.</li>
  <li>Data is considered a continuous stream that arrives in the order it is sent (which may not be true in the lower layers)</li>
  <li>Connections are established using a 3-way handshake</li>
  </ul>
  <p><strong>User Datagram Protocol (UDP)</strong></p>
  <ul>
  <li>Does not require an explicit connection, no gaurantee of data delivery (at the transport layer).</li>
  <li>Data is sent as discrete datagrams with a set size (as opposed to a continuous stream).</li>
  <li>Datagrams may be dropped, or received out of order.</li>
  <li>UDP connections are faster because they do not need to be reassembled at the other end.</li>
  <li>Error checking can still be handled at an upper level.</li>
  </ul>
  <h4 id="data-encapsulation">Data Encapsulation</h4>
  <p>As data crosses from an upper layer to a lower one, layer-specific metadata is added to help aid transmission.</p>
  <p>Application —&gt; Transport</p>
  <ul>
  <li>UDP or TCP headers are added, including network port information</li>
  </ul>
  <p>Transport —&gt; Internet</p>
  <ul>
  <li>Data (including Transport headers) is packaged into IP Packets.</li>
  </ul>
  <p>Internet —&gt; Link</p>
  <ul>
  <li>Packets (including IP and Transport headers) are packaged into Ethernet Frames.</li>
  </ul>
  <p>Data decapsulation
  When data crosses back up a layer, the packaging for the lower layer is removed.</p>

  <p><a href="#TOP">[back to top of page]</a></p>
  </div>




  <div class="contentBlock" id="2024-12-20n">


    <p><img src="img/l32_breakin.png" class="center" height="400"></p>
  <h4 id="link-layer-the-softer-side">Link Layer: The Softer Side</h4>
  <p>In order for data to be sent between computers:</p>
  <ul>
  <li>Each computer needs a unique address (MAC Address).</li>
  <li>The data needs to be sent in a standardized format (Frames).</li>
  </ul>
  <p><strong>MAC (Media Access Control) Address</strong></p>
  <ul>
  <li>6 - Byte Hex address: <code>2a:00:1e:b9:70:f6</code></li>
  <li>MAC addresses only need to be unique on the same local network.</li>
  </ul>
  <h4 id="link-layer-the-softer-side">Link Layer: The Softer Side</h4>
  <p><strong>Ethernet Frames</strong></p>
  <p>Each frame has the following format:</p>
  <p><code>prefix</code> <code>dest</code> <code>source</code> <code>type</code> <code>data</code> <code>checksum</code></p>
  <hr>


  <p><code>prefix</code> 8B: <code>10101010</code> x7 + <code>10101011</code></p>
  <p><code>dest</code> &amp; <code>source</code> 6B each: MAC addresses</p>
  <p><code>type</code> 2B</p>
  <p><code>data</code>: MTU (Maximum Transmission Unit) of 1500B</p>
  <p><code>checksum</code> 4B: ensures data integrity</p>
  <table style="border: solid 1px black">
  <thead>
  <tr>
  <th>prefix</th><th>dest</th>
  </tr>
  </thead>
  </table>

  <table>
  <thead>
  <tr>
  <th>prefix</th>
  <th>dest</th>
  <th>source</th>
  <th>type</th>
  <th>data</th>
  <th>checksum</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td>8B</td>
  <td>6B</td>
  <td>6B</td>
  <td>2B</td>
  <td></td>
  <td>4B</td>
  </tr>
  </tbody>
  </table>
  <h4 id="internet-layer">Internet Layer</h4>
  <p>Transmission of data between two separate networks.</p>
  <p>Major features of this layer are addressing and routing.</p>
  <p>Routers are physical devices used to connect different local networks.</p>
  <p>Internet layer traffic ignores the specifics of link layer traffic.</p>
  <p>Inernet Protocol (IP) covers the standards for addressing and packet format.</p>
  <p><img src="img/l32_internet.png" class="center" width="600"></p>
  <p><strong>Routing</strong></p>
  <p>Routers break IPv4 packets (more later) into fragments.</p>
  <p>When a router receives a packet, it has 2 options:</p>
  <ol>
  <li>Send that packet to the attached local network.</li>
  <li>Forward that packet to a different router.</li>
  </ol>
  <p>Routers have address tables that identify all connected networks/devices.</p>
  <p><strong>IP Packets</strong></p>
  <p>IPv4 Packet format:</p>
  <p><code>header</code> <code>source</code> <code>destination</code> <code>data</code></p>
  <hr>


  <p><code>header</code> 12B: Packet metadata</p>
  <p><code>source</code> and <code>destination</code> 4B each: IP Address</p>
  <p><code>data</code>: MTU is 65,535 Bytes</p>
  <p>IPv6 uses 8 Byte addresses
  IPv6 allows for jumbograms, with an MTU of 4GB</p>
  <p><strong>IPv4 packet header</strong></p>
  <p><code>type</code> <code>size</code> <code>fragment info</code> <code>ttl</code> <code>protocol</code> <code>header checksum</code></p>
   <hr>

  <p><code>type</code> 2B: IPv4 / v6, length of header</p>
  <p><code>size</code> 2B: Total size of the packet</p>
  <p><code>fragment info</code> 4B: full payloads may be broken into multiple fragments. Each packet will count the number of fragments and its individual fragment number.</p>
  <p><code>ttl</code> (time-to-live) 1B: Maximum number of hops a packet can make before reaching its destination.</p>
  <p><code>protocol</code> 1B: TCP / UDP (this is transport layer information)</p>
  <p><code>header checksum</code> 2B: only a checksum of the header, not the full packet.</p>
  <p><strong>IP Addressess</strong></p>
  <p>Every device connected to the internet has an I.P. (Internet Protocol) address.</p>
  <p>They might look like this: <code>149.89.150.100</code>  (IPv4)</p>
  <p>or this: <code>0:0:0:0:0:ffff:9559:9664</code> (IPv6)</p>
  <p>IP addresses are only needed when connected.</p>
  <p>For the most part, organizations own blocks of IP addresses, and give them to their users as needed.</p>
  <p>Because IP addresses are released in blocks, internet traffic can be routed in an efficient manner.</p>
  <p><strong>IPv4 / IPv6 differences</strong></p>
  <p>Address space: 2^32 / 2^128</p>
  <p>Packet format: In addition to address size change, IPv6 packet headers have less information. They do not include a checksum or fragment information.</p>
  <p>MTU:  IPv6 can allot for an MTU of 2^32 (these are called jumbograms)</p>
  <p>IPv6 puts more work onto Link layer devices and individual hosts (computers)</p>
  <p>IPv6 does not fragment packets at all, relying on other devices to potentially take advantage of jumbograms</p>
  <p>IPv6 has no checksum, assuming Link layer devices and hosts will check for data integrity if needed.</p>
  <p><a href="#TOP">[back to top of page]</a></p>
  </div>





  <div class="contentBlock" id="2024-12-19n">
    <h4>2024-12-19</h4>
    <h2>Networking.</h2>
    <h3 id="layer-models-of-networking">Layer Models of Networking</h3>
  <p>  Due to the complexity of network communications, the topic is often conceptualized into distinct layers so people can work on specific components rather than everything at once.</p>
  <p>  The bottom layer is the most concrete, with each subsequent layer becoming more abstract (relying less on the physical connections and more on code).</p>
  <p>  There are various competing models, including the OSI (Open Systems Interconnections) and TCP/IP Models.</p>
  <h3>  TCP/IP Model Layers</h3>
  <ol>
    <li>Application - (process)</li>
    <li>Transport - (OS)</li>
    <li>Network - (OS) </li>
    <li>Link - (Physical) </li>
  </ol>
  <hr>
  <h3 id="link-layer">Link Layer</h3>
  <p>  Point-to-point transmission between devices on the same (local) network.</p>
  <p>  Combines physically connecting computers with basic addressing and transmission protocols.</p>
  <p>  Physical connection</p>
  <ul>
    <li>How to transmit bits between two computers.</li>
    <li>Electrons, photons, radio waves…</li>
  </ul>
  <hr>

  <h4 id="link-layer-a-brief-history-of-physical-connections">Link Layer: A brief history of physical connections</h4>
  <p>  <strong>Thicknet</strong></p>
  <p>  A single coaxial cable runs along the network.</p>
  <p>  “Vampire taps” cut into the cable and connect to a computer.</p>
  <p>  <img src="img/l31_vtap0.png" alt="vtap0"> <img src="img/l31_vtap1.png" alt="vtap1"></p>
  <hr>

  <p>  <strong>Thinnet</strong></p>
  <p>  A single coaxial cable runs along the network.</p>
  <p>  T-Connectors connect computers to the main cable.</p>
  <p>  <img src="img/l31_tconnect.png" alt="tcon"></p>
  <hr>

  <p>  <strong>Thin/Thicknet network topology</strong></p>
  <p>  <img src="img/l31_thick-thin.png" alt="topology"></p>
  <p>  Each new computer degrades the network
    collisions could cause issues</p>
  <hr>

  <p>  <strong>Token Ring</strong></p>
  <p>  Each computer is connected in a ring to each other.</p>
  <p>  Only one computer has command of network resources at a time. This is called &quot;having the token”.</p>
  <p>  The network sends a &quot;token&quot; throughout the ring, which contains the identity of the computer allowed to use the network. All other computers must wait to send data over the network.</p>
  <p>  <img src="img/l31_token.png" alt="token"></p>
  <p>  Each computer provides its own power and keeps single strength constant.</p>
  <p>  No possibility of collisions</p>
  <hr>

  <p>  <strong>Ethernet</strong></p>
  <p>  Multiple computers connect to a single hub or switch.</p>
  <p>  Hub: Broadcasts the data to all the computers</p>
  <p>  Switch: Sends data to a specific computer</p>
  <p>  <img src="img/l31_ethernet.png" alt="ethernet"></p>
  <hr>
  <!--
  <h4 id="link-layer-the-softer-side">Link Layer: The Softer Side</h4>
  <p>  In order for data to be sent between computers:</p>
  <ul>
  <li>Each computer needs a unique address (MAC Address).</li>
  <li>The data needs to be sent in a standardized format (Frames).</p>
  <p><strong>MAC (Media Access Control) Address</strong></p>
  </li>
  <li>6 - Byte Hex address: <code>2a:00:1e:b9:70:f6</code></li>
  <li>MAC addresses only need to be unique on the same local network.</li>
  </ul>
  <hr>

  <h4 id="link-layer-the-softer-side">Link Layer: The Softer Side</h4>
  <p>  <strong>Ethernet Frames</strong></p>
  <p>  Each frame has the following format:</p>
  <p>  <code>prefix</code> <code>dest</code> <code>source</code> <code>type</code> <code>data</code> <code>checksum</code></p>
    <hr>

  <p>  <code>prefix</code> 8B: <code>10101010</code> x7 + <code>10101011</code></p>
  <p>  <code>dest</code> &amp; <code>source</code> 6B each: MAC addresses</p>
  <p>  <code>type</code> 2B</p>
  <p>  <code>data</code>: MTU (Maximum Transmission Unit) of 1500B</p>
  <p>  <code>checksum</code> 4B: ensures data integrity</p>

    <thead>
    <tr>
    <th>prefix</th>
    <th>dest</th>
    <th>source</th>
    <th>type</th>
    <th>data</th>
    <th>checksum</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>  8B</td>
    <td>6B</td>
    <td>6B</td>
    <td>2B</td>
    <td>4B</td>
    </tr>
    </tbody>
  </table> -->


    <p><a href="#TOP">[back to top of page]</a></p>
  </div>




  <div class="contentBlock" id="2024-12-18n">
    <h5>2024-12-18</h5>
    <p>Motivation: Wouldn't it be nice if your server could accept clients from different computers? You could then distribute a client to your classmates and have them all use it.</p>

    <h2 id="sockets">Sockets</h3>
    <ul>
      <li>A connection between 2 programs using network protocols.
        <ul>
          <li>This is usually between 2 computers, but does not have to be.</li>
        </ul>
      </li>
      <li>A socket corresponds to an IP (internet protocol) Address / Port pair.</li>
      <li>To use a socket:
        <ol>
          <li>create the socket: <code>socket</code></li>
          <li>bind it to an address and port: <code>bind</code></li>
          <li>listen &amp; accept/initiate a connection: <code>listen</code> <code>accept</code>, <code>connect</code></li>
          <li>send/receive data
            <ul>
              <li>Functions vary depeding on type of socket</li>
            </ul>
            <ul>
              <li>
                <p>Most functions and structres in <code>sys/socket.h</code></p>
              </li>
              <li><code>socket( domain, type, protocol )</code>
                <ul>
                  <li>Creates a socket, opens it like a file, returning a socket descriptor (int that works like a file descriptor)</li>
                  <li><code>domain</code>: type of address
                    <ul>
                      <li><code>AF_INET</code> or <code>AF_INET6</code> or <code>AF_UNSPEC</code></li>
                    </ul>
                  </li>
                  <li><code>type</code>
                    <ul>
                      <li><code>SOCK_STREAM</code> or <code>SOCK_DGRAM</code></li>
                    </ul>
                  </li>
                  <li><code>protocol</code>
                    <ul>
                      <li>Combination of domain and type settings</li>
                      <li>If set to 0 the OS will set to correct protocol (TCP or UDP)</li>
                    </ul>
                  </li>
                  <li>example: <code>int sd = socket(AF_INET, SOCK_STREAM, 0);</code></li>
                </ul>
              </li>
              <li>

          </li>
        </ol>
      </li>
    </ul>
    <h3 id="socket-protocols">Socket Protocols</h3>
    <ul>
      <li><strong>Stream Sockets (TCP)</strong>
        <ul>
          <li>Reliable 2 way communication.</li>
          <li>Must be connected on both ends.
            <ul>
              <li>3 way handshake</li>
            </ul>
          </li>
          <li>Data is received in the order it is sent.</li>
        </ul>
      </li>
      <li><strong>Datagram Sockets (UDP)</strong>
        <ul>
          <li>“Connectionless”: an established connection is not required.</li>
          <li>Data sent may be received out of order (or not at all).</li>
          <li>Cannot use the usual <code>read</code> and <code>write</code> function calls.</li>
        </ul>
      </li>
    </ul>

    <h3 id="sockets-in-c">Sockets in C</h3>

    <ul>
      <li>
        <p>Most functions and structres in <code>sys/socket.h</code></p>
      </li>
      <li><code>socket( domain, type, protocol )</code>
        <ul>
          <li>Creates a socket, opens it like a file, returning a socket descriptor (int that works like a file descriptor)</li>
          <li><code>domain</code>: type of address
            <ul>
              <li><code>AF_INET</code> or <code>AF_INET6</code> or <code>AF_UNSPEC</code></li>
            </ul>
          </li>
          <li><code>type</code>
            <ul>
              <li><code>SOCK_STREAM</code> or <code>SOCK_DGRAM</code></li>
            </ul>
          </li>
          <li><code>protocol</code>
            <ul>
              <li>Combination of domain and type settings</li>
              <li>If set to 0 the OS will set to correct protocol (TCP or UDP)</li>
            </ul>
          </li>
          <li>example: <code>int sd = socket(AF_INET, SOCK_STREAM, 0);</code></li>
        </ul>
      </li>
      <li>
      <p><code>getaddrinfo</code> <code>&lt;sys/types.h&gt; &lt;sys/socket.h&gt; &lt;netdb.h&gt;</code></p>

      <ul>
        <li>
          <p>System library calls use a <code>struct addrinfo</code> to represent network addresses (containing information like IP address, port, protocol…)</p>
        </li>
        <li>
          <p>Will lookup information about the desired network address and get one or more matching <code>struct addrinfo</code> entries as a linked list.</p>
        </li>
        <li>
          <p><code>getaddrinfo(node, service, hints, results)</code></p>
        </li>
        <li><code>node</code>: String containing an IP address or hostname to lookup
          <ul>
            <li>If <code>NULL</code>, use the local machine's IP addresses (all of them).</li>
          </ul>
        </li>
        <li><code>service</code>: String with a port number or service name (if the service is in <code>/etc/services</code>)</li>
        <li><code>hints</code>: Pointer to a <code>struct addrinfo</code> used to provide settings for the lookup.
          <ul>
            <li>Think of this as a filter for the lookup that <code>getaddrinfo</code> performs. For example, if you only want to get an IPv4 address, you can set <code>hints</code> to be an IPv4 address.</li>
          </ul>
        </li>
        <li><code>results</code>: Pointer to a linked list of <code>struct addrinfo</code> containing entries for each matching address.</li>
        <li><code>getaddrinfo</code> will allocate memory for these structs. Since <code>results</code> will be a linked list of unknown size, you should use <code>freeaddrinfo</code> to release the entire linked list when you are done.</li>
      </ul>
    </li>
    <li>
      <p><code>bind( socket descriptor, address, address_length)</code> (server only)</p>

      <ul>
        <li>
          <p>Binds the socket to an address and port. This allows a server has to have a set public* adrress and port.</p>
        </li>
        <li>
          <p>Returns 0 (success) or -1 (failure)</p>
        </li>
        <li>
          <p><code>socket descriptor</code>: return value of socket</p>
        </li>
        <li>
          <p><code>address</code>: pointer to a <code>struct sockaddr</code> representing the address.</p>
        </li>
        <li>
          <p><code>address_length</code>: Size of the address, in bytes</p>
        </li>
        <li>
          <p><code>address</code> and <code>address_length</code> can be retrieved from <code>getaddrinfo</code>.</p>
        </li>
      </ul>
    </li>
  </ul>

  <h4 id="using-getaddrinfo-socket--bind-on-a-server">Using getaddrinfo, socket &amp; bind on a server</h4>

    <div><div class="highlight"><pre class="highlight"><code>//use getaddrinfo
  struct addrinfo * hints, * results;//results is allocated in getaddrinfo
  hints = calloc(1,sizeof(struct addrinfo));
  hints-&gt;ai_family = AF_INET;
  hints-&gt;ai_socktype = SOCK_STREAM; //TCP socket
  hints-&gt;ai_flags = AI_PASSIVE; //only needed on server
  getaddrinfo(NULL, "9845", hints, &amp;results);  //Server sets node to NULL

  //create socket
  int sd = socket(results-&gt;ai_family, results-&gt;ai_socktype, results-&gt;ai_protocol);

  bind(sd, results-&gt;ai_addr, results-&gt;ai_addrlen);

  //DO STUFF

  free(hints)
  freeaddrinfo(results);
  </code></pre></div></div>

  <ul>
    <li><code>listen (socket_descriptor, backlog)</code> (server only)
      <ul>
        <li>Set a socket to passively await a connection.</li>
        <li>Needed for stream sockets.</li>
        <li>Does not block.</li>
        <li><code>socket descriptor</code>: return value of <code>socket</code></li>
        <li><code>backlog</code>: Number of connections that can be queued up.
          <ul>
            <li>Depending on the protocol, this may not do much.</li>
          </ul>
        </li>
      </ul>
    </li>
    <li><code>accept</code> (server only)
      <ul>
        <li>Accept the next client in the queue of a socket in the listen state.</li>
        <li>Used for stream sockets.</li>
        <li>Performs the server side of the 3 way handshake</li>
        <li>Creates a new socket for communicating with the client, the listening socket is not modified.</li>
        <li>Returns a descriptor to the new socket</li>
        <li>Blocks until a connection attempt is made</li>
        <li><code>accept(socket_descriptor, address, address_length)</code></li>
        <li><code>socket descriptor</code>: descriptor for the listening socket <code>address</code>: Pointer to a <code>struct sockaddr_storage</code> that will contain information about the new socket after accept succeeds.</li>
        <li><code>address length</code>: Pointer to a variable that will contain the size of the new socket address after accept succeeds.</li>
      </ul>
    </li>
  </ul>

  <h3 id="using-listen-and-accept-for-servers">Using listen and accept for servers</h3>

    <div><div class="highlight"><pre class="highlight"><code>//use getaddrinfo (not shown)
  //create socket
  int sd = socket(results-&gt;ai_family, results-&gt;ai_socktype, results-&gt;ai_protocol);
  //use bind
  bind(sd, results-&gt;ai_addr, results-&gt;ai_addrlen);
  listen(sd, 10);
  int client_socket;
  socklen_t sock_size;
  struct sockaddr_storage client_address;
  sock_size = sizeof(client_address);
  client_socket = accept(sd,(struct sockaddr *)&amp;client_address, &amp;sock_size);
  </code></pre></div></div>

    <h3 id="using-connect-for-clients">Using connect for clients</h3>

    <ul>
      <li><code>connect</code> (client only) <code>&lt;sys/socket.h&gt; &lt;sys/types.h&gt;</code>
        <ul>
          <li>Connect to a socket currently in the listening state.</li>
          <li>Used for stream sockets.</li>
          <li>Performs the client side of the 3 way handshake</li>
          <li>Binds the socket to an address and port</li>
          <li>Blocks until a connection is made (or fails)</li>
          <li><code>connect(socket descriptor, address, address length)</code></li>
          <li><code>socket descriptor</code>: descriptor for the socket</li>
          <li><code>address</code>: Pointer to a <code>struct sockaddr</code> representing the address.</li>
          <li><code>address length</code>: Size of the address, in bytes</li>
          <li><code>address</code> and <code>address length</code> can be retrieved from <code>getaddrinfo()</code></li>
          <li>Note that the arguments mirror those of <code>bind()</code></li>
        </ul>
      </li>
    </ul>

    <div><div class="highlight"><pre class="highlight"><code>//use getaddrinfo (not shown)
  //create socket
  int sd = socket(results-&gt;ai_family, results-&gt;ai_socktype, results-&gt;ai_protocol);

  connect(sd, results-&gt;ai_addr, results-&gt;ai_addrlen);
  </code></pre></div></div>

  <h3>Beej's Guide to network programming using internet sockets</h3>
  <a href="https://beej.us/guide/bgnet/html/">https://beej.us/guide/bgnet/html/</a>

  </div>


<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->
<div class="contentBlock" id="2025-01-02n">
  <h5>2025-01-02</h5>
  <h3>Upgrade your pipe server!</h3>
  <p>Deadline is Tuesday.</p>
  <p>You should have tested your client and server by sending information back and forth somehow.</p>
  <h3>Basic client/erver functionality:</h3>
  <p>Now we want our <strong>server</strong> to choose a random int x from 0 to 100 and then send it to the client. Do this once every second (sleep after sending).</p>
  <p>Now we want our <strong>client</strong> to reapatedly: read the int sent by the server and print it.</p>
  <p>If you ctrl-c the client or the server they should both exit gracefully.</p>

  <h3>Update 1</h3>
  <p>Make a new file for this part: <code>persistant_server.c</code>™ (copy your working basic_server.c and start with that).</p>
  <ol>
    <li>Have the server loop to accept a new clients after the first client disconnects (ctrl-c the client).
    That is many sequential clients, one after another.</li>
    <li>Close the old file descriptors before you end your loop, or you will have an ever-growing file table. (close from_client and to_client)</li>
    <li>You must now also add a sighandler for SIGINT. This will delete the WKP befor ending the server.</li>
  </ol>

  <h3>Update 2</h3>
  <p>Make a new file for this part: <code>forking_server.c</code> (copy your working persistant_server.c and start with that.) This server fork to handle multiple concurrent connections. </p>
  <p>The server should only:</p>
  <ol>
    <li>create the WKP</li>
    <li>await a connection</li>
    <li>upon connection remove the WKP.</li>
    <li>Fork to create a subserver which will handle the client.</li>
    <li>Go back to step 1.</li>
  </ol>
  <p>A subserver should:</p>
  <ol>
    <li>Complete the 3-way handshake.</li>
    <li>Handle all commucations with the server.</li>
  </ol>
  <p>Notice the server steps 1-3 are all contained in the server setup command! Your server sets up the handshake, but your subserver actually does the rest of the handshake.</p>
  <p>You should write a half-handshake function that takes in the from_client fd as an additional argument: <code>server_handshake_half(int *to_client, int from_client)</code> </p>
  <p>Your server will <code>server_setup()</code> and your sub-server will finish the job with <code>server_handshake_half()</code></p>

  <p>To provide some communication, after the handshake: </p>
  <ul>
    <li>Modify the client + subserver to allow multiple requests per connection.</li>
    <li>Do this by sending a string to the server and get responses every second (use sleep(1) after recieving your message, print the result.)</li>
    <p>You can test by spawning multiple clients and verifying they all can maintain communication with the subservers</p>
  </ul>
  <p>The end result should be one server that processes client input from any number of clients.</p>
  <p>You can spawn 2 or more clients, each of which should be printing data every second.</p>

  <h3>UPDATE:</h3>
  <p>Required make targets:</p>
  <ul>
    <li>compile as usual: <code>make compile</code> </li>
    <li>to run the forking server: <code>make server</code> </li>
    <li>to run the client: <code>make client</code> </li>
  </ul>
  <p>I will run multiple clients in separate terminals this way.</p>

  <h3>Final Projects</h3>


  <h3>Project requirements</h3>
  <ul>
    <li>The final project is to be a significant piece of work that illustrates many of the ideas and techniques studied in the class:
      <ul class="subList">
        <li>Allocating memory</li>
        <li>Working with files</li>
        <li>Finding information about files (stat and such)</li>
        <li>Processes (fork, exec etc.)</li>
        <li>Signals</li>
        <li>Shared memory</li>
        <li>Semaphores</li>
        <li>Pipes (named and unnamed)</li>
        <li>Sockets</li>
      </ul>
    </li>
  <li>
    Your project should be able to meaningfully use at least 4 of these concepts.
    Don't just toss in a topic if there is no need for it in your project.
    Part of your design process should include considering how to incorporate the class material.
  </li>
  <li>
    You should also focus on creating a program that works well.
    It is better to have fewer features in a project that compiles &amp; runs smoothly
    than to have a lot of features that contain a lot of bugs.
  </li>
  <li>When designing your project, it is best to be able to generate a base working project early and then add features modularly as time goes on.</li>
  <li>You may work with one or two partners, all partners should be in the same section.</li>
  </ul>


  <h3>Project Ideas/Suggestions</h3>

  <ul>
    <li>
      If you are having difficulty coming up with a project idea, look back at some of the bigger assignments
      we-ve done over the semester and think about how you can add to them. These are just some ideas to get
      you going, please do not consider theses as superior to any other ideas you might have.
      <ul class="subList">
        <li>
          The music library could become much more useful by incoperating a music player (fork/exec),
          saving the library data (maybe even as a binary file), interacting with actual music files etc.
        </li>
        <li>The data file/csv assignment could become a more useful data organizing program.</li>
        <li>Semaphone could be tunred into a pipe/socket based live game.</li>
        <li>With pipes/sockets, you could write simplified versions of different kinds of servers.</li>
        <li>With pipes/sockets and semaphores you could write a SIMPLE database program.</li>
      </ul>
    </li>
    <li>
      If you are going to write a multi-program system with sockets/pipes, start simply.
      For example, if you-re making a 2 player game, then just have the programs connect
      directly do each other, instead of wirting a separate server to connnect them.
    </li>
    <li>
      As stated earlier, it's better to <strong>start small and grow</strong> than start large and have to cut things out (or live with bugs).
    </li>

  </ul>

<h3>URGENT NOTE:</h3>
<p>we have not covered networking and we are about 1 week short to cover the material.</p>
<p>I will post notes, and sample code, but do NOT suggest networking except for groups that want to learn more on their own.</p>

<h3>Prior Projects</h3>
<ul>
  <li>Distributed computing tool</li>
  <li>file editor (text/spreadsheet)</li>
  <li>Database program</li>
  <li>Client server program
    <ul class="subList">
      <li>chat</li>
      <li>simple game many players concurrently</li>
      <li>2-player game tournament</li>
    </ul>
  </li>
</ul>


  <p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->

<div class="contentBlock" id="2024-12-18n">
  <h5>2024-12-18</h5>
  <h3>Pipe Networking</h3>
  <p>For the purposes of these notes, the words server and client will be used only to differentiate two programs with respect to their roles in a connection attempt, and not with respect to their usage once a connection is made.</p>
  <ul>
    <li>Server will be the program that starts up and awaits an incoming connection.</li>
    <li>Client will be the program that initiates a connection to a waiting server.</li>
  </ul>

  <h3>Handshake</h3>
  <p>A handshake procedure to ensure that a connection has been established between 2 programs.</p>
  <p>Both ends of the connection must verify that they can send and receive data to and from each other.</p>
  <h4>3 way handshake</h4>
  <ol>
    <li>Client sends a message to the server (in TCP networking, this is called SYN). At this point, the server knows it can receive data.</li>
    <li>Server sends a response to the client based on the client's initial message (SYN_ACK). At this point the client knows it can recieve and send data.</li>
    <li>Client sends a response back to the server based on the server's response (ACK). At this point, the server knows it can receive and send data.</li>
  </ol>

  <h3>Server-Client Designs</h3>
  <p>There are a number of different ways to implement server/client systems.</p>
  <h4>Single Use Server</h4>
  <p>In this system, the server exits along with the client.</p>
  <ul>
    <li>Handshake</li>
    <li>Client: sends data to server.</li>
    <li>Server: gets response, acknowledges the response.</li>
    <li>Client: gets the response, acknowledges the acknowledgement.  </li>
  </ul>
  <p>When the client exits, so does the server.</p>


  <h4>Persistent Single Client Server</h4>
  <p>Pay attention to the setup/handshake which will be useful for your lab.</p>
  <p>In this system, the server will communicate with a single client. When the client exits, the server will reset to handle a new client.</p>
  <p>A Well Known Pipe (WKP) is a named pipe that exists only while the server exists, all clients know the name.</p>
  <p>A Private Pipe (PP) is a pipe that exists while the client is running. The client tells the server about this pipe. We will use a named pipe with the name that is the PID of the client.</p>
  <ul>
    <li>Setup
      <ol>
        <li>Server creates a WKP and waits for a connection.</li>
        <li>Client creates a private fifo (can use the PID in the name so it is unique.)</li>
        <li>Server waits for a connection to the WKP.</li>
      </ol>
    </li>
    <li>Handshake
      <ol>
          <li>Client: sends a message to server. (SYN) We will send the PP name to server. e.g. "120350"</li>
          <li>Server: gets the message, Removes the WKP. Sends an (SYN_ACK) We can send a random int to the PP.</li>
          <li>Client: gets the acknowledgement. Removes the PP. Sends the (ACK) its own acknowledgement to the server (same random integer + 1).</li>
          <li>Server reads and verifies the 2nd acknowledgement. This completes the handshake and both ends know that both send/recieve are working.</li>
      </ol>
    </li>
    <li>Operation
      <ol>
        <li>Server and client send data back and forth in a pre-determined pattern (protocol).</li>
      </ol>
    </li>
    <li>Reset
      <ol>
        <li>Client exits, server closes any connections to the client.</li>
        <li>Server goes back to setup and recreates a WKP...</li>
      </ol>
    </li>
  </ul>
  <p>The only way to quit the server is via ctl-c. This is fine, but it will leave the WKP on the filesystem. A cleaner exit would involve creating a signal handler that catches SIGINT and remove the WKP before exiting. Some of you did this on your prior lab.</p>


  <h4>Forking Server</h4>
  <p>Pay attention to the setup/handshake which will be useful for your lab.</p>
  <p>In this system, the server will create subservers for client communication. This will allow for multiple simultanious connections.</p>
  <p>The main server's job is to wait for a connection and create subservers.</p>
  <p>The subserver will handle all communication with the client.</p>
  <p>The client can work exactly the same as the persistent server client.</p>
  <ul>
    <li>Server: creates WKP and blocks until connection.</li>
    <li>Client: creates PP, connects to WKP, sends PP name, blocks on connection to PP.</li>
    <li>Server: gets connection on WKP, creates subserver.</li>
    <li>Server: Closes & removes WKP from disk.</li>
    <li>Server: Resets back to step 1.</li>
    <li>Subserver: reads PP name from client. (Subserver still has the WKP in memory)</li>
    <li>Subserver: sends secret message to client.(ack1)</li>
    <li>Client: gets subserver secret, removes PP, responds with (ack2). </li>
    <li>Subserver: verfies response from client, completing 3-way handshake.</li>
  </ul>


  <p>The following table will show the ordered sequence or steps. The steps can happen concurrently EXCEPT for when either server or client is blocked due to opening a pipe or reading.</p>
  <p>This sequence also shows how to design a setup()/handshake() method for the server/client.</p>
  <table>
	<tr><th>$ ./server                              </th><th>$ ./client</th></tr>
	<tr><td>-- server_handshake() --                  </td><td>-- client_handshake() --</td></tr>
	<tr><td>-- server_setup() --                      </td><td>3  Client making Private pipe</td></tr>
	<tr><td>1 Server making the pipe.                 </td><td>3  Client opening WKP [Unblock Server]</td></tr>
	<tr><td>2 Server opening the WKP.[BLOCKS]       </td><td>3  Client Writing PP to WKP (matches with step 5)</td></tr>
	<tr><td>4 Server removing the WKP.               </td><td>3  Client Opening PP [BLOCKS]</td></tr>
	<tr><td>-- end server_setup() --                  </td><td>8 Client Deleting PP</td></tr>
	<tr><td>5 Server reading SYN (the pid)           </td><td>8 Client reading SYN_ACK (matches with step 7)</td></tr>
	<tr><td>6 Server opening the Private Pipe [Unblock client]</td><td>8 Client Sending (matches with step 9) ACK</td></tr>
	<tr><td>7 Server sending SYN_ACK                  </td><td>-- end client_handshake() --</td></tr>
	<tr><td>9 Server reading final ACK                </td></tr>
	<tr><td>9 Server received ACK, handshake complete</td></tr>
	<tr><td>-- end server_handshake() --              </td></tr>
  </table>



    <h4>Classwork/HW</h4>
     <p>Clone the lab: <a href="https://classroom.github.com/a/qfzEQx6Z">https://classroom.github.com/a/qfzEQx6Z</a> </p>
     <ol>
      <li>Fill in the function definitions for server_handshake and client_handshake in pipe_networking.c.</li>
      <li>These should do everything needed to establish a 3-way handshake between the client and server.</li>
      <li>
        <p>Make sure you include diagnostic print messages in your functions.</p>
        <p>Note: To remove files, there is a simple function remove(PATH) that will remove the file at PATH.</p>
      </li>
      <li>Make and test</li>
      <li>Your final version should not modify any other files for this assignment.</li>
      <li>You CAN test to see if the handshake worked by writing a byte from client to server and vice versa.</li>
  </ol>
    <p><a href="#TOP">[back to top of page]</a></p>
  </div>



<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->

<div class="contentBlock" id="2024-12-07n">
  <h5>2024-12-16</h5>

  <h3>Lab 14</h3>
  <h5>Deadline: 12-18 8am</h5>
  <a href="https://classroom.github.com/a/BrV3rDjy">https://classroom.github.com/a/BrV3rDjy</a>

  <h3>Phase 1</h3>
  <p>Design a program that uses unnamed pipes to facilitate two-way parent/child process communication.</p>
  <p>Hint: In order to facilitate 2 way communication, you will need 2 pipes.</p>
  <ul>
    <li>  <strong>Parent</strong>
      <ol>
        <li>constantly prompts a user for input</li>
        <li>sends that input to child</li>
        <li>waits for a response</li>
        <li>displays the response to the user</li>
      </ol>
    </li>
    <li>  <strong>Child</strong>
      <ol>
        <li>Get input from parent</li>
        <li>"processes" the input. process could be any of a number of string processes (all caps, all lower, reverse, rot13, etc. ).</li>
        <li>Send the processsed string back to the parent.</li>

      </ol>
    </li>
  </ul>


  <h3>Phase 2</h3>
  <h4>Add the following features to your lab:</h4>
  <ol>
  <li>Use one named pipe (create in the same directory) for child processes to communicate back with the parent.</li>
  <li>Instead of 1 child, spawn 2-4 child processes randomly, give each their own unnammed pipe to receive messages from the parent.</li>
  <li>You may wish to create a "childID" variable that helps you know which pipe to use</li>
  <li>The parent will send all 4 processes the same input text.</li>
  <li>Each process will sleep a random amount of time 0-4 seconds. To do this, you should use the system call <code>usleep()</code> which uses microseconds instead of seconds, so random int from 0 to 4000000.</li>
  <li>After sleeping the child processes will process the string and send the pid of the child process + the processed string back to the parent using the named pipe.  </li>
  <li>You should use one write command to send all the data to avoid collisions with the other child processes.</li>
  <li>The parent will then print the PID and the processed string for each child</li>
  <li>The parent loops and asks for more input, use ctrl-c to exit.</li>
  <li>Note: There is no reason to use a named pipe here except to learn to used named pipes.</li>
  </ol>

  <h3>Output format to make y'all have some consistency</h3>
  <pre><code class="codeblock">$make run
Spawning 4 worker threads.
User Control Program (1244909) enter a line:
one fish two fish
(1244910) sleeping for 2.565000 seconds
(1244913) sleeping for 3.185000 seconds
(1244911) sleeping for 0.066000 seconds
(1244912) sleeping for 3.802000 seconds
result 0: pid(1244911): tsj knxm ybt knxm
result 1: pid(1244910): sri jmwl xas jmwl
result 2: pid(1244913): vul mpzo adv mpzo
result 3: pid(1244912): utk loyn zcu loyn
User Control Program (1244909) enter a line:
^C
$make run
Spawning 2 worker threads.
User Control Program (1244993) enter a line:
RED fisH! BluE fash.
(1244994) sleeping for 3.856000 seconds
(1244995) sleeping for 0.436000 seconds
result 0: pid(1244995): CPO qtdS! MwfP qlds.
result 1: pid(1244994): BON pscR! LveO pkcr.
User Control Program (1244993) enter a line:
fish fish
(1245066) sleeping for 1.327000 seconds
(1245067) sleeping for 1.374000 seconds
result 0: pid(1245066): jmwl jmwl
result 1: pid(1245067): knxm knxm
User Control Program (12444993) enter a line:
^C
</code></pre>
  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->


<div class="contentBlock" id="2024-12-13n">
  <h5>2024-12-13</h5>

<h3>Pipes</h3>
<p>A pipe is a conduit in memory between 2 separate processes on the same computer.</p>
<p>Pipes have 2 ends, a read end and a write end. Pipes act just like files (i.e. you can use read() and write() to send any set of bytes).</p>
<p>Unnamed pipes have no external identifier (more on named pipes later).</p>

<h3>Working with pipes</h3>
<p>Pipes are in <code>&ltunistd.h></code></p>
<p><code>pipe( descriptor_array )</code> creates an unnamed pipe.</p>
<p>Returns 0 if the pipe was created, -1 if not (errno).</p>
<p>This opens two file descriptors, the reading end and the writing end.</p>
<p><code>descriptor_array</code> will contain the descriptors for each end of the pipe. Must be an int array of size 2.</p>
<p><code>descriptor_array[0]</code> is the read end.</p>
<p><code>descriptor_array[1]</code> is the write end.</p>
<h4>Example:</h4>
<pre><code class="codeblock">//it is usefull to add these definitions to make your code more readible
#define READ 0
#define WRITE 1
int main() {
  int fds[2];
  pipe( fds );
  char line[100];

  f = fork();
  if (f == 0) {
    close( fds[READ] ); //it is a good idea to close the end of the pipe your are not using.
    write( fds[WRITE], "hello!", 7);
  }
  else {
    close( fds[WRITE] );
    read( fds[READ], line, sizeof(line) );
  }
}</code></pre>

<h3>Named Pipes</h3>
<p>Named pipes are also known as FIFOs.</p>
<p>Same as unnamed pipes except FIFOs have a name that can be used to identify them via different programs.</p>
<p>Like unnamed pipes, FIFOS are unidirectional.</p>
<p> <code>mkfifo</code> is a shell command to make a FIFO </p>
<pre><code>$ mkfifo nameOfPipeHere</code> </pre>
<p> <code>mkfifo</code> is a c function to create a FIFO that requires: <code>&ltsys/types.h> &ltsys/stat.h></code>
<ul>
  <li>Returns 0 on success and -1 on failure</li>
  <li>Once created, the FIFO acts like a regular file, and we can use <code>open</code> , <code> read</code>, <code>write</code>, and <code>close</code> on it.</li>
  <li>FIFOs will block on open until both ends of the pipe have a connection.</li>
</ul>
</p>

<h3>Classwork + Homework:</h3>
<p>Design a program that uses unnamed pipes to send one-way messages from a parent to a child or vice versa.</p>
<p>The parent can prompt the user for a message, and the child process can print it.</p>
<p>You should print the pid of the process in your <code>printf</code> statements so you know which process is saying what. e.g.</p>
<pre><code class="codeblock">$ make run
pid 32041: Enter text: blah blah backslash.
pid 32050: Recieved message: blah blah backslash.
$
</code></pre>


<p><a href="#TOP">[back to top of page]</a></p>
</div>




<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->
<div class="contentBlock" id="2024-12-10n">
  <h5>2024-12-10</h5>
    <h3>Using semaphores in C</h3>
      <ol>

        <li>headers: <code>&lt;sys/types.h&gt; &lt;sys/ipc.h&gt; &lt;sys/sem.h&gt;</code></li>


        <li><code>semget</code>
          <ul clas="sublist">
            <li>Create/Get access to a semaphore.</li>
            <li>Returns a semaphore descriptor or -1 (<code>errno</code>)</li>
            <li><code>semget( key, amount, flags )</code>
              <ul>
                <li><code>key</code>
                  <ul>
                    <li>Unique semaphore identifier</li>
                  </ul>
                </li>
                <li><code>amount</code>
                  <ul>
                    <li>Semaphores are stored as sets of one or more. The number of semaphores to create/get in the set.</li>
                  </ul>
                </li>
                <li><code>flags</code>
                  <ul>
                    <li><code>IPC_CREAT</code>: create the semaphore and set value to <code>0</code></li>
                    <li><code>IPC_EXCL</code>: Fail if the semaphore already exists and <code>IPC_CREAT</code> is on.</li>
                    <li>Includes permissions for the semaphore, combine with bitwise or (<code>|</code>).</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>


        <li><code>semctl</code>
          <ul style="list-style-type:square">
            <li>Control the semaphore, including
              <ul>
                <li>Set the semaphore value</li>
                <li>Remove the semaphore</li>
                <li>Get the current value</li>
                <li>Get/set semaphore metadata</li>
              </ul>
            </li>
            <li><code>semctl(descriptor, index, operation, data)</code>
              <ul>
                <li><code>descriptor</code>
                  <ul>
                    <li>The return value of <code>semget</code></li>
                  </ul>
                </li>
                <li><code>index</code>
                  <ul>
                    <li>The index of the semaphore you want to control in the semaphore set.</li>
                  </ul>
                </li>
                <li><code>operation</code>
                  <ul>
                    <li><code>IPC_RMID</code>: remove the semaphore</li>
                    <li><code>SETVAL</code>: Set the value (requires data)</li>
                    <li><code>GETVAL</code>: Return the value</li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><code>data</code>
              <ul>
                <li>Variable for setting/storing semaphore metadata</li>
                <li>Type is <code>union semun</code></li>
                <li><strong>You have to declare this union in your main c file on linux machines.</strong>
                  <ul>
                    <li>
                      <pre><code>union semun {
  int val;                  //used for SETVAL
  struct semid_ds *buf;     //used for IPC_STAT and IPC_SET
  unsigned short  *array;   //used for SETALL
  struct seminfo  *__buf;
};
                    </code></pre>
                  </li>
                </ul>
              </li>
              <li><code>union</code>?
                <ul>
                  <li>A c structure designed to hold only one value at a time from a group of potential values.</li>
                  <li>Just large enough to hold the largest piece of data it could potentially contain</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>


      <li>
        <code>semop</code>
        <ul class="sublist">
          <li>Perform an atomic semaphore operation</li>
          <li>You can <code>Up/Down</code> a semaphore by any integer value, not just <code>1</code></li>
          <li><code>semop( descriptor, operation, amount )</code>
            <ul>
              <li><code>amount</code> - The amount of operations you want to perform on the semaphore set.</li>
              <li><code>operation</code> - A pointer to a <code>struct sembuf</code>
              </ul>
          <li> <code>struct sembuff</code>:
            <pre><code>struct sembuf {
  short sem_op;
  short sem_num;
  short sem_flag;
};</code></pre>

          <ul>
            <li><code>sem_num</code>
              <ul>
                <li>The index of the semaphore you want to work on.</li>
              </ul>
            </li>
            <li><code>sem_op</code>
              <ul>
                <li><code>Down(S)</code>: Any negative number</li>
                <li><code>Up(S)</code>: Any positive number</li>
                <li><code>0</code>: Block until the semaphore reaches <code>0</code>.</li>
              </ul>
            </li>
            <li><code>sem_flag</code>
              <ul>
                <li><code>SEM_UNDO</code>: Allow the OS to undo the given operation. Useful in the event that a program exits before it could release a semaphore.</li>
                <li><code>IPC_NOWAIT</code>: Instead of waiting for the semaphore to be available, return an err</li>
              </ul>
            </li>
          </ul>

        </li>
      </ul>
    </li>
    <li>Putting it all together.
      <ul>
        <li>Creating a single semaphore and initializing its value to <code>1</code>:
          <pre><code>int semd = semget(KEY, 1, IPC_CREAT | IPC_EXCL | 0644);
union semun us;
us.val = 1;
r = semctl(semd, 0, SETVAL, us);</code></pre>
        </li>
        <li>Removing a semaphore:
          <code>semctl(semd, IPC_RMID, 0);</code></li>
          <li>Getting a a semaphore &amp; upping and downing it.
            <pre><code>semd = semget(KEY, 1, 0); //get access
struct sembuf sb;
sb.sem_num = 0;
sb.sem_flg = SEM_UNDO;
sb.sem_op = -1; //setting the operation to down

semop(semd, &amp;sb, 1); //perform the operation
printf("got the semaphore!\n");
sleep(10); //simulate doing something.

sb.sem_op = 1; //set the operation to up
semop(semd, &amp;sb, 1); //perform the operation
            </code></pre>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h3>Sample IPC code:</h3>
<ul>

<li><a href="src/ipc/sem_control.c">sem_control</a></li>
<li><a href="src/ipc/sem_user.c">sem_user</a></li>
<li><a href="src/ipc/shm.c">shm</a></li>
<li><a href="src/ipc/shm2.c">shm2</a></li>
<li><a href="src/ipc/shmrm.c">shmrm</a></li>
<li><a href="src/ipc/unnamed.c">unnamed</a>(for pipes later in the week)</li>
</ul>

<h3>Lab13</h3>
<p>Deadline Thursday, you will have 2 lab days to work in class.</p>
<a href="https://classroom.github.com/a/lZQ6Uun6">https://classroom.github.com/a/lZQ6Uun6</a>
<p>You're going to write a game where each program adds on a new line to a story, but they can only see the one previous line!</p>
<p>It will use a semaphore to control access to a file and shared memory.</p>
<p>
  Before doing any of this check out the notes page for <sub>i</sub>nformation on using semaphores in c.
  At the bottom are full code snippets that demonstrate the usage. I will add some sample programs that use shared memory and semaphores.</p>
<p>You will need 2 programs, one to create/monitor/remove the file (stores a story), shared memory (stores the size of the last line added.) and a semaphore (to block write access), and one to use those structures to implement the telephone style game:</p>
<p>Both programs should be compiled with the compile target of your makefile.</p>
<p>Note: Only one program should be able to modify the resources at a given time. This includes creating and writing, but not reading!</p>
<h4>Control program:</h4>
<p>The control program should be run with a make target "control" (<code>make control ARGS=???</code> e.g. <code>make control ARGS=create</code>)</p>
<p><code>create</code>
  <ul>
    <li>Should make the shared memory segment (one integer), semaphore and file called <code>story.txt</code> (open the file with the truncate flag to erase any prior data.)</li>
    <li>Set any values that are needed.</li>
  </ul>
</p>
<p><code>remove</code>
  <ul>
    <li>Remove the shared memory and the semaphore</li>
    <li>Display the full contents of the story.</li>
  </ul>
</p>
<p><code>view</code>
  <ul>
    <li>Display the full contents of the story.</li>
  </ul>
</p>
<h4>The writing program:</h4>
<p>Your program will allow multiple people to collaborate on a story, BUT the intent is that you can only see one previous entry when adding new text. </p>
<ul>
  <li>Should be run with a make target write. ( <code>make write</code> ) </li>
  <li>Will attempt to access the resources using the semaphore. </li>
  <li>Display a message indicating that it attempting to open the resource. This means there will be some message prior to the program blocking.</li>
  <li>Once it gains access to the resources it should:</li>
  <ul class="subList">
    <li>Finds the size of the last line added by looking at the value in the shared memory. If the size is 0, then you are the first person.</li>
    <li>Display the last line added to the file (seek using the size).</li>
    <li>Prompt the use for the next line to be added to the story.</li>
    <li>Read the user input from stdin</li>
    <li>Once a new line of input is read, it should write that <strong>message to the file</strong> and write the <strong>size to the shared memory</strong> .</li>
    <li>After completing these steps you release the semaphore, and end the write program.</li>
  </ul>

</ul>


  <p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->

<div class="contentBlock" id="2024-12-09n">
  <h5>2024-12-09</h5>
  <h2>Inter-Process Communication (IPC)</h2>
  <p>There are many kinds of Inter-Process Communication, <em>but</em> there is a specific set of IPC features that have competing standardized implementations, these are:</p>
    <ol>
      <li>Shared Memory</li>
      <li>Semaphores</li>
      <li>Message Queues</li>
    </ol>
  </li>
<h3>System V IPC</h3>
<ul>
  <li>
    For the IPC features mentioned, there are 2 standards:
    <ol>
      <li>Portable Operating System Interface (POSIX)</li>
      <li>System V</li>
    </ol>
  </li>
  <li>Both of these cover more than IPC, and their functionality, thought not their implementations, are mostly the same.</li>
  <li> We will be using System V IPC.</li>
  <li><code>$ ipcs</code> is a useful command line utility to see active System V IPC structures.</li>

</ul>

<h3>Shared Memory</h3>
<ul>
  <li>A segment of heap-like memory that can be accessed by multiple processes.</li>
  <li>Shared memory is accessed via a key that is known by any process that needs to access it.</li>
  <li>Shared memory does not get released when a program exits.</li>
  <li><strong>5 Shared memory operations</strong>
    <ul class="sublist">
      <li>Create the segment (happens once) - <code>shmget</code></li>
      <li>Access the segment (happens once per process) - <code>shmget</code></li>
      <li>Attach the segment to a variable (once per process) - <code>shmat</code></li>
      <li>Detach the segment from a variable (once per process) - <code>shmdt</code></li>
      <li>Remove the segment (happens once) - <code>shmctl</code></li>
    </ul>
  </li>
  <li>
    <p>Using shared memory in C:
Headers: <code>&lt;sys/shm.h&gt; &lt;sys/ipc.h&gt; &lt;sys/types.h&gt;</code></p>

<pre><code>int *data;
int shmid;
shmid = shmget(INTEGER_KEY_GOES_HERE, sizeof(int), IPC_CREAT | 0640);
printf("shmid: %d\n", shmid);
data = shmat(shmid, 0, 0); //attach
printf("data: %p\n", data);
printf("*data: %d\n", *data);
*data = * data + 10; //work with the segment as a normal pointer
printf("*data: %d\n", *data);
shmdt(data); //detach
</code></pre>
<p>To remove the segment:</p>
<pre><code>int shmid;
shmid = shmget(INTEGER_KEY_GOES_HERE, sizeof(int), IPC_CREAT | 0640);
shmctl(shmid, IPC_RMID, 0); //remove the segment
</code></pre>
  </li>
</ul>


<h3>Controlling access</h3>
<p>Before utilizing shared memory, we need a way to control access to shared resources.  Files and shared memory are both resources that are commonly shared.</p>
<p>You have seen lockfiles, or files that tell you another file is being edited by some other program. These are common for files specifically, but they don't always work. When programs crash, they do not clean up the lock files. If you ever had a "firefox is already running error" or seen a file in your directory with almost the same name as something you are editing, that is an example of a file that controls access. </p>
<p>Unfortunately files to control access are not appropriate for shared memory.</p>

<p>Tomorrow we will learn about semaphores. A semaphore is method of visual signaling, usually by means of flags or lights.</p>

<h3>Monty Python semaphore video</h3>
  <p>Jump to the 18 minute mark of this video and watch the semaphore version of withering heights: <a href="https://www.dailymotion.com/video/xsefeg">https://www.dailymotion.com/video/xsefeg</a> </p>
  <p>Now you will remember that a semaphore is method of visual signaling, usually by means of flags or lights.</p>
  <p>In a programming language we use semaphores to "notify" a program that a resource is either free or in use much like how the flags signal.</p>

<h3>Semaphores in c</h3>
  <p>Semaphores are an IPC construct used to control access to a shared resource (like a file or shared memory).</p>
  <p>Most commonly, a semaphore is used as a counter representing how many processes can access a resource at a given time.
    <ul>
      <li>If a semaphore has a value of 3, then it can have 3 active “users”.</li>
      <li>If a semaphore has a value of 0, then it is unavailable.</li>
    </ul>
  </p>
  <p>Some semaphore operations are <em>atomic</em>, meaning they will not be split up into multiple processor instructions.</p>
  <h3>Semaphore operations</h3>
  <ol>
    <li>“Maintenance operations”
      <ul>        <li>Create a semaphore</li>        <li>Set an initial value</li>        <li>Remove a semaphore</li>
      </ul>
    </li>
    <li>Traditional Semaphore Usage
      <ul style="list-style-type:square">
        <li><code>Up(S)</code> | <code>V(S)</code> - <em>atomic</em>
          <ul>
            <li>Release the semaphore to signal you are done with its associated resource</li>
            <li>Pseudocode
              <ul>                <li><code>S++</code></li>              </ul>
            </li>
          </ul>
        </li>
        <li><code>Down(S)</code> | <code>P(S)</code> - <em>atomic</em>
          <ul>
            <li>Attempt to take the semaphore.</li>
            <li>If the semaphore is 0, wait for it to be available.</li>
            <li>Pseudocode
              <ul>
                <li><code>while (S == 0) { block } S--;</code></li>
              </ul>
            </li>
            <li>Important distinction that the blocking is not atmoic, so if a processess checks the semaphore
                and it is unavailable, other processes can run, <em>but</em> if the semaphore is available,
                the process will immediately modify the semaphore.</li>
          </ul>
        </li>
      </ul>
    </li>
  </ol>


<p><a href="#TOP">[back to top of page]</a></p>
</div>



<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->
<div class="contentBlock" id="2024-12-02n">
  <h5>2024-12-02</h5>
  <h2>Cowabunga, let's kick some shell 🐢</h2>
  <h3>Project (MyShell) Overview</h3>
  <p>You (and up to 2 partners if desired - at least 1 partner highly suggested) are to write a shell. The shell should implement as many of these features as possible. The first being the most basic up to the last which is the most complex.</p>
  <ul>
    <li>General Functionality:
     <ol>
      <li>Prompt the user for input and read a line at a time from stdin.</li>
      <li>parse the user input line to separate the command from its arguments.</li>
      <li>The shell should then fork for each command and the child should execvp that command.</li>
      <li>The parent process (shell) should wait until the exec'd program exits and then it should go back to step 1.</li>
      <li>Semicolons act as a separator of commands, so you can have multiple commands on the same line. e.g. <code>echo 1;echo 2;echo 3</code> Important note: The semicolon is the only symbol that will not be separated by spaces (for easy splitting)</li>
    </ol>
    </li>

    <li>The working directory:
     <ol>
       <li>The command <code>cd</code> is not a program to execvp, your shell has to keep track of the current working directory instead.</li>
       <li>Look at the <code>chdir()</code>  and <code>getcwd()</code> functions </li>

    </ol>
    </li>

    <li>The prompt:
     <ol>
       <li>The prompt should includ the cwd path, e.g. <code>"/home/konstans/Documents/ $"</code> </li>
       <li>The prompt can shorten the path using the <code>~</code> as the home directory. e.g. <code>"~/Documents/ $"</code> </li>
       <li>You should <code>fflush(stdout);</code> after printing so that a partial lines are displayed and the children don't print a second copy of things. (The shell prompt is a partial line!)</li>

    </ol>
    </li>


    <li>Exiting:
     <ol class="sublist">
      <li>To quit your shell use the <code>exit</code> command. This is not a program to execute.</li>
      <li><code>Ctrl-D</code> (end of file) shoud terminate the shell. Check your <code>fgets()</code> return value.</li>

    </ol>
    </li>

    <li>Implement simple redirection.
       <ol class="sublist">
	       <li>Support both redrection oprators: the <code>&gt</code> (redirecting stdout) and <code>&lt</code> (redirecting stdin).
           <li>This will be explained in class.</li>
      </ol>
    </li>
    <li>
       Implement simple pipes. Only one pipe at a time is required.
       <ol class="sublist">
        <li>The pipe operator <code>|</code> redirects one program's output to be another program's input.  e.g. <code>ls | wc</code> would run ls and use the output from ls as the input for wc.</li>
        <li>Check out popen() for the advanced way of doing this, otherwise use a temp file.</li>
      </ol>

    </li>

    <li>
       Compilation, running, and testing:
       <ol class="sublist">
        <li>The project should be built using make and a makefile, I will only compile by using <code>make compile</code> which should output an executable file <code>shell</code> .</li>
        <li>The project should be runnable by running <code>./shell</code> after the make compile command. </li>
        <li>You must be able to test your shell using the syntax: <code>./shell &lt lines.txt</code> where lines.txt contains commands on each line.</li>
        <li>All of the features discussed work in bash, so use it to check out the functionality of each feature if you are unclear about anything.</li>

      </ol>

    </li>

  </ul>

  <h3>Code/Documentation requirements</h3>
  <ol>
    <li>Every function you write must have a <strong>function header comment </strong> describing the arguments, return value and what the function does. </li>
    <li>Use modular design liberally. This is a large program.</li>
    <li>You should have a readme file with the following:
        <ul>
          <li>All group member's names</li>
          <li>Your group's "creative team name" where you can optionally flex on other groups by making a really good name.</li>
          <li>A description of what features your shell implements</li>
          <li>A description of what features you attempted to implement but were unsuccessful</li>
          <li>Any bugs or things you want me to know about your program</li>
          <li>I am much more forgiving of reported bugs than bugs I discover while testing</li>
          <li>A copy of every function header</li>
        </ul>
    </li>
    <li>This project should use separate C files as necessary.</li>

    <li>Restrictions on input (to make your job easier):
      <ul>
        <li>Command line arguments will be separated by single spaces. (Except the semicolon)</li>
        <li>I will only test a single pipe  <code>|</code> </li>
        <li>I will only test up to one  <code>&gt</code> </li>
        <li>I will only use the <code>&gt</code> syntax, not the <code>2&gt</code> or <code>&amp&gt</code></li>
        <li>&lt would go after the first command only, </li>
        <li>&gt would go at the end of the command only. </li>
        <li>e.g. <pre><code>a &lt c.txt | b  &gt d.txt</code></pre> This would cause: c.txt goes into program a, the output of a goes into program b, the output of b goes into the file d.txt  )</li>

        </li>
      </ul>

    </li>

    <li>If you would like to implement other features after getting these ones down, please do. Look at what bash does and see what else you can do!</li>
  </ol>



  <h5>Due: Monday  12/09 8:00 am</h5>
  <h5>Repo Name format:</h5>
  <p> <code>PERIOD-NAME1-NAME2</code> (This is separate from your creative team name)</p>
  <p> Where NAME is last name + first initial e.g.  <code>3-WrightE-WongL-WongJ</code>  </p>
  <p> Team name and other information will go in the <code>README.md</code></p>
  <h5>GitHub Submission Link:</h5>
  <p>  <a href="https://classroom.github.com/a/Tfg6waJb">https://classroom.github.com/a/Tfg6waJb</a> </p>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->
<div class="contentBlock" id="2024-11-27n">
  <h5>2024-11-27</h5>
  <h2>Open a remote repo in a browser using the CLI:</h2>
  <h3>WSL:</h3>
  <code>alias gh='explorer.exe https://$(git config remote.origin.url | cut -f2 -d@ | tr ':' /)'</code>
  <h3>Non-wsl:</h3>
  <p>Change the explorer.exe to some other application... like <code>firefox</code> , or on mac, you can use the <code>open</code> command </p>
  <p>Like this: <code>firefox "https://`(git config remote.origin.url | cut -f2 -d@ | tr ':' /)`"</code></p>

  <h2>SHELL PROJECT After break:</h2>
  <p>You (and up to 2 partners if desired - at least 1 partner highly suggested) are to
    write a shell.</p>
  <p>By Monday, you should have a group chosen. You may not work with the same partner as before.</p>



  <h2>Redirection</h2>

  <p>Redirection is when you change the usual input/output behavior of a program</p>
  <h2>Command line redirection</h2>
  <table>
    <tr>
      <th>Symbol</th>
      <th>Purpose</th>
    </tr>
    <tr>
      <td>&gt</td>
      <td>
        <p>Redirects stdout to a file.</p>
        <p>  Overwrites the contents of the file.</p>
      </td>
    </tr>
    <tr>
      <td>&gt&gt</td>
      <td>Redirects stdout to a file by appending.
      </td>
    </tr>
    <tr>
      <td>&lt</td>
      <td>
        <p>Redirect stdin from a file.</p>
        <p>The file is treated exactly like stdin, for example scanf() will read up until a newline is found.</p>
      </td>
    </tr>
    <tr>
      <td>| (pipe)</td>
      <td>
        <p>Redirect stdout from one program to stdin of the next.</p>
        <p>  Very useful for chaining programs together.</p>
      </td>
    </tr>
    </table>


    <h2>Redirection in c programs</h2>
    <ol>
      <li>
        <code>dup2</code> - <code>  &ltunistd.h></code> is used to redirect a file descriptor
        <ul>
          <li>dup2( fd1, fd2 )</li>
          <li>Redirects fd2 to fd1</li>
          <li>Any use of fd2 will now act on the file for fd1.</li>
        </ul>
      </li>
      <li>
      <code>dup </code> - <code> &ltunistd.h></code> is used to backup a file descriptor.

        <ul>
          <li>Duplicates an existing entry in the file table.</li>
          <li>Returns a new file descriptor for the duplicate entry.</li>
          <li>dup( fd )</li>
        </ul>
      </li>
    </ol>

    <h3>USING dup and dup2 together:</h3>
    <p>Note: the filenumber for stdout is just <code>stdout</code>  </p>
    <pre>
      <code>int fd1 = open("foo.txt", O_WRONLY);
int stdout = STDOUT_FILENO;//stdout filenumber is 1, but this makes it clear
int backup_stdout = dup( stdout ) // save for later
dup2(fd1, stdout); //sets stdout's entry to the file "foo.txt".
printf("TO THE FILE!!!\n");
fflush(stdout);//not needed when a child process exits, becaue exiting a process will flush automatically.
dup2(backup_stdout, stdout); //sets the stdout entry to backup_stdout, which is the original stdout</code>
    </pre>
    <h3>Your shell project will need to use dup() and dup2()</h3>
    <p>It should be reasonably straight forward that you can implement the redirection operators <code>&lt</code> or <code>&gt</code> by changing the input to be a file instead of stdin, or the output to be a file not stdout. </p>


    <h3>Implementation</h3>
    <p>You can make redirection with pipes  <code>ls | wc</code> in the following manner:</p>
    <ol>
      <li>run ls and redirect stdout to a temp file</li>
      <li>run wc and redirect the temp file to stdin</li>
      <li>remove the temp file when done. </li>
    </ol>
    <p>The above strategy is a little inelegant, as it would pollute the ls command with the temp file. There is a better way we will learn in the near future. </p>

    <p><a href="#TOP">[back to top of page]</a></p>
  </div>

<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->
<div class="contentBlock" id="2024-11-25n">
  <h5>2024-11-25</h5>
  <h2>Managing Sub-Processes</h2>
  <p>
    <p><code>fork() - &lt;unistd.h&gt;</code></p>
    <ul>
      <li>Creates a separate process based on the current one, the new process is called a child, the original is the parent.</li>
      <li>The child process is a duplicate of the parent process.</li>
      <li>All parts of the parent process are copied, including stack and heap memory, and the file table.</li>
      <li>Returns a pid_t type (signed int), the value returned is:
        <ul class="sublist">
          <li>-1 if the fork failed, check your <code>errno</code></li>
          <li>The child's pid to the parent</li>
          <li>0 to the child</li>
        </ul>
      </li>
      <li>If a parent process ends before the child, the child's new parent pid is 1</li>
    </ul>
  </p>
  <p>
  <pre class="codeblock"><code>pid_t p;
p = fork();
if(p&lt;0){
  perror("fork fail");//output to stderr instead of stdout
  exit(1);
} else if ( p == 0){
    printf("Hello from Child!\n");
}else{
    printf("Hello from Parent!\n");
}</code></pre>

  <code>wait - &lt;sys/wait.h&gt;</code>
  <ul>
    <li>Stops a parent process from running until any child has exited.</li>
    <li>Returns the pid of the child that exited, or -1 (<code>errno</code>), and gathers information about the child process (this is called reaping)</li>
    <li>If multiple child processes exit, an arbitrary one will be reaped.</li>
    <li><code>wait(int* status)</code>
      <ul>
        <li>Pass in an address to an int <code>status</code> which is used to store information about how the process exited.</li>
        <li>Status macros
          <ul>
            <li>Usage: <code>MACRO( status )</code></li>
            <li><code>WIFEXITED</code>: True if child exited normally</li>
            <li><code>WEXITSTATUS</code>: The return value of the child</li>
            <li><code>WIFSIGNALED</code>: True if child exited due to a signal</li>
            <li><code>WTERMSIG</code>: The signal number intercepted by the child</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</p>
<p>
  <code>waitpid - &lt;sys/wait.h&gt;</code>
  <ul>
    <li>Wait for a specific child</li>
    <li><code>waitpid(pid, status, options)</code>
      <ul>
        <li><code>pid</code>
          <ul>
            <li>The pid of the specific child to look for</li>
            <li>If -1, will wait for any child (normal wait)</li>
          </ul>
        </li>
      </ul>
    </li>
    <li><code>options</code>
      <ul>
        <li>Can set other behavior for waitpid,.</li>
        <li>This is 0 or more flags.</li>
        <li>if 0, will work normally, otherwise you would or the flags together. </li>
      </ul>
    </li>
  </ul>
</p>

<h2  id="2024-11-25h">Lab12</h2>
<p>Repo link: <a href="https://classroom.github.com/a/0glxvVjC">https://classroom.github.com/a/0glxvVjC</a> </p>
<p>Make should have compile and run targets.</p>
<p>Write a c program that does the following:</p>
<ol>
  <li>Forks off 2 child processes</li>
  <li>
    Child process instructions:
    <ul>
      <li>At the start print its pid, and a random number in the range [1, 5]. e.g. "123531 5sec". These numbers should be different each time, but could match sometimes (1/5 of the time NOT ALL THE TIME!)</li>
      <li>Sleep for a random number of seconds equal to the random number printed earlier (do not re-random the value!)</li>
      <li>Each child calculates their own random, so they can each sleep for a different number of seconds</li>
      <li>At the end print a message "PID finished" e.g. "123531 finished after 5 seconds."</li>
    </ul>
  </li>
  <li>
    <p>Parent process instructions. Note the strings have _placeholders_ designated with underscores.</p>
    <ul>
      <li>Before forking, print out the initial message "_PID_ about to create 2 child processes."</li>
      <li>After the fork, wait for any child to finish</li>
      <li>Once a child has finished, print out a message. That includes its own PID and information about the child that exited.  Then end the program.</li>
      <li>The message should be: "Main Process _PID_  is done. Child _EXITING_CHILD_PID_ slept for _SEC_ sec"</li>
      <li>The other child might still be running and can finish after the parent, that's intended behavior.</li>
    </ul>
  </li>
</ol>
<h3>Sample output:</h3>
<pre class="codeblock"><code>user@host $ ./a.out
68724 about to create 2 child processes
68726 2sec
68725 4sec
68726 finished after 2sec
Main Process 68724 is done. Child 68726 slept for 2sec
user@host $
68725 finished after 4sec</code></pre>
<p>Note the 2nd child prints after your shell prompt is printed.</p>


<p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->
<div class="contentBlock" id="2024-11-21n">
  <h5>2024-11-21</h5>
  <h2  id="2024-11-21h">Lab11</h2>
  <h5>Deadline: Tues 11-26</h5>
  <h3>Main Goal</h3>
  <p>Write a function that uses strsep to parse a line of arguments</p>
  <ul>
    <li>The library is <code>parse.c/h</code> your code will be tested by including parse.h so there should be no other extrernal requirements.</li>
    <li>header: <code>void parse_args( char * line, char ** arg_ary );</code></li>
    <li>Parameter <code>line</code> a mutable string with the command line invocation of a program e.g. "ls -a -l" or "cat fish.txt"</li>
    <li>Parameter <code>arg_ary</code> is an array of char* which will be modified to have each index point to the corresponding argument in the parameter string, that could be used for execvp()</li>
    <li>Note that there is exactly one space separting adjacent arguments</li>
  </ul>
  <h3>Example:</h3>
  <pre class="codeblock"><code>char * cmdargv[16];
char line[] = "mkdir aaa";
parse_args(line,cmdargv);</code></pre>
  <p>Note the result of running the code above is the following array:</p>

  <p><img width="300px" src="img/cmdargv.jpg" alt="argument array example"></p>
  <p>Also note that <code>cmdargv</code> is pointing to memory locations of <code>line</code>, so further manipulation of the <code>line</code> variable will result in damage to your array's strings.</p>

  <h3>Testing</h3>
  <ul>
    <li>To test this function, your main program (separate c file!) should use it on a string and then call execvp successfully.</p></li>
    <li>For example, the following code should work assuming all variables are declared appropriately:</p>
      <pre><code>char * args[16];
char line[] = "ls -l -h";
parse_args( line, args );
execvp(args[0], args);</code></pre>
  </li>
    <li>You can make the following assumptions:</p>
      <ol>
        <li>There is exactly 1 space between each argument in the original string</li>
        <li><code>char** arg_ary</code> is long enough to store the tokens of the provided <code>line</code> </li>
        <li><code>char* line</code> is correctly formatted.</li>
        <li><code>char* line</code> is a muteable string</li>
      </ol>
    </li>
  </ul>
  <h3>Assignment Repo:</h3>
  <p>Clone the repo: <a href="https://classroom.github.com/a/8ifXTxo7">https://classroom.github.com/a/8ifXTxo7</a> </p>
  <p>Test with a variety of lengths of commands such as:</p>
  <ol>
  <li><code>yes a b c d e f g h i</code> (test with different numbers of args, but it must fit in your arg array)</li>
  <li><code>echo 8 6 7 5 3 0 9</code> (test with different numbers of args, but it must fit in your arg array)</li>
  <li><code>toilet -f emboss Execute!</code> (you may not have this) </li>
  <li><code>toilet Hello --metal</code> (you may not have this)</li>
  <li><code>cowsay -f dragon-and-cow roar</code> </li>
  </ol>

<p><a href="#TOP">[back to top of page]</a></p>
</div>


<div class="contentBlock" id="2024-11-20n">
  <h5>2024-11-20</h5>

  <h2>Exec</h2>
  <p>The exec functions are a group of c functions that can be used to run other programs.</p>
  <p>When used, they replace the current process with the new program.</p>
  <p>These functions are all in <code>&ltunistd.h></code>  </p>
  <ol>
    <li>
      <h4>execl</h4>
      <code>execl(path, command, arg0, arg1 … NULL)</code>
      <ul>
        <li><em>path</em>: The path to the program (ex: "/bin/ls" )</li>
        <li><em>command</em>: The name of the program (ex: "ls") </li>
        <li><em>arg0 ... </em> : Each command line argument you wish to give the program. (ex "-a", "-l")
        The last argument must be NULL </li>
      </ul>
    </li>
    <li>
      <h4>execlp</h4>
      <code>execlp(path, command, arg0, arg1 ... NULL)</code>
      <ul>
        <li>Works like execl, except it uses the <code>$PATH</code> environment variable for commands.</li>
        <li>For example, you can use "ls" as the path instead of "/bin/ls"</li>
        <li>To check the <code>$PATH</code> environment variable, use: <code>echo $PATH</code> </li>
      </ul>
    </li>
    <li>
      <h4>execvp</h4>
      <code>execvp(path, argument_array)</code>
      <p>argument_array</p>
      <ul>
        <li>Array of strings containing the arguments to the command.</li>
        <li>argument_array[0] must be the name of the program.</li>
        <li>The last entry must be NULL</li>
        <li>Like execlp, the path argument will use the $PATH environment variable.</li>
      </ul>
      <p>Sample argument_array</p>
      <p><img width="300px" src="img/cmdargv.jpg" alt="argument array example"></p>
      <p>A much better example is displayed in class... your notes are supreme in this case.</p>

      <h3>How would you convert a command line into an argument array?</h3>
      <p>The way execvp works is it requires you to use an argument array. This means to run a command like <code>"ls -a -l"</code> must be parsed and manipulated into an array of 3 strings and a terminating null:</p>
      <ul>
        <li>argumentarray[0] must be "ls"</li>
        <li>argumentarray[1] must be "-a"</li>
        <li>argumentarray[2] must be "-l"</li>
        <li>argumentarray[3] must be NULL</li>
      </ul>
      <p>Here is an example of what you would do in memory:</p>
      <img src="img/execargsParsing.png" alt="diagram of parsing ls -a -l">
      <p>Note this is also why you must not destroy your buffer until after the tokens are no longer needed.
        Some of you had bugs where you used a buffer for your csv header, then re-used that buffer for the individual lines. At the end of your program, the header strings were erased.</p>

      <h3>This looks like a job for strsep()!</h3>
      <p>Remember you have a pointer to the string, that is mutable, in this case it is called string.</p>
      <p>Store the locations of the different string starting points in your command args array.</p>
      <img src="img/parseArgsBefore.png" alt="strsep">
      <p>After a few iterations:</p>
      <img src="img/parseArgsDurring.png" alt="strsep">

</li>
</ol>
  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-11-18n">
  <h5>2024-11-18</h5>


  <h3>static</h3>
  <p><strong>static variables</strong>
    <ul>
      <li>
        preserve their value even after they are out of their scope! Hence,
        static variables preserve their previous value in their previous scope
        and are not initialized again in the new scope.
      </li>
      <li>can only be initialized using constant literals. No function calls. </li>
      <li>should not be declared inside a struct.</li>
      <li>are initialized as 0 if not initialized explicitly.</li>
    </ul>
  </p>
  <p><strong>static functions</strong>
   <ul>
     <li>Functions are declared static to limit access. They cannot be used in other files.</li>
     <li>You can reuse of the same function name in other files as a result.</li>
   </ul>

  <p>Example of a functin with a static variable:</p>
  <pre class="codeblock"><code>#include <stdio.h>
int fun(){
    //This assignment only happens the first time the function is run
    static int count = 0;
    count++;
    return count;
}

int main(){
    printf("%d ", fun());
    printf("%d ", fun());
    printf("%d ", fun());
    return 0;
}</code></pre>
   <p><strong>Output:</strong> <code>1 2 3</code> </p>

  <h2 id="2024-11-18h">Lab10</h2>
  <p><strong>Deadline</strong> : Thu 11/21 8am</p>
  <p>You will have class time Today and Monday to work on it.</p>
  <p><strong>GitHub link</strong>: <a href="https://classroom.github.com/a/9SRoOA3D">10-Signals-That-You-Need-To-Sleep-More</a> </p>
  <p>Write a C program with the following features:</p>
  <ol>

    <li>Runs constantly inside a forever while loop.</li>
    <li>Print out the process' PID inside the loop <code>"My PID is : XXX"</code>.</li>
    <li>Use the sleep(1) function to have the program wait 1 second between inner loop iterations.</li>
    <li>Catch the following signals
      <ul>
        <li><code>SIGINT</code>
            <p>
              <ul class="sublist">
              <li>Print to stdout <code>"Process with PID: XXX Exiting due to SIGINT"</code> replacing XXX with the actual process id.</li>
              <li>Append the above message to a file <code>output.txt</code>, one message per line. The file should be created if it doesn't exist, or append new lines if it does. (See the notes on sprintf to format a string in memory like you do with printf).</li>
              <li>Exit your program with a 0 exit code.</li>
            </ul>
            </p>
        </li>
        <li><code>SIGQUIT</code>
          <ul class="sublist">
            <li>Print out the PID and Parent PID in the format:
            <code>"PPID: XXX , PID: YYY"</code>
            replacing XXX and YYY with the correct ID values.</li>
             <li>DO NOT cause the program to exit.</li>
          </ul>
      </ul>
    </li>
    <li>Include a makefile with a run and compile target.</li>
    <li>I will make compile and then make run. I will then use the kill command (or ctrl-c and ctrl-\) to send the signals to your program.</li>
  </ol>
  <h3>Sample run:</h3>
  <pre><code>$make compile
$make run
PID is : 10432
PID is : 10432
PID is : 10432
^-\ (sigquit)
PPID: 10401 , PID: 10432
PID is : 10432
PID is : 10432
^-c (sigint)
Process with PID: 10432 Exiting due to SIGINT
$cat output.txt
Process with PID: 10432 Exiting due to SIGINT
$
</code> </pre>

  <p>Please test your programs on a clean clone of your repo. The number of mistakes due to this last time was astoundingly high.</p>
  <h3>sprintf - print to a string buffer. This is used to format a string as if you were printing it. It is useful if you want to print the string, and do something else with it (like write it to a file also).</h3>
  <p><code> int sprintf(char *str, const char *string,...); </code> </p>
  <h4>Return value:</h4>
  <p>If successful, it returns the total number of characters written excluding null-character appended in the string.</p>
  <p>In case of failure a negative number is returned .  </p>
  <pre><code>char buffer[100];
float pi = 3.14159;
int bytes = sprintf(buffer, "The value of pi is %.2f.", pi);
//check your bytes for negative
printf("%s\n", buffer);</code> </pre>
</div>

<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-11-15n">
  <h5>2024-11-15</h5>
  <h2>Processes</h2>
  <p>Every running program is a process.</p>
  <p>A process can create subprocesses, but these are no different from regular processes.</p>
  <p>A processor can handle 1 process per cycle (per core).</p>
  <p>"Multitasking" appears to happen because the processor switches between all the active processes quickly.</p>
  <p>On *nix style machines, processes are also files, listed in the /proc directory.</p>

  <h2>pid</h2>
  <p>Every process has a unique identifier called the pid.</p>
  <p>pid 1 is the init process</p>

  <p>The <code>ps</code> command shows status of processes. You will probably want the flags -aux, where -a will include other users, -x will include processes that are not attached to a terminal session (daemons and services), and -u shows more information including the username that ran the process.</p>
  <p><code>ps -u</code> or for even more processes <code>ps -aux</code>  </p>
  <p>There are many options, but they aren't super critical.</p>
  <p><code>ps -u --sort pid</code></p>
  <p><code>ps -u --sort %mem</code></p>


  <h2>Signals</h2>
  <p>Limited way of sending information to a process.</p>
  <p>Sending a signal just sends an integer value to a process, these integers have special values like SIGINT (interupt signal) or SIGTSTP (keyboard signal to background a process).</p>
  <h3>Some keyboard shortcuts send signals to the active program in your shell:</h3>
  <p><code>ctrl-c</code> will send the signal <code>SIGINT</code>.</p>
  <p><code>ctrl-\</code> will send the signal <code>SIGQUIT</code>.</p>
  <p><code>ctrl-z</code> will send the signal <code>SIGTSTP</code>.</p>


  <h3>Sending signals via the terminal</h3>
  <p><code>kill</code> - Command line utility to send a signal to a process</p>
  <p><code>kill pid</code>  - Sends signal 15 (SIGTERM) to pid	</p>
  <p><code>kill -signal pid</code>  Sends signal to pid </p>
  <p><code>$ killall [-signal_name] process_name</code> - Sends SIGTERM (or signal_name if provided) to all processes with process_name</p>

  <p><code>man 7 signal</code> : shows all signals.	3: quit, 9: kill, 17/18: stop, 19: continue</p>

  <h3>Signals in your program</h3>
  <p>All these functions can be found in &ltsignal.h></p>

  <h4>Finding PID:</h4>
  <p><code>getpid()</code> - <code>&ltunistd.h></code> - returns the current process- pid</p>
  <p><code>getppid()</code> - <code>&ltunistd.h></code> - returns the current process- parent pid</p>

  <h4>Sending a signal:</h4>
  <p><strong><code>kill(pid, signal)</code></strong></p>
  <ul>
    <li>Returns 0 on success or -1 (errno) on failure.</li>
    <li>Works like the command line kill program</li>
  </ul>
  <h4>Listening for signals:</h4>
  <p><strong><code>sighandler</code> </strong> </p>
  <ul>
    <li>To intercept signals in a c program you must create a signal handling function.</li>
    <li>Some signals (like SIGKILL, SIGSTOP) cannot be caught.</li>
    <li><code>static void sighandler( int signo )</code>
      <ul class="subList">
        <li>Must be static, must be void, must take a single int parameter.</li>
        <li>Static values in c exist outside the normal call stack, they can be accessed regardless of the function at the top.</li>
        <li>For variables, static also means they retain their value even if the function they are declared in has ended.</li>
        <li>Static values (variables and functions) can only be accessed from within the file they are declared.</li>
      </ul>
    </li>
  </ul>
  <p><strong><code>signal</code> </strong> </p>
    <ul>
     <li>Attach a signal to a signal handling function</li>
     <li>signal( SIGNUMBER, sighandler)</li>
     <li>Note that you are passing the name of the signal handling function as a parameter.</li>
    </ul>


  <h3>singal/sighandler example:</h3>
  <p>Make the sighandler function:</p>
  <pre class="codeblock"><code>static void sighandler(int signo) {
    if ( signo == SIGUSR1 )
      printf("Who you talkin to?\n”);
    }
  }
  </code> </pre>
  <p>Then in your make sure you activate the sighandler by attaching it with the signal command:</p>
  <pre class="codeblock"><code>signal(SIGUSR1, sighandler);</code></pre>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->


<div class="contentBlock" id="2024-11-12n">
  <h5>2024-11-12</h5>


  <h3>strtok() is tokxic</h3>
  <p>The limitation of strtok(char *str, const char *delim) is that it can't work on
  multiple strings simultaneously as it maintains a static pointer. This is a hidden state, it is not a pure function.</p>
  <p>You should never use strtok in a library because your library calls will break any existing strtok() usage.</p>

  <h3>strsep() to the rescue</h3>
  <p> <code>strsep</code> is in <code>&LTstring.h></code> </p>
   <p>Strsep will parse a string with a common delimiter : <code>strsep( source, delimiters )</code>  </p>
   <p>Locates the first occurrence of any of the specified delimiters in a string and replaces it with NULL</p>
  <p>delimiters is a string, each character is interpreted as a distinct delimiter.</p>
  <p>Returns the beginning of the original string, sets source to the string starting at 1 index past the location of the new NULL</p>
  <p> Since source's value is changed, it must be a pointer to a string (char **). </p>
  <p>example:</p>
  <pre>
<code>char line[100] = "woah-this-is-cool";
char *curr = line;
char * token;
token = strsep( &curr, "-" );</code>
  </pre>
  <p>The code above:</p>
  <ul>
      <li>replaces the '-' after woah with NULL </li>
      <li>returns a pointer to the w in "woah"</li>
      <li>sets curr to point to the t in "this-is-cool"</li>
  </ul>


  <h2 id="2024-11-12h">Lab09 Struct Files</h2>
  <h5>Deadline: Monday 2024/11/18 8am </h5>
  <p>You should have a makefile with compile target that creates the correctly named program.</p>
  <p>GH Classroom link: <a href="https://classroom.github.com/a/Bb1mCg4X">https://classroom.github.com/a/Bb1mCg4X</a> </p>
  <p><strong>Requirement:</strong> Your <code>make compile</code> should output an executable named "structrw" for ease of scripting on my end. That is compile must use <code>-o structrw</code> </p>
  <p>You will find a csv file of NYC census population values here: <a href="src/nyc_pop.csv">nyc_pop.csv</a>  Place this in the same directory as your code/makefile but don't add it to your repo.  </p>
  <p>For testing, here is another file: <a href="src/us_pop.csv">us_pop.csv</a></p>

  <ul>
    <li>The header of the file is this: <code>Year,Manhattan,Brooklyn nine-nine,Queens,The Bronx,Staten Island</code> </li>

    <li>An example line of data is this: <code>1790,33131,4549,6159,1781,3827</code>  </li>
    <li>You should support comma separated headers of boroughs with spaces in them. (e.g.) Staten island does not have to be the last entry. There will always be 6 columns in my test cases.</li>
    <li>You must use <code>strsep()</code> to parse the header. There are multiple ways to do this but I want you to learn <code>strsep()</code> .</li>
    <li>There will always be 5 locations plus the year per line, so you can use <code>sscanf</code> to get the numbers.</li>

    <li>Additionally you should probably terminate the header string by replacing the first '\n' (or '\r') with a 0. This will remove the newline from your strings, and handle windows and unix line endings.</li>
  </ul>
  <p>Your goal: write a program that will perform the following actions based on a command line argument: </p>
  <ol>

    <li>
      <code>-read_csv</code>
      <ul>
        <li> Read the contents of the <code>nyc_pop.csv</code> file (this is text).</li>
        <li>
          Store each piece of data using the following struct (exactly) :
          <pre>struct pop_entry {
  int year;
  int population;
  char boro[20];
};</pre>
        </li>
        <li>Create & write a new file <code>nyc_pop.dat</code> containing the population data using <code>struct pop_entry</code> . This file should contain byte data. </li>
        <li>If the file already exists, overwrite the existing one.</li>
      </ul>
    </li>

    <li>
      <code>-read_data</code>
      <ul>
        <li>
          Read the contents of the data file into an array of <code> struct pop_entry</code> values.
          This array should be dynamically allocated based on the file size.       </li>
        <li> Display the data in human-readable format, provide a number for each data entry when displaying.       </li>
      </ul>
    </li>

    <li>
      <code>-add_data</code>
      <ul>
        <li> Ask the user for new data to put into a <code>struct pop_entry</code> value.</li>
        <li> The data should be entered to stdin on one line in the format: Year population borough. (see note at end)</li>
        <li> Append the entry in the data file (not the csv).</li>
      </ul>
    </li>

    <li>
      <code>-update_data</code>
      <ul>
        <li> Start by showing the dat file just like <code>-read_data</code> .       </li>
        <li>  Then prompt the user to enter the corresponding number of an entry to modify.      </li>
        <li>  Then prompt the user for new data.</li>
        <li>The data should be entered to stdin on one line in the format: Year population borough.(see note at end)</li></li>
        <li>Update the entry in the data file (not the csv).</li>
      </ul>
    </li>
  </ol>

  <h3>Sample output:</h3>
  <ol>
    <li>
      <code>-read_csv </code>
      <pre>
        <code>$ ./structrw -read_csv
reading nyc_pop.csv
wrote 2760 bytes to nyc_pop.data</code>
      </pre>
    </li>

    <li>
      <code>-read_data </code>
      <p>This is only the fist 11 entries, there should be 115 in nyc_pop.csv at the start. </p>
      <pre>
        <code>$ ./structrw -read_data
0: year: 1790	boro: Manhattan	pop: 33131
1: year: 1790	boro: Brooklyn nine-nine	pop: 4549
2: year: 1790	boro: Queens	pop: 6159
3: year: 1790	boro: The Bronx	pop: 1781
4: year: 1790	boro: Staten Island	pop: 3827
5: year: 1800	boro: Manhattan	pop: 60515
6: year: 1800	boro: Brooklyn nine-nine	pop: 5740
7: year: 1800	boro: Queens	pop: 6642
8: year: 1800	boro: The Bronx	pop: 1755
9: year: 1800	boro: Staten Island	pop: 4563
10: year: 1810	boro: Manhattan	pop: 96373</code>
      </pre>
    </li>

    <li>
      <code>-add_data </code>
      <p> <code>2020 Bronx 1390450</code> Was entered into stdin as a single input at the time of the program running.</p>
      <pre>
        <code>$ ./structrw -add_data
Enter year population borough: 2020 1390450 Bronx
Appended data to file: year: 2020	boro: Bronx	pop: 1390450</code>
      </pre>
    </li>

    <li>
      <code>-update_data  </code>
      <p>Only showing the last few lines of output, but all the data should be displayed.</p>
      <p> <code>108</code> and <code>9999 4000 Stuy</code> where entered into stdin. </p>
      <pre>
        <code>$ ./structrw -update_data
...
...MORE LINES HERE...
...
107: year: 2000	boro: Queens	pop: 2229379
108: year: 2000	boro: Bronx	pop: 1332650
109: year: 2000	boro: Staten Island	pop: 443728
110: year: 2010	boro: Manhattan	pop: 1585873
111: year: 2010	boro: Brooklyn	pop: 2504700
112: year: 2010	boro: Queens	pop: 2230722
113: year: 2010	boro: Bronx	pop: 1385108
114: year: 2010	boro: Staten Island	pop: 468730
115: year: 2020	boro: Bronx	pop: 1390450
entry to update: 108
Enter year pop boro: 9999 4000 Stuy
File updated.</code>
      </pre>
    </li>
  </ol>

<h3>How to deal with input</h3>
<p>The above sections mentioned: <em>The data should be entered to stdin on one line in the format: Year population borough</em> </p>
<p>This can be done using <code>sscanf()</code> and some special notation for strings.</p>
<p> using <code>%[SET]</code> in your sscanf will scan a strings containing characters in the set until it sees somthing not in the set.</p>
<p>Using the ^ character will negate the set.</p>

<h3>Example:</h3>
<h4>Parsing stdin strings using sscanf</h4>

<pre class="codeblock"><code>char line_buff[256];
char s0[32];
char s1[32];
char s2[32];
char s3[32];
printf("Enter string: (I only read up to the first whitespace)");
printf("e.g. You cannot store 'abc def ghi'");
fgets(line_buff,255,stdin);
//read a string up to the first whitespace
sscanf(line_buff,"%s",s0);
printf("'%s'\n",s0);

printf("Enter string: (try 123abc)");
fgets(line_buff,255,stdin);
//read a string of digits, up to the first non-digit, start by consuming the newline
sscanf(line_buff,"\n%[0-9]",s1);
printf("'%s'\n",s1);

printf("Enter string: (try asdf123)");
fgets(line_buff,255,stdin);
//read a string of non-digits, stopping at the first digit.
sscanf(line_buff,"%[^0-9]",s2);
printf("'%s'\n",s2);

printf("Enter string: (try abc def ghi");
fgets(line_buff,255,stdin);
//read a string of non-digits, stopping at the first newline
sscanf(line_buff,"%[^\n]",s3);
printf("'%s'\n",s3);</code></pre>


  <p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------------------------CONTENT BLOCK-------------------------------------------------- -->
<div class="contentBlock" id="2024-11-05n">
  <h5>2024-11-05</h5>
  <h3>Stuy Quantum</h3>
  <p>StuyQuantum is holding its very own Qiskit Fall Fest in partnership with IBM Quantum from Thursday, November 7th at 4:30 pm to Thursday, November 14th at 5:30 pm! Join us this Thursday for instructions and the kickoff event! If you can not make it, all instructions will be available on our website!
It is not necessary to be in the club to participate, but definitely consider joining! Our website also has our lesson slides in case you want to review any topics. The old lesson slides are password protected, so email either Matthew Karp or Jay Chen for the password. Join our discord to discuss and ask questions about the event. No prior experience is necessary! Any submission will receive a certificate of completion if effort is shown!</p>
  <a href="https://stuyquantum.com/fallfest.html">stuyquantum.com/fallfest.html</a>
  <p>Join our social media (Discord, Insta, Epsilon) found on <a href="linktr.ee/stuyquantum">DiscordLink</a> for more updates!</p>

  <h2 id="2024-11-05h">Lab08 Directory info</h2>
  <p><strong>Deadline is Tuesday 8am.</strong>, You will be assigned a new lab on Tuesday!</p>
  <p>Write a program that will gather various information about a directory.</p>
  <p>This will use your args parsing , as well as your ability to use dirent and stat().</p>
  <h3>Functionality:</h3>
  <p>By default the target is the current directory ("./")</p>

    <ol>
      <li>list all the files in the directory</li>
      <li>specify which files are directories (if any)</li>
      <li>
        show the total size of all the regular files the directory. Do NOT include the size of folders (they show as 4096bytes). You can use <code>du -h -d 1</code> to see the total size of the current directory including all subdirectories.
        <ul>
          <li>note that you do not need to recursively go through any subdirectories to find their size for this part (unless you want to, but that is not a simple task)</li>
        </ul>
      </li>
      <li>As always you should have compile and run targets in your makefile</li>
    </ol>
    <p>Possible enhancements:</p>
    <ul>
        <li>Recursively traverse sub directories and calculate the size of the files in those subdirectories.
           Display the current directory total, AND the total including all sub directories (do not traverse <code>.</code> or <code>..</code> ) .
        </li>
        <li>Print out the size in a more readable format (like using KB, MB, GB for -byte prefixes)</li>
        <li>Make it look more like <code>ls -l</code> by including permissions</li>
    </ul>

    <h3>User Input:</h3>
    <p>After you complete the above portion your program should handle user input as follows:</p>
    <ol>
      <li>If a command line argument is entered, use that as the directory to scan, otherwise use "./" </p></li>
      <li>If the argument does not have a trailing / you may wish to add one.</li>
      <li>if an invalid directory is entered or you do not have permission, print a reasonable error message. (hint: you must use errno)</p></li>
      <li>In your makefile you can use <code>$(ARGS)</code> to represent your command line arguments. So:</p>
        <p>If your recipe says:  <code>./a.out $(ARGS)</code> </p>
        <p>Then you call make as follows: <code>make run ARGS="PATH_GOES_HERE"</code></p>
        <p>Make would then run: <code>./a.out PATH_GOES_HERE</code></p>
      </li>

    </ol>
    <h3>Testing:</h3>
    <p>Make a few different directories with some files in them.</p>
    <p>Your <code>make run</code> should work on the current directory, which should be the same as <code>make run ARGS="./"</code> </p>
    <p>You should test many different cases for the path: <code>make run ARGS="folder1/"</code> , <code>make run ARGS="../folder3/"</code> , and <code>make run ARGS="folder1/folder2/"</code> </p>


    <h3>Repository</h3>
      <a href="https://classroom.github.com/a/oPbjOmbk">Create Your Lab08 repo</a>
    <h3>Example:</h3>
    <p>Below is sample output, yours may differ slightly, but as long as it presents the information requested above you will receive full credit.</p>
    <p>Please list the directories first, alphabetically is not required.</p>
    <pre><code>$ make run
  Statistics for directory: .
  Total Diectory Size: 17766 Bytes
  Directories:
        .
        ..
        dir
        structRW
  Regular files:
        a.out
        error.log
        filelist
        files.c
        read.c
        ReadTest
        redirect.c
        redirect.c~
        redirect_full.c
        redirect_full.c~
        redirTest
        statfiles.c
        statfiles.c~
        write.c
        WriteTest
  </code></pre>

  <p><a href="#TOP">[back to top of page]</a></p>
  </div>

<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-11-04n">
  <h5>2024-11-04</h5>
  <h2>Input</h2>
  <h3>Command Line Arguments:</h3>
  <code>int main( int argc, char *argv[] )</code>
  <ul>
    <li>Program name is considered the first command line argument</li>
    <li> <code>argc</code> is the number of command line arguments</li>
    <li><code>argv</code> is the array of command line arguments as strings</li>
  </ul>

  <h3>stdin input</h3>
  <p> <code>fgets</code> is in <code>&ltstdio.h></code> </p>
  <ul>
    <li><code>fgets</code> will read in data from a file stream (I/O stream) and store it in a string. This is how we can read from <code>stdin</code>.</li>
    <li>
      <code>fgets( char * buffer, int n, FILE * f );</code>
      <ul>
        <li><code>FILE *</code> is the file stream type, more complex than a file descriptor, allows for buffered input.</li>
        <li>Reads at most n-1 characters from file stream f and stores it in s, appends NULL to the end.</li>
        <li>Stops at newline, end of file, or the byte limit.</li>
        <li>Returns a pointer to the buffer, or null if no bytes were read.</li>
        <li>stdin is a FILE * variable</li>
      </ul>
    </li>
    <li>Example: <code>fgets(s, 100, stdin)</code> </li>
  </ul>
  <h3>Other file streams</h3>
  The <code>fopen()</code> function is a higher level wrapper for the system call <code>open()</code> that returns a file stream. We can open files using <code> fopen()</code> to enable using <code>fgets()</code> on regular files.
  <ul>
    <li><code>fopen()</code> returns <code>FILE *</code> (a file stream) attached to the specified file/device. If the function fails, it returns a null pointer.</li>
    <li><code>fopen(char *path, char *mode)</code> path is the same as open, but mode is now a string, and it supports: "r", "w", "a", "w+" (read, write, append, write but the file must exist). More mode combinations can be found in the documentation. (see man 3 fopen) </li>
  </ul>



  <h3>Pulling data from strings</h3>
  <code>sscanf</code> in <code>&ltstdio.h></code>
  <ul>
    <li>Reads in data from a string using a format string to determine types.</li>
    <li><code>sscanf( char *s, char * format, void * var0, void * var1, ... )</code> </li>
    <li>Copies the data into each variable.</li>
    <li>
      <p>examples:</p>
    <pre><code>char* s = "103 1.23 0.042311234";
int x; float f; double d;
sscanf(s, "%d %f %lf", &x, &f, &d);
    </code></pre>

    <pre><code>char dtm[32];
strcpy( dtm, "Saturday March 25 1989" );
sscanf( dtm, "%s %s %d  %d", weekday, month, &day, &year );
printf("%s %d, %d = %s\n", month, day, year, weekday );</code> </pre>
    </li>
    </ul>

    <h2>Use your skills!</h2>
    <p>Write a program to help determine if triangles are valid.</p>
    <p>The program will either take user input or parses a file named '<code>input</code>' wtih the following file format : any plain text file with 3 integers on each line, that contains a multiple of 3 lines inside of it (but not 0).</p>
    <p>After compiling, when you run your program, there are 2 calculations to make.</p>
<p>Determine how many triangles are valid. We will assume that valid just means you can make a triangle with the given side lengths.</p>
<p><code>./a.out user</code> will read 3 ints from <code>stdin</code> and print either valid or invalid.</p>
<p><code>./a.out horizontal</code> will treat each line of input as a triangle, and print the total number of valid triangles  in the set.</p>
<p>(OPTIONAL CHALLENGE)<code>./a.out vertical</code> will treat each set of 3 lines as 3 vertically aligned triangles, and print the total number of valid triangles in the set. (This is more challenging but only because it gets ugly dealing with the 9 values in a 3 line set.)</p>
<p><code>./a.out</code> with no argumetns, or with invalid arguments will print directions.</p>
<p>Note that given:</p>
<pre>330  143  338
769  547   83
930  625  317</pre>
<p><code>horizontal</code> means the 1st triangle is <code>330 143 338</code> </p>
<p>CHALLENGE: <code>vertical</code> means the 1st triangle is <code>330 769 930</code></p>
<h4>Here is a larger test input:</h4>
    <pre>330  143  338
769  547   83
930  625  317
669  866  147
15  881  210
662   15   70
273  277  707
50  592  770
280  313  407
642  487  372
94  619  295
734  243  141
220  141  515
198  824  745
210  787  964
330  143  338
769  547   83
930  625  317
669  866  147
15  881  210
662   15   70
273  277  707
50  592  770
280  313  407
642  487  372
94  619  295
734  243  141
220  141  515
198  824  745
210  787  964</pre>





  <p><a href="#TOP">[back to top of page]</a></p>
</div>



<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-10-30n">
  <h5>2024-10-30</h5>
  <h3>Pclassic</h3>
  <p>PClassic's 2024 Fall competition is on Nov. 23, 2024. You can familiarize yourselves with the competition questions of previous years here : <a href="https://www.pclassic.org/problems">https://www.pclassic.org/problems</a> </p>
  <p>If you are interested you should make a team and practice solving the problems. You shoudl also actually practice together on a single computer if you are serious.</p>
  <p><a href="https://docs.google.com/document/d/10T0p5LjNASS48tAnAZO0Gj67IoQOyTB4A6BIir0sseQ">Information Document</a></p>

  <p>
    StuyCCC has compiled a document of relevant information, including important dates and how to sign up for the in-person trip:
  </p>
  <ul>
  <li>  <a href="https://forms.gle/fGEoeJiSERp39F8a9">Sign up form</a> (also on the document above)</li>
  <li>Don't forget to join our Discord server and Epsilon for further details:</li>
  <li><a href="https://discord.gg/Wd2FxeE">https://discord.gg/Wd2FxeE</a></li>
  <li><a href="https://epsilon.stuysu.org/stuyccc">  https://epsilon.stuysu.org/stuyccc</a></li>
</ul>

</div>


<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-10-28n">
  <h5>2024-10-28</h5>
  <h2 id="2024-10-28h">MyTunez™</h2>
  <h3>Logistics</h3>

  <h4>Partner</h4>
  <p>You may work with a partner on this assignment. They must be in the same class period as you.</p>
  <p>Working in a group requires the use of branching, see the tutorial here: <a href="index.html#gitbranch">Git Branching Tutorial</a></p>

  <h4>Repo</h4>
  <p>The github classrooms link works differently with groups. The first partner in a group should create a new team when accepting the assignment, then the 2nd person should join that team.</p>
  <p>Only join a team if the other person agreed, otherwise your teacher must manually change the teams.</p>



  <p> <strong>DO NOT JOIN UNTIL CLASS DISCUSSION</strong>
    assignment repo:
    <a href="https://classroom.github.com/a/osoZpCnK">https://classroom.github.com/a/osoZpCnK</a>
  </p>
  <p>Team name should be PERIOD-LastnameFirstInitial-LastName2FirstInitial2</p>
  <p>E.g. this group of 3 students in period 5: <code>5-WrightG-WongL-WongJ</code></p>
  <p>You can put a creative group name in your readme, e.g. <code>Two Wongs Don't Make A Wright</code> </p>

  <h2>Music Library Overview</h2>

  <p>Write a program in C that implements a music library organizer.</p>
  <p>This will consist of 2 data structures:</p>
  <ol>
    <li>A linked list of songs in <code>node.c/h</code>
      <ul>
          <li>Your nodes/links should be able to hold a song's title and artist. You should use structures like the following:</li>
            <pre>
              <code>struct song_node{
  char artist[100];
  char title[100];
  struct song_node *next;
};</code>
</pre>
      </ul>
    </li>
    <li>The actual library in <code>library.c/h</code>. This should be an array of 27 linked lists (one for each letter from 'a' to 'z', and another for symbols).
      <ul>
        <li>Each slot will contain a linked list of all the artists that have names that start with the corresponding letter.</li>
        <li>When you add a song, it should go on to a linked list at the appropriate array slot, and then determine the correct position alphabetically, first by artist, then by song. </li>
      </ul>
    </li>
    </ol>

    <h3>Linked List Part:</h3>
    <p>You should start by making your linked lists work with the following functionality:</p>
    <ol>
      <li>insert song at the front (this is just for testing)</li>
      <li>
        insert song in alphabetical order (this is the primary way to insert for later)
          <ul>
            <li>Alphabetical is by Artist then by Song, so all ACDC songs come before all of the Black Sabbath songs</li>
            <li>You must make a <code>int compare(struct song_node * a, struct song_node * b)</code> functions to easily compare song nodes effectively. These comparisons should be case <strong>INSENSITIVE</strong>, so:
                A &lt Abba &lt ACDC &lt Aerosmith. Abba and abba would be considered equal. You can make a lowercase version of the strings before you compare, or convert the numbers as you compare them. (anything from 97(a) to 122(z) inclusive is counted as 65(A) to 90(Z). )</li>
          </ul>
      </li>
      <li><code>void print_song_list(struct song_node *)</code> print the entire list, see format in examples.</li>
      <li>find and return a pointer to a node based on artist and song name</li>
      <li>find and return a pointer to the first song of an artist based on artist name</li>
      <li>Return a pointer to random element in the list.</li>
      <li>
        remove a single specified node from the list
        <ul>
          <li>specified by both artist and song name.</li>
        </ul>
      </li>
      <li>free the entire list, anything that was malloc'ed must be freed</li>
    </ol>


    <h3>Library Part</h3>
    <h4>DO NOT WORK ON THIS PART UNTIL YOUR LINKED LIST IS COMPLETE</h4>
    <p>Then create your array of linked lists (suggested type: struct song_node ** for the full program to have the following functions:</p>
    <ol>
      <li><code>struct song_node ** init();</code>
        initialize a new library: Allocate enough memory for 27 linked lists, make sure each entry is an empty list.</li>
      <li><code>void add(struct song_node ** library, char* artist, char* title)</code>
        Add song alphabetically to the correct slot in the library.</li>
      <li><code>struct song_node * search_song(struct song_node ** library, char* artist, char* title )</code>
        Search for a song given song title and artist (return a pointer, or NULL if it isn't found).</li>
      <li><code>struct song_node * search_artist(struct song_node ** library, char* artist )</code>
        Search for the first song that is by the provided artist (return a pointer, or NULL if it isn't found).</li>
      <li><code>print_letter(struct song_node ** library, char letter)</code>
         Print out all the entries under a certain letter. The letter var shoudl use capital 'A' through'Z', or '0' for non-letter artists.</li>
      <li><code>print_artist(struct song_node ** library, char* artist)</code>
        Print out all the songs of a the provided artist, use the same format as a print_song_list. This may print nothing if no matching artist is found.</li>
      <li><code>print_library(struct song_node ** library)</code>
        Print out the entire library , see format in examples.</li>
      <li><code>void shuffle (struct song_node ** library, int n)</code>
        Shuffle - <strong>prints</strong> out a series of <code>n</code> randomly chosen songs. (can have duplicates) Please make sure the distribution of random is equal per song. If you have 100 ABBA songs, and 2 Beoncé songs, the ABBA songs should print 50x more frequently than Beoncé. </li>
      <li><code>int delete_song(struct song_node ** library, char* artist, char* title )</code>
        Delete a song from the library, make sure the memory is free'd.
        <ul>
          <li>specified by both artist and song name.</li>
          <li>Return 0 if the song was deleted, 1 if the song was not found.</li>
        </ul>
      </li>
      <li><code>void reset(struct song_node ** library) </code>
         Clear out all the linked lists in the library. This must free() all memory malloc'ed. (Originally it had an int return, that was an error.)</li>
    </ol>

    <h3>Putting it all together</h3>
    <p>Files you should have:</p>
    <ol>
      <li>
          A .c file that contains the main function you use to test all your work. You must test all the functions in your main function in order to receive full credit!!!
      </li>
      <li>
        Two sets of .h/.c files. There are 2 separate structures being worked on, the linked list <em>(node.c/h)</em> and the library <em>(library.c/h)</em>.
      </li>
      <li>A makefile with a (default) compile target that generates a single executable program, as well as a run target.</li>
    </ol>
    <h3>Example testing</h3>
    <pre><code>LINKED LIST TESTS
====================================

Testing print_list:
	[ {ac/dc, thunderstruck} | {pearl jam, alive} | {pearl jam, even flow} | {pearl jam, yellow ledbetter} | {pink floyd, time} | {radiohead, paranoid android} | {radiohead, street spirit (fade out)} | ]
====================================

Testing print_node:
	{ac/dc, thunderstruck}
====================================

Testing find_node:
looking for [pearl jam: even flow]
	node found! {pearl jam, even flow}
looking for [pearl jam: daughter]
	node not found
====================================

Testing find_artist:
looking for [pink floyd]
	artist found! [ {pink floyd, time} | {radiohead, paranoid android} | {radiohead, street spirit (fade out)} | ]
looking for [pearl jam]
	artist found! [ {pearl jam, alive} | {pearl jam, even flow} | {pearl jam, yellow ledbetter} | {pink floyd, time} | {radiohead, paranoid android} | {radiohead, street spirit (fade out)} | ]
looking for [presidents of the united states of america]
	artist not found
====================================

Testing songcmp (helper function):
Comparing [pearl jam: even flow] to [pearl jam: even flow]
	0
Comparing [pearl jam: even flow] to [pearl jam: alive]
	4
Comparing [pearl jam: alive] to [pearl jam: even flow]
	-4
Comparing [pearl jam: even flow] to [pink floyd: time]
	-4
====================================

Testing random:
{pink floyd, time}
{radiohead, paranoid android}
{radiohead, street spirit (fade out)}
{pearl jam, alive}
====================================

Testing remove:
Removing [ac/dc: thunderstruck]
	[ {pearl jam, alive} | {pearl jam, even flow} | {pearl jam, yellow ledbetter} | {pink floyd, time} | {radiohead, paranoid android} | {radiohead, street spirit (fade out)} ]
Removing [radiohead: street spirit (fade out)]
	[ {pearl jam, alive} | {pearl jam, even flow} | {pearl jam, yellow ledbetter} | {pink floyd, time} | {radiohead, paranoid android} ]
Removing [pearl jam: yellow ledbetter]
	[ {pearl jam, alive} | {pearl jam, even flow} | {pink floyd, time} | {radiohead, paranoid android} ]
Removing [pearl jam: yellow ledbetter]
	{pearl jam: yellow ledbetter} not found
[ {pearl jam, alive} | {pearl jam, even flow} | {pink floyd, time} | {radiohead, paranoid android} ]
====================================

Testing free_list
	freeing_node: {pearl jam, alive}
	freeing_node: {pearl jam, even flow}
	freeing_node: {pink floyd, time}
	freeing_node: {radiohead, paranoid android}
list after free_list:
[ ]
====================================

MUSIC LIBRARY TESTS
====================================

Testing print_letter
[ ]
====================================

Testing print_library
====================================

Testing print_letter
[ {pearl jam, alive} | {pearl jam, even flow} | {pearl jam, yellow ledbetter} | {pink floyd, time} | {presidents of the united states of america, peaches} ]
====================================

Testing print_library
a: [ {ac/dc, thunderstruck} ]
p: [ {pearl jam, alive} | {pearl jam, even flow} | {pearl jam, yellow ledbetter} | {pink floyd, time} | {presidents of the united states of america, peaches} ]
r: [ {radiohead, paranoid android} | {radiohead, street spirit (fade out)} ]
====================================

Testing find:
looking for [pearl jam: alive]
	song found! {pearl jam, alive}
looking for [pearl jam: time]
	song not found
====================================

Testing find artist:
looking for [pearl jam]
	artist found! [ {pearl jam, alive} | {pearl jam, even flow} | {pearl jam, yellow ledbetter} | {pink floyd, time} | {presidents of the united states of america, peaches} ]
looking for [pink floyd]
	artist found! [ {pink floyd, time} | {presidents of the united states of america, peaches} ]
looking for [bob dylan]
	artist not found
====================================

Testing remove_song
removing: [pearl jam: alive]
a: [ {ac/dc, thunderstruck} ]
p: [ {pearl jam, even flow} | {pearl jam, yellow ledbetter} | {pink floyd, time} | {presidents of the united states of america, peaches} ]
r: [ {radiohead, paranoid android} | {radiohead, street spirit (fade out)} | ]

removing: [pearl jam: yellow ledbetter]
a: [ {ac/dc, thunderstruck} ]
p: [ {pearl jam, even flow} | {pink floyd, time} | {presidents of the united states of america, peaches} ]
r: [ {radiohead, paranoid android} | {radiohead, street spirit (fade out)} ]
====================================

Testing clear_library:
	freeing_node: {ac/dc, thunderstruck}
	freeing_node: {pearl jam, even flow}
	freeing_node: {pink floyd, time}
	freeing_node: {presidents of the united states of america, peaches}
	freeing_node: {radiohead, paranoid android}
	freeing_node: {radiohead, street spirit (fade out)}

Library after clear:
====================================

Adding songs to empty library
a: [ {ac/dc, thunderstruck} ]
p: [ {pearl jam, alive} | {pearl jam, even flow} | {pearl jam, yellow ledbetter} | {pink floyd, time} ]
====================================

Testing print_artist:
Printing [pearl jam]
pearl jam: [ {pearl jam, alive} | {pearl jam, even flow} | {pearl jam, yellow ledbetter} ]

Printing [ac/dc]
ac/dc: [ {ac/dc, thunderstruck} ]
====================================


Printing [radiohead]
radiohead:
====================================

Testing shuffle
{pink floyd, time}
{pearl jam, yellow ledbetter}
{pearl jam, alive}
====================================</code> </pre>
  </ol>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-10-23n">
  <h2>Pair Project:</h2>
  <p>Choose a partner for the first project (music playlist manager using linked lists)</p>
  <p>We will start the project on Monday.</p>
  <p>You should check if both you and your partner know how to handle:</p>
  <ol>
    <li>Branching.</li>
    <li>Merging.</li>
    <li>Merge conflicts.</li>
  </ol>

  <h2>/dev/random</h2>
  <p>Your computer measures temperatures and voltages and generates an 'entropy pool' to create truly random numbers.</p>
  <p>You can read bytes from <code>/dev/random</code> to return random bytes from the 'entropy pool'. </p>
  <p>When the entropy pool is empty (you read too many values), reads from /dev/random will block until additional environmental noise is gathered.</p>
  <p><code>/dev/random </code> is be suitable for uses that need very high quality randomness such as one-time pad or key generation.</p>
  <h2>/dev/urandom</h2>
  <p>When you do NOT need totally cryptographically secure values, or you cannot have your program block we read from <code>/dev/urandom</code> </p>
  <p>A read from the <code>/dev/urandom</code> device will not block waiting for more entropy. As a result, if there is not sufficient entropy in the entropy pool, the returned values a</p>


  <h2>Lab07-Files</h2>
  <h4>dev[ise a]/random plan</h4>
  <p>Check the File Functions section of the notes page for reference.</p>
  <p>Repo Link: <a href="https://classroom.github.com/a/aQupXEVS">
    https://classroom.github.com/a/aQupXEVS</a> </p>

  <h3>Read or write</h3>
  <p>Your goal for this lab is to create a program that can either write to or read from a file. You can do this by using command line arguments or making two separate main programs. You would need to look up command line parsing in c, so making 2 main programs is acceptable.</p>
  <p>Your makefile will have 2 run targets. If you have 2 main files, your compile target can compile both at the same time.</p>
  <h3>Requirements</h3>
  <ul>
    <li>
      <p>A function that generates and returns a random int by reading in the correct number of bytes from <code>/dev/random</code> . Please note that this is a file for purposes of reading. This should be in a separate c/h library!</p>

    </li>
    <li>
      <p>A main function (or two) that can either WRITE values to a file, or READ values from a file.</p>
      <p><strong>make write</strong> </p>
      <ol>
        <li>Declare two int variables and an int array of size 8</li>
        <li>
          <p>Populate the two variables and an array with random numbers generated by your random function. </p>
          <p>If your program seems to stall at this step, it's possible that your computer doesn't have enough entropy and is waiting, you can read from /dev/urandom instead.</p>
        </li>
        <li>
          Prints out the contents of the two variables and array.
          <ul>
            <li>Write the two variables to the file.</li>
            <li>After testing the two variables, also write the array to a file called <code>arraydata.dat</code>. Just use a single write command (DO NOT use a loop).</li>
          </ul>
        </li>
      </ol>
      <p><p><strong>make read</strong> </p></p>
      <ol>
        <li>Declare two int variables and an int array of size 8</li>
        <li>
          Reads the data from the file into your program.
          <ul>
            <li>Read the two random values from the file into two new variables.</li>
            <li>Read the whole array from the file into a different array using a single read command. (DO NOT use a loop!)</li>
          </ul>
        </li>
        <li>Prints the contents of the two variables/array.</li>
      </ol>
      <p><strong>Urgent:</strong> This program should work if there isn't already a <code>arraydata.dat</code>,
        so it should be able to create the file when it doesn't exist. I will be <code>rm -f arraydata.dat</code> in my grading script, so I know your code works when the file isn't already created.</p>
    </li>

  </ul>

  <p>Remember to use good practices, like checking return values for errors</p>
  <p>Also remember to include a makefile that includes separate <code>compile</code> + <code>read</code> + <code>write</code> targets</p>

  <h3>Sample output (yours will vary)</h3>
  <pre><code>make write
    Generating random numbers:
    x : 12875823
    y : 40258233
    ary[0]: 198116400
    ary[1]: 259268753
    ary[2]: 283364368
    ary[3]: 327370590
    ary[4]: 354867368
    ary[5]: 387688898
    ary[6]: 261733183
    ary[7]: 172096907
  Writing numbers to file...</code></pre>
  <pre><code>make read
  Reading numbers from file...
    x : 12875823
    y : 40258233
    ary[0]: 198116400
    ary[1]: 259268753
    ary[2]: 283364368
    ary[3]: 327370590
    ary[4]: 354867368
    ary[5]: 387688898
    ary[6]: 261733183
    ary[7]: 172096907</code></pre>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-10-22n">
  <h5>2024-10-22</h5>
  <h3>Demo Code To Be Discussed:</h3>
  <pre class="codeblock"><code>#include &lt;stdio.h>
#include &lt;stdlib.h>
#include &lt;fcntl.h>
#include &lt;unistd.h>
#include &lt;string.h>
#include &lt;sys/stat.h>
#include &lt;errno.h>
#include &lt;time.h>
#include &lt;sys/types.h>
#include &lt;dirent.h>
int err(){
    printf("errno %d\n",errno);
    printf("%s\n",strerror(errno));
    exit(1);
}

#define BUFFER_SIZE 128

int main(){
  int r_file,w_file;
  char buff[BUFFER_SIZE+1];
  buff[BUFFER_SIZE]=0; // for printf purposes.

  /////////////////////////////////////
  //Fail to open:
  //Either don't have the file, or grant no read access
  r_file = open("./cantouchthis", O_RDONLY , 0);
  printf("open(./canttouchthis) : %s\n",strerror(errno));

  ////////////////////////////////////
  //Open for read
  r_file = open("./text.book", O_RDONLY , 0);
  if(r_file == -1) err();
  printf("r_file: %u\n",r_file);

  ////////////////////////////////////
  //Open for write
  w_file = open("./copy",
      O_WRONLY | O_APPEND | O_CREAT, 0611);
  if(w_file==-1)err();
  printf("w_file: %u\n",w_file);


  ////////////////////////////////////////
  //READ and WRITE
  int bytes;
  //putting the assignment in the while boolean
  //eliminates the need to check for 0 bytes read
  while(bytes = read(r_file, buff, BUFFER_SIZE)){
    if(bytes == -1)err();//all non 0 are true

    printf("Bytes read: %u",bytes);
    printf("'''%s'''\n",buff);

    //write the bytes
    int wbytes = write(w_file , buff, bytes);
    if(wbytes == -1)err();;


  }


  /////////////////////////////
  //WRITE NUMBERS!
  int x = 97;
  //write the 4 bytes of the int, 97,0,0, and 0.
  write(w_file,&x,4);

  x= 65+25;//Z
  //Write the 1st byte of x (least significant)
  write(w_file,&x,1);

  double y = 1234.5678;
  //Write a double... this will end poorly.
  write(w_file,&y,8);//write a double

  ///////////////////////////////////////
  //STAT!
  struct stat * stat_buffer;
  struct stat s_buff;//not used in the example

  //malloc sizeof the struct, not the pointer!
  stat_buffer = malloc(sizeof(struct stat)*1);

  stat( "./copy", stat_buffer);//or use &s_buff
  printf("size: %ld \n", stat_buffer->st_size);
  printf("mode : %o \n", stat_buffer->st_mode);

  time_t t = stat_buffer->st_mtime;
  printf("%s\n",ctime(&t));
  free(stat_buffer);


  //////////////////////////////////////
  //DIRENT
  DIR * d;
  char* PATH = ".";
  d = opendir( PATH );
  struct dirent *entry;

  //Can use as a while boolean
  //since null is the end of the dirent list.
  while(entry = readdir( d )){
    printf("filename: %s\n",entry->d_name);
    printf("--type: %d\n",entry->d_type);
    //You can use the PATH + filename to get stat data!
  }
  closedir(d);
}</code></pre>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-10-21n">
  <h5>2024-10-21</h5>
  <h3 id="file-functions">File functions</h3>
  <code>open - &lt;fcntl.h&gt;</code>
  <ul>
    <li>Add a file to the file table and returns its file descriptor.</li>
    <li>This will make the file accessible within a program via the returned file descriptor.</li>
    <li>If open fails, -1 is returned, extra error information can be found in <code>errno</code>.
      <ul>
        <li><code>errno</code> is an int variable that can be found in <code>&lt;errno.h&gt;</code></li>
        <li>Use <code>strerror</code> (in <code>string.h</code>) on errno to return a string description of the error</li>
      </ul>
    </li>
    <li><code>open( path, flags, mode )</code>
      <ul>
        <li><code>mode</code>
          <ul>
            <li>Only used when creating a file. Set the new file's permissions using a 3 digit octal #</li>
          </ul>
        </li>
        <li><code>flags</code>
          <ul>
            <li>Determine what you plan to do with the file, use the following constants and combine with <code>|</code>:</li>
            <li><code>O_RDONLY</code></li>
            <li><code>O_WRONLY</code></li>
            <li><code>O_RDWR</code></li>
            <li><code>O_APPEND</code></li>
            <li><code>O_TRUNC</code></li>
            <li><code>O_CREAT</code></li>
            <li><code>O_EXCL</code>: when combined with <code>O_CREAT</code>, will return an error if the file exists</li>
          </ul>
        </li>
        <li>examples:
          <ul>
            <li><code>open(foo.txt, O_RDONLY, 0)</code></li>
            <li><code>open(goo.txt, O_WRONLY | O_APPEND | O_CREAT, 0644)</code></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
  <code>read - &lt;unistd.h&gt;</code>
  <ul>
    <li>Read data from a file</li>
    <li><code>read( fd, buff, n )</code>
      <ul>
        <li>Read <code>n</code> bytes from <code>fd</code>'s file into <code>buff</code></li>
        <li>Returns the number of bytes actually read. Returns -1 and sets <code>errno</code>	if unsuccessful.</li>
        <li><code>buff</code> must be a memory address (pointer or array), but can be to any type of data.</li>
      </ul>
    </li>
  </ul>
  <code>write - &lt;unistd.h&gt;</code>
  <ul>
    <li>Write data to a file</li>
    <li><code>write( fd, buff, n )</code>
      <ul>
        <li>Write <code>n</code> bytes to the <code>fd</code>'s file from <code>buff</code></li>
        <li>Returns the number of bytes actually written. Returns -1 and sets <code>errno</code>	if unsuccessful.</li>
        <li><code>buff</code> must be a memory address (pointer or array), but can be to any type of data.</li>
        <li><code>lseek - &lt;unistd.h&gt;</code>
          <ul>
            <li>Set the current position in an open file</li>
            <li><code>lseek( file_descriptor, offset, whence )</code>
              <ul>
                <li><code>offset</code>
                  <ul>
                    <li>Number of bytes to move the position by, Can be negative.</li>
                  </ul>
                </li>
                <li><code>whence</code>
                  <ul>
                    <li>Where to measure the offset from</li>
                    <li><code>SEEK_SET</code>: offset is evaluated from the beginning of the file</li>
                    <li><code>SEEK_CUR</code>: offset is relative to the current position in the file</li>
                    <li><code>SEEK_END</code>: offset is evaluated from the end of the file</li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>Returns the number of bytes the current position is from the beginning of the file, or -1 (<code>errno</code>)</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
  <code>stat - &lt;sys/stat.h&gt;	</code>
  <ul>
    <li>Get information about a file (metadata)</li>
    <li><code>stat( path, stat_buffer )</code>
      <ul>
        <li><code>stat_buffer</code>
          <ul>
            <li>Must be a pointer to a <code>struct stat</code></li>
            <li>All the file information gets put into the stat buffer.</li>
            <li>Some of the fields in struct stat:
              <ul>
                <li><code>st_size</code>: file size in bytes</li>
                <li><code>st_uid, st_gid</code>: user id, group id</li>
                <li><code>st_mode</code>: file permissions</li>
                <li><code>st_atime, st_mtime</code>: last access, last modification
                  <ul>
                    <li>These are <code>time_t</code> variables. We can use functions in <code>time.h</code> to make sense of them</li>
                    <li><code>ctime( time )</code>
                      <ul>
                        <li>Returns the time as a string</li>
                        <li><code>time</code> is type <code>time_t *</code></li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>

  <code>opendir - &lt;dirent.h&gt;</code>
  <ul>
    <li>Open a directory file</li>
    <li>This will not change the current working directory (cwd), it only allows your program to read the contents of the directory file</li>
    <li><code>opendir( path )</code>
      <ul>
        <li>Returns a pointer to a directory stream (<code>DIR *</code>)</li>
      </ul>
    </li>
    <li><code>closedir - &lt;dirent.h&gt;</code>
      <ul>
        <li>Closes the directory stream and frees the pointer associated with it.</li>
        <li><code>closedir( dir_stream )</code></li>
      </ul>
    </li>
    <li><code>readdir - &lt;dirent.h&gt;</code>
      <ul>
        <li><code>readdir( dir_stream )</code></li>
        <li>Returns a pointer to the next entry in a directory stream, or <code>NULL</code> if all entries have already been returned.</li>
      </ul>
    </li>
    <li><code>struct dirent - &lt;sys/types.h&gt;</code>
      <ul>
        <li>Directory struct that contains the information stored in a directory file. Some of the data members</li>
        <li><code>d_name</code>: Name of a file</li>
        <li><code>d_type</code>: File type as an int</li>
        <li>Use <code>man readdir</code> to list the different components.</li>
        <li>
          Example usage:
          <pre><code>DIR * d;
d = opendir( "somedir" );
struct dirent *entry;
entry = readdir( d );
closedir(d);</code></pre>
        </li>
      </ul>
    </li>

    <li><code>rewinddir - &lt;dirent.h&gt;</code>
      <ul>
        <li><code>rewinddir(d)</code>
          <ul>
            <li><code>d</code> must be a <code>DIR *</code> returned from <code>opendir</code></li>
            <li>Resets the directory stream of <code>d</code> to the beginning.</li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-10-18n">
  <h3  id="2024-10-18h">Lab06-structs is really linked-lists</h3>
  <h4> Due: Monday 10/21 8:00 am</h4>

  <h4>New Things to add to the lab</h4>
  <p>Write a simple linked list library + program.</p>
  <ul>
    <li>Your labs should always be compileable via <code>compile</code> and <code>run</code> targets of your makefile</li>
    <li>Rename your  <code>myStruct.c/.h</code>  from the previous instructions to <code>node.c/.h</code> </li>
    <li>Change your struct name to <code>struct node</code></li>
    <li>Add a new element to the struct: A pointer to a struct of the same type (the next node).</li>
    <li>Write several list functions outlined below. They should be in a <code>list.c/.h</code> library. You must have a separate c file used for your main function and testing.</li>
    <li>Your main should print a series of tests for these various functions. This should be enough to convince yourself (and me) that the functions work correctly*. I would advise you to test removing first, last and middle elements, multiple times in case one of these cases breaks future functionality. </li>
    <li>*Correctly does not include: warnings or segementation faults.</li>
  </ul>



  <p>Here's an example of how a struct could have a pointer to the same type inside of it:</p>
  <pre class="codeblock"><code>struct user_node {
  int id;
  char name[200];
  struct user_node *next;
  };</code></pre>


  <h3>Teacher Testing</h3>
  <p>I will create a driver main program, that includes your <code>list.h</code>  and <code>node.h</code> then uses the functions. If this does not work, you will not recieve credit.</p>


  <h3>Create the following functions:</h3>
  <ol>


    <li><code>void print_list(struct node * list)</code>
      <ul>
        <li>Should take a pointer to a node struct and print out all of the data in the list, one element per newline.
          Prefix each line with the index of the element e.g.</p>
        <pre class="codeblock">[0]Star Wars: Episode IV - A New Hope (1977) 8.6
[1]Alien (1979) 8.5
[2]The Matrix (1999) 8.7
[3]Inception (2010) 8.8
[4]Interstellar (2014) 8.7</pre> </li>
      <li>You should call your print() function from your node class. Modify it a little so that the formatting is the same as the example:  <code>"The Matrix (1999) 8.7"</code> or  <code>"TITLE (YEAR) SCORE"</code> with spaces between them.</li>
      </ul>

    </li>


    <li><code>struct node * insert_front(struct node * list, char* title, int year, double rating)</code>
      <ul>
        <li>Should take a pointer to the existing list and create a new node and put it at the beginning of the list.</li>
        <li>The second argument will be an char* that contains a string that should be copied into your node.</li>
        <li>The numerical parameters should also be copied into your node.</li>
        <li>Returns a pointer to the beginning of the list.</li>
      </ul>
    </li>



    <li><code>struct node * free_list(struct node * list)</code>
      <ul>
        <li>Should take a pointer to a list as a parameter and then go through the entire list freeing each node and return a pointer to the beginning of the list (which should be NULL by then).</li>
      </ul>
    </li>


    <li><code>struct node * remove_node_by_index(struct node * list, int index)</code>
      <ul>
        <li>Remove the node in the index position, from the list pointed to by <code>front</code>. Assume this list starts at index zero.</li>
        <li>A node that is removed must be free'd</li>
        <li>If <code>index</code> is negative or <code>index >=</code> the length of the list, nothing is changed. (This includes when the list is empty)</li>
        <li>Returns a pointer to the beginning of the list.</li>
      </ul>
    </li>
  </ol>
  <h3>Sample Usage</h3>
  <pre><code>struct node * movies = NULL;
movies = insert_front(movies, "Pulp Fiction", 1994, 9.0);
movies = insert_front(movies, "Battlefield Earth", 2000, 2.5);
print_list(movies);
movies = free_list(movies);</code></pre>
  <p>You should recognize that functions that return a pointer to the beginning of the list should be assigned to the list, like insert, or even free!</p>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------CONTENT BLOCK--------------------------------------------------- -->
<div class="contentBlock" id="2024-10-16n">
  <h5>2024-10-16</h5>
  <h3>Struct lab</h3>
  <p>This is a small part of the lab that doesn't need that much time. (It is intended to be rather basic,
    if you have trouble let me know.)</p>
  <p>Due: Tomorrow 10/17 In class! (Just this much, you will expand on it in class this is just the basics.</p>
  <h2 id="2024-10-16h">lab06</h2>
  <p>GitHub Submission Link: <a href="https://classroom.github.com/a/nlVP82jI">https://classroom.github.com/a/nlVP82jI</a> </p>
  <ol>
    <li>Create a makefile with compile and run targets.</li>
    <li>Create a <code>mystruct.c</code> and <code>mystruct.h</code> file for your struct methods, and a separate <code>main.c</code> file for your main. (This should be default style behavior for all of your projects).</li>
    <li>Create a <code>struct movie</code> that has 3 data members, int, float, and a string.
      (Use a char[] NOT char* for this string.)
    </li>
    <li>Let us put in Strings that are the names of movies. The int can be the year released, double can be the average rating of that movie out of 10.</li>
    <li>Write a function that print(struct movie m) that prints your struct in a single line.</li>
    <li>Write a function that createmovie(...) creates a new struct in heap memory and returns its address. It should have paramaters appropriate to your struct.</li>
    <li>
      Write your main function that:
      <ul>
        <li>Create an array of 4 pointers to your struct.</li>
        <li>Populate it with randomized data using your creating method.</li>
        <li>Print your data in a reasonable way (one element per line)</li>
      </ul>
    </li>

 </ol>
 <p>hint: You may need to make an array of strings so you can choose one randomly see note below.</p>

  <pre class="codeblock"><code>char arr[3][10] = {"abc", "abcd", "abcde"};
printf("String array Elements are:\n");
for (int i = 0; i < 3; i++)
{
  printf("%s\n", arr[i]);
}</code></pre>
  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK--------------------------------------------------- -->
<div class="contentBlock" id="2024-10-15n">
  <h5>2024-10-15</h5>





  <h2>Results of Sieve</h2>

  <p>Here are the top 3 student times relative to mine:</p>

  <table>

  <tr>  <th>Name</th>  <th>Time</th>  <th>% of K</th>       </tr>
  <tr><td><strong>09.Chen.Matthew</strong> </td><td>1.73</td>	<td>.81</td></tr>
  <tr><td><strong>10,Yu.Kellen</strong> </td>	<td>1.9</td>	<td>.89</td></tr>
  <tr><td>K </td>	<td>2.12</td>	<td>1</td></tr>
  <tr><td>09.Liang.Edmund </td>	<td>2.5</td>	<td>1.17</td></tr>
  <tr><td>10.Chen.Alan</td>	<td>3.09</td>	<td>1.45</td></tr>
  <tr><td>09.Goihman.Benjamin</td>	<td>3.125</td>	<td>1.47</td></tr>
  <tr><td>09.Hasan.Tanzeem</td>	<td>3.189</td>	<td>1.50</td></tr>
</tr>
</table>


  <p>Compared to 2023's top 3 students:</p>
  <table>

  <tr>  <th>Name</th>  <th>Time</th>  <th>% of K</th>       </tr>
  <tr><td><strong>K</strong> </td>	<td>0.185</td>	<td>1</td></tr>
  <tr><td><strong>10.rahman.naowal/</strong> </td>	<td>0.209</td>	<td>1.13</td></tr>
  <tr><td>08.li.andrew/</td>	<td>0.332</td>	<td>1.79</td></tr>
  <tr><td>09.winer.charlie/</td>	<td>0.333</td>	<td>1.8</td></tr>
</tr>
</table>

<p>Compared to the 2022's top 4 students:</p>
<table>
  <tr>  <th>Name</th>  <th>Time</th>  <th>% of K</th>       </tr>
  <tr>	<td><strong>3.dewan.zawad</strong>   </td>	<td>0.532</td>	<td>0.89</td>	</tr>
  <tr>	<td><strong>K</strong></td>	<td>0.599</td>	<td>1</td>	</tr>
  <tr>	<td>hughes.vernon</td>	<td>0.686</td>	<td>1.15</td>	</tr>
  <tr>	<td>eisenberg.lee</td>	<td>0.701</td>	<td>1.17</td>	</tr>
  <tr>	<td>paltrowitz.jacob</td>	<td>0.706</td>	<td>1.18</td>	</tr>
  </table>


  <h2>C can do some funky things:</h2>
  <p>If your strcpy looks like this:</p>
  <pre class="codeblock"><code>char* mystrcpy(char* d, char* s){
  char* orig = dest;
  while(*src){
    *dest=*src;
    dest++;
    src++;
  }
  *dest=*src;
  return orig;
}</code></pre>
  <p>Consider instead how this would work:</p>
  <pre class="codeblock"><code>char* mystrcpy(char* d, char* s){
  char* orig = d;
  while(*d++ = *s++);
  return orig;
}</code></pre>

  <p>Or the ghastly:</p>
  <pre class="codeblock"><code>char* mystrcpy(char* d, char* s){
	return (*d=*s) ? mystrcpy(d+1,s+1) - 1 : d;
}</code></pre>

  <h2>struct</h2>
  <p>A <code>struct</code> is a custom data type that is a collection of values.</p>

  <h3>Declaring</h3>
  <p>
  The following line creates a variable, <code>s</code>, who's type is an anonymous struct:</p>
  <pre class="codeblock"><code>struct { int a; char x; } s;</code></pre>

  <p>
  <code>struct { int a; char x; }</code> is the full type of <code>s</code>,
  it is syntactically identical to <code>int</code> or <code>float</code>
  </p>
  <h3>Utilization</h3>
  <p>We use the <code>.</code> operator to access a value inside a struct</p>
  <p><code>s.a = 10;</code></p>
  <p><code>s.x = '@';</code></p>
  <p>Here is an example of creating and using a struct:</p>
  <pre class="codeblock"><code> int main() {
  struct {int a; char x;} s0;

  s0.a = 51;
  s0.x = '%';

  printf("s0: %d\t%c\n", s0.a, s0.x);

  return 0;
}
</code></pre>
  <h3>Creating prototypes</h3>
  <p>It is preferable to <strong>prototype</strong> your structs, which will make it easier to create and work with multiple variables of the same struct type.
    <ul>
      <li><code>struct foo { int a; char x; };</code></li>
      <li>Note that since we are not creating a variable, there is no name between the <code>}</code> and the <code>;</code> at the end.</li>
    </ul>
  </p>
  <p>After creating a prototye for a struct, you can declare new variables of that type like so:
    <ul>
      <li><code>struct foo s;</code></li>
      <li>You still must include the word <code>struct</code>.</li>
    </ul>
  </p>
  <p>It is typically better practice to prototype structs outside of any particular function.
    <ul>
      <li>Struct prototypes are most commonly found in .h files.</li>
    </ul>
  </p>
  <h3>Example</h3>
  <p>Here is an example of creating and using a struct with a prototype:
    <pre class="codeblock"><code>struct foo {int a; char x;};
int main() {
   struct foo s0;
   struct foo s1;

   s0.a = 51;
   s0.x = '%';

   s1 = s0;
   printf("s0: %d\t%c\n", s0.a, s0.x);
   printf("s1: %d\t%c\n", s1.a, s1.x);

   return 0;
}
</code></pre>
  </p>
  <h3>Pointers and Structs</h3>

  <p>You can make pointers to structs like pointers to primitaves.</p>
  <p><code>struct foo *p = &amp;s;</code></p>

  <p><strong>DANGER!</strong></p>
  <p>One very important note, <code>.</code> takes precedence over <code>*</code>.</li>
  <p>
    This means that <code>*p.x</code> is the same as <code>*(p.x)</code>
    which is almost certainly <strong>NOT</strong> what you want. (This will look for x inside p and de-reference that result).
  </p>
  <p>To access a value in a struct via a pointer you need to do: <code>(*p).x</code>, that is, de-reference first, then get x.</p>

  <h3>Shortcut:</h3>
  <p>In C, <code>p-&gt;x</code> is syntactic shorthand for <code>(*p).x</code></p>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK--------------------------------------------------- -->

<div class="contentBlock" id="2024-10-10n">
  <h5>2024-10-10</h5>
  <h2 id="2024-10-10h"> Lab05</h2>
  <h5>Deadline October 16th 8am</h5>
  <p>You will have 3 lab days + homework time for this lab.</p>
  <p>First, acquaint yourself with the basic string functions: strlen, strcpy, strcat, strncat and strncpy. You can look at the man pages for each if you are unclear as to their uses. I encourage you to play around with each so you are comfortable with how to use them.</p>
  <p>Then write your own versions of the following:</p>

  <ol>
    <li>strlen: <code>int mystrlen( char *s ) </code> </li>
    <li>strcpy/strncpy: <code>char * mystrcpy( char *dest, char *source )</code>
                                 and <code>char * mystrncpy( char *dest, char *source, int n)</code> </li>
    <li>strcat/strncat: <code>char * mystrcat( char *dest, char *source )</code>
                                 and <code> char * mystrncat( char *dest, char *source, int n)</code> ]</li>
    <li>strcmp: <code> int mystrcmp( char *s1, char *s2 )</code>.
      Your version does not need to return the same exact value as the system version, as long as it returns -, + or 0 when it should. </li>
    <li>strchr: <code>char * mystrchr( char *s, char c )</code> </li>
  </ol>
  <p> <strong>Required</strong> use the function headers provided above, they may differ from the standard headers.</p>

  <p>You must test every function you write, you will not get full credit for an untested functions.</p>
  <p>Your program should consist of:</p>
  <ol>
    <li>the <code>main.c</code> file that I have prepared for you, available in the github classroom lab05 repo</li>
    <li>a <code>mystring.c</code> <code>mystring.h</code> pair of files for your string functions.</li>
    <li>a makefile with a compile target as the default, and a run target.</li>
  </ol>
  <p>When you test your functions, run them alongside the regular ones so you can see if they behave the same way or not. Remember you should call them my+originalName.</p>
  <p>You must look at documentation to determine the behavior of the functions, in particular the n vs non-n versions!</p>
  <h3>Use this repository for the work:</h3>
  <a href="https://classroom.github.com/a/MMknZczF">
    https://classroom.github.com/a/MMknZczF
  </a>

  <h3>When you are done, you should look at the following two functions:</h3>
  <p>1. strstr : returns a pointer to the first index of a specified substring in another string. </p>
  <p><code>char * mystrstr( char *s1, char * s2 )</code> </p></p>

  <p>2. mysplit</p>
  <p>
     <code>char * mysplit(char *s, char d)</code>
    This is not quite a built in string function, but similar to strsep.
    This function should go through s, replacing one instance of c with
    a NULL byte. It returns a pointer to the byte after the null </p>
  <p>Why is this useful? How can it be used?</p>
  <p>Attempt to write these functions. </p>



  <h3>Here's an example of what your code might look like when run:</h3>
  <pre>start strings:
s1: []
s2: [hello]
s3: [goodbye]

Testing strlen(s1):
[standard]:     0
[mine]:         0

Testing strlen(s2):
[standard]:     5
[mine]:         5

Testing strcpy(s1, s2):
[standard]:     [hello]
[mine]:         [hello]

Testing strncpy(s1, s3, 3):
[standard]:     [goo______________________________________________]
[mine]:         [goo______________________________________________]

Testing strcat(s1, s3):
[standard]:     [hellogoodbye]
[mine]:         [hellogoodbye]

Testing strncat(s1, s2, 3):
[standard]:     [hellohel]
[mine]:         [hellohel]

Testing strchr(s1, 'l'):
[standard]:     [0x7ffff3e10112]
[mine]:         [0x7ffff3e10112]

Testing strchr(s1, 0):
[standard]:     [0x7ffff3e10115]
[mine]:         [0x7ffff3e10115]

Testing strchr(s1, 'z'):
[standard]:     [(nil)]
[mine]:         [(nil)]

Testing strcmp
Comparting ab to abc:
        [standard]:     [-1]
        [mine]:         [-99]
Comparting abc to ab:
        [standard]:     [1]
        [mine]:         [99]
Comparting abc to abc:
        [standard]:     [0]
        [mine]:         [0]</pre>

  <p><a href="#TOP">[back to top of page]</a></p>
  </div>
<!-- --------------------CONTENT BLOCK--------------------------------------------------- -->

<div class="contentBlock" id="2024-10-09n">
  <h5>2024-10-09</h5>
  <h2>Strings in C</h2>
  <p>In c, strings are character arrays.</p>
  <p>There is nothing special about the way character arrays work.
    Because strings are so useful, there are a few features of C that make working with them simpler.</p>
  <p>
    By <strong>convention</strong> the last entry in a string character array is the NULL character
    (either <code>0</code> (the number), or <code>'\0'</code> (the character).
    This is not something that is guaranteed, if you want to create a string, you will
    need to make sure that there is a terminating NULL, if not, a number of string related functions will not work.
  </p>

  <h3> When you use <code>""</code> to make a string <em>literal</em> :</h3>
  <ol>
    <li>A character array large enough to store the string, including a terminating NULL, is created in memory.</li>
    <li>The characters of the string are stored in that array, and a terminating NULL is added.</li>
    <li>String literals are <em>immutable</em> </li>
    <li>
      If a string literal is exactly repeated in code, a new character array is not created,
      instead, the orginal array is used. This means all references to the same immutable
      string literal refer to the same piece of memory.
    </li>
  </ol>
  <h3>Declaring Strings</h3>
  <p>There are 4 ways to declare strings in C (in eaxch example, the numbers and strings used are randomly chosen, none have special meaning in C).</p>
  <ol>
    <li>
      <code>char s[256];</code>
      <ul>
        <li>Declares a mutable array of 256 bytes.</li>
        <li>No speciic characters are saved to memory.</li>
        <li>No guarantee of a NULL character at any position.</li>
      </ul>
    </li>

    <li>
      <code>char s[256] = "Imagine"</code>
      <ul>
        <li>Creates the immutable string literal <code>"Imagine"</code> .</li>
        <li>Declares a mutable array of 256 bytes.</li>
        <li> <em>Copies</em> the string <code>"Imagine"</code> , including a terminating NULL, into the first 8 bytes of the array <code>s</code> .</li>
      </ul>
    </li>


    <li>
      <code>char s[] = "Tuesday"; </code>
      <ul>
        <li>Creates the immutable string literal <code>"Tuesday"</code> </li>
        <li>Creates an 8 bytes array, large enough for <code>"Tuesday"</code> and a terminating NULL for the variable <code>s</code>    </li>
        <li> <em>Copies</em> the string <code>"Tuesday"</code> , including a terminating NULL, into the array <code>s</code> </li>
      </ul>
    </li>


    <li>
      <code>char *s = "Mankind"; </code>
      <ul>
        <li> Creates the immutable string literal <code>"Mankind"</code> </li>
        <li> <code>s</code> becomes a pointer to that immutable string. </li>
        <li>  It is important to note that in the last example, an array is not created. In that case <code>s</code> is just a pointer to the memory location with the immutable string lives. If you want a mutable string, you cannot declare it this way. </li>
      </ul>
    </li>

  </ol>

  <h3>Examples:</h3>
  <pre><code>#include <stdio.h>
int main() {
  char s[16];
  char s2[16] = "Imagine";
  char s3[] = "Fish";
  char *s4 = "Imagine";
  char *s5 = "Imagine";

  //printf("%s\n",s);//DO NOT PRINT UNINITIALIZED MEMORY!
  printf("%s\n",s2);
  printf("%s\n",s3);
  printf("%s\n",s4);
  return 0;
}</code></pre>
 <img width="600px" src="img/cStrings.png" alt="">

  <h2>Working With String Variables</h2>
  <p>Everything we've covered about pointers and arrays still holds true, string variables are pointers, either array pointers or normal pointers.</p>
  <p>It is important to keep track of <em>variables</em> vs. <em>values</em> .</p>
  <ul>
    <li> <code>char s[10] = "Trogdor!!";</code>
      <ul>
        <li>In this example, <code>s</code> is an array variable that points to the 10 byte array allocation. <code>s</code> .</li>
        <li><code>s</code> is immutable, it cannot point to any other memory location. e.g. <code>s = "is a dragon";</code> <strong>is an error</strong>.</li>
        <li>The values in the array <code>s</code> points to are <strong>not</strong> immutable. You can change the value of the string at any point. <code>s[0] = 'M';</code> is perfectly good.</li>
      </ul>
    </li>
    <li>
      <code>char *s = "No sports references";</code>
      <ul>
        <li>Here, <code>s</code> is a pointer.</li>
        <li>As a pointer, you can change the value <code>s</code> points to. <code>s = "The Best";</code> is valid.</li>
        <li>
          Since <code>s</code> points to an immutable string literal, you cannot change the value of the string.
          <code>s[0] = 'N';</code> <strong>is an error</strong> .
        </li>
      </ul>
    </li>
  </ul>

<h2>String library</h2>
<p>You can find built in functions for handling strings in <code>string.h</code> </p>
<p>You can use <code>man 3 string</code> to get a summary of methods, or use a</p>

<p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------CONTENT BLOCK--------------------------------------------------- -->
<div class="contentBlock" id="2024-10-02n">
  <h5>2024-10-02</h5>

  <h2>Checking for prime numbers</h2>
  <p>A naive way to check if an integer k is prime, is to check divisibility of all integers [2,k-1].</p>
  <p>Slightly less naive is to check divisibility of all integers [2,x], and figure out how small an x you need.</p>
  <p>Since all factors are paired around the sqrt, you can use the range [2,(int)sqrt(k)]</p>
  <p>This is very slow as we don't need to check divisibility by all of those numbers. It would be faster to just check the prime ones.</p>

  <h2 >Sieve of Eratosthenes</h2>
  <p>Here is a much better method to find prime numbers.</p>
  <ul>
    <li>Assume all numbers are prime except 0 and 1.
      <p><span style="color:gray"><s> 0 </s></span> <span style="color:gray"><s> 1 </s></span> 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30</li>
    </li>

    <li>
      <p>Start with the first prime number (2) Iterate through all prime numbers and cross them out because they are composite (not prime). </p>
      <p><span style="color:gray"><s> 0 </s></span> <span style="color:gray"><s> 1 </s></span> 2 3 <span style="color:gray"><s> 4 </s></span> 5 <span style="color:gray"><s> 6 </s></span> 7 <span style="color:gray"><s> 8 </s></span> 9 <span style="color:gray"><s>10</s></span> 11 <span style="color:gray"><s>12</s></span> 13 <span style="color:gray"><s>14</s></span> 15 <span style="color:gray"><s>16</s></span> 17 <span style="color:gray"><s>18</s></span> 19 <span style="color:gray"><s>20</s></span> 21 <span style="color:gray"><s>22</s></span> 23 <span style="color:gray"><s>24</s></span> 25 <span style="color:gray"><s>26</s></span> 27 <span style="color:gray"><s>28</s></span> 29 <span style="color:gray"><s>30</s></span></p>
    </li>

    <li>
      <p>Look at the next number that is not yet crossed out (3) which will be the 2nd prime, and repeat the process for that number.</p>
      <p><span style="color:gray"><s> 0 </s></span> <span style="color:gray"><s> 1 </s></span> 2 3<span style="color:gray"><s> 4 </s></span> 5 <span style="color:gray"><s> 6 </s></span> 7 <span style="color:gray"><s> 8 </s></span><span style="color:gray"><s> 9 </s></span><span style="color:gray"><s>10</s></span> 11 <span style="color:gray"><s>12</s></span> 13 <span style="color:gray"><s>14 </s></span><span style="color:gray"><s>15 </s></span><span style="color:gray"><s>16</s></span> 17 <span style="color:gray"><s>18</s></span> 19 <span style="color:gray"><s>20 </s></span><span style="color:gray"><s>21 </s></span><span style="color:gray"><s>22</s></span> 23 <span style="color:gray"><s>24</s></span> 25 <span style="color:gray"><s>26 </s></span><span style="color:gray"><s>27 </s></span><span style="color:gray"><s>28</s></span> 29 <span style="color:gray"><s>30</s></span></p>
    </li>

    <li>
      Look at the next number that is not yet crossed out (5) which will be the 3rd prime, and repeat the process for that number.
      <p><span style="color:gray"><s> 0 </s></span> <span style="color:gray"><s> 1 </s></span> 2 3<span style="color:gray"><s> 4 </s></span> 5 <span style="color:gray"><s> 6 </s></span> 7 <span style="color:gray"><s> 8 </s></span><span style="color:gray"><s> 9 </s></span><span style="color:gray"><s>10</s></span> 11 <span style="color:gray"><s>12</s></span> 13 <span style="color:gray"><s>14 </s></span><span style="color:gray"><s>15 </s></span><span style="color:gray"><s>16</s></span> 17 <span style="color:gray"><s>18</s></span> 19 <span style="color:gray"><s>20 </s></span><span style="color:gray"><s>21 </s></span><span style="color:gray"><s>22</s></span> 23 <span style="color:gray"><s>24 </s></span><span style="color:gray"><s>25 </s></span><span style="color:gray"><s>26 </s></span><span style="color:gray"><s>27 </s></span><span style="color:gray"><s>28</s></span> 29 <span style="color:gray"><s>30</s></span></p>
    </li>
    <li>Repeat until you find the k<sup>th</sup> prime.</li>
  </ul>

  <h2>The algorithm in code</h2>
  <p>The first 25 primes are: 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, and 97.</p>
  <p>Let us see how we would find them using the sieve of eratosthenes:</p>
  <ol>
    <li> First, choose a SIZE greater than or equal to the largest prime you want. Choosing a SIZE too big means your algorithm will run slower. Choosing a SIZE too small means you won't find the n<sup>th</sup> prime.
      This means you will need to know approximately how big the n<sup>th</sup> prime is to make an array large enough. This is a problem to think about later however,  let us use 100 for this example. </li>
    <li> Now we can treat each index of the array as the value we are testing, and store a value to indicate prime or not.</li>
    <li> Mark all of the  numbers up to that SIZE. (you could do counting numbers instead if you like)</li>
    <li> Initialize the array so all values are prime, then mark 0 and 1 as composite.
      <p><img src="img/ArraySieve.png" alt="" width="600px"></p>
    </li>
    <li> Find the next index that is prime, Now flag all indices that are the multiples of that as not prime.
      <p><img src="img/ArraySieveNext.png" alt="" width="600px"></p>
    </li>
    <li> Continue the process until you get a stopping condition. Either you got to the end of the array, or you found the n<sup>th</sup> prime.</li>
  </ol>


  <h3 id="2024-10-05h">Lab04 Requirements</h3>
  <p>  Clone the repo: <a href="https://classroom.github.com/a/SBdHcF-w">https://classroom.github.com/a/SBdHcF-w</a> </p>
  <p>  You will need to worry about sieve.c and sieve.h. </p>
  <p>  <strong>Critical:</strong> You will put a main in some other c file, not in sieve.c . I will test your sieve.c with my own tester.</p>
  <p>  Suggestion: have your sieve() function call a different function with all the work in it. This makes it easy to update to whichever version you made that works fastests.</p>
  <p>  In sieve.c have a function <code>int sieve(int n);</code> that returns the nth prime.</p>
  <ul>
    <li>sieve(1) returns 2</li>
    <li>sieve(2) returns 3</li>
    <li>sieve(25) returns 97</li>
    <li>etc.</li>
  </ul>

  <h3>Optimizations:</h3>
  <p>Please make sure you make new versions as you try to add new features. Always keep your fastest working version around.</p>
  <p>Note: When crossing out the multiples of eac prime, you MUST increment by that primes in the loop, not by 1. e.g. increment by 5 to cross out multiples of 5. This is not an optimization.</p>
  <p>Here is a possible progression of optimizations.</p>
  <ol>
    <li>No Optimizations, just malloc/calloc the array and get large primes. (Just make it work)</li>
    <li>Estimate the size of your array using math (see prime approximation below)</li>
    <li>Use char array instead of int</li>
    <li>Only cross out multiples of primes IF the prime is less than the sqrt of the SIZE. This makes the entire process stop when you reach a high enough prime. </li>
    <li>Try to cut down on your extra variables and extra function calls</li>
    <li>Store only odd values in your array, this cuts down array traversal and memory allocation quite a bit. e.g. index 0 is 1, index 1 is 3, index 2 is 5 etc.</li>
    <li>Try using bitwise operations and store bits (exploration of this topic is optional)</li>
  </ol>
  <p><strong>Note:</strong> Everyone should be able to do all of the non-bitwise optimizations!</p>
  <h2>Prime approximations</h2>
  <p>
    The prime number is approximately <code>n * ln(n)</code> by the prime number theorem. However this is not always >= the n'th prime. You will need to add a coefficient or offset.
  </p>

  <h3>Versions</h3>
  <p>You will need to make multiple versions of this method!</p>
  <p>Make sieveV1(n) and comment what optimizations you added.</p>
  <p>Make sieve(n) call your fastest working sieveVx() command.</p>
  <p>e.g.</p>
  <pre class="codeblock"><code>int sieve(int n){
   return sieveV5(n);
}

//basic version
int sieveV1(int n){
  //code
}

//stopped early when checking primes
int sieveV2(int n){
  //code
}
...
</code></pre>


  <h3>Testing</h3>
  <p>You need to test for both speed and correctness. You only have to account for sieve(n) where 1 <= n <= 2,000,000</p>
  <p>Here is a quick test script to see how fast your version is:</p>
  <pre class="codeblock"><code>#include &lt;stdio.h>
#include "sieve.h"
int main(){
  //This quickly checks a variety of sizes and values
  //Do not try to exploit the fact that these function calls are in the same main. I run multiple tests.
  int input[] = {1, 2, 3, 4,  5,  6,  7,  8,  9, 10, 25,
      100, 1000, 2350, 2945, 9822,  10000,  50000, 73234,  100000,
      500000, 1000003,1510041,1932457, 2000000};
  int ans[] =   {2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 97,
      541, 7919, 20897, 26849, 102563, 104729, 611953, 926623,1299709,
      7368787, 15485927, 24049567, 31285333 ,32452843};

  for(int i = 0; i &lt; sizeof(input)/sizeof(int); i++){
      int guess = sieve(input[i]);
      //printf("Test sieve(%7d)\t%s, your guess : %8d \n",input[i],(guess==ans[i])?"PASS":"FAIL",guess);
      if(guess!=ans[i]){
          //exit at first failed case.
          printf("ERROR: sieve(%7d) your guess : %8d \n", input[i], guess);
          return 1;
      }

  }
  printf("Pass all cases.");
  return 0;
}</code></pre>
<h3>Test results: (on same computer) </h3>
<p>8.9 sec : Unoptimized (array always 32452844) </p>
<p>2.5 sec : Tight array bounds.</p>
<p>1.6 sec : Tight array bounds /w char array.</p>
<p>0.6 sec : Tight array bounds /w char array only storing odd values in the array.</p>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>




<!-- --------------------CONTENT BLOCK--------------------------------------------------- -->
<div class="contentBlock" id="2024-09-30n">
  <h5>2024-09-30</h5>
  <h2>Stack and Heap Memory</h2>
  <p>Every program has memory for both the stack and heap.</p>

  <h3>Stack memory</h3>
  <ul>
    <li>Stores all normally declared variables (including pointers and structs), arrays and function calls.</li>
    <li>Functions are pushed onto the stack in the order they are called, and popped off when completed.</li>
    <li>When a function is popped off the stack, the stack memory associated with it is released.</li>
  </ul>

  <h3>Heap memory</h3>
  <ul>
    <li>Stores dynamically allocated memory.</li>
    <li>Data will remain in the heap until it is manually released. (or the program terminates)</li>
  </ul>
  <h3>Dynamic memory allocation</h3>
  <ul>
    <li><code>void* malloc(size_t x)</code>
      <ol>
        <li>Allocates x bytes of heap memory.</li>
        <li>Returns the address at the beginning of the allocation</li>
        <li>
          <p>Returns a <code>void *</code> so you should typecast:</p>
          <code>(type*) malloc(number-of-bytes);</code>
          <p>e.g.</p>
          <pre class="codeblock"><code>int *ptr;
ptr = (int*) malloc(100 * sizeof(int));</code></pre>
        </li>
      </ol>
    </li>
    <li>
      <code>free(void * p)</code>
      <ol>
        <li>Releases dynamically allocated memory.</li>
        <li>Has one parameter, a pointer to the beginning of a dynamically allocated block of memory.</li>
        <li>Every call to malloc/calloc should have a corresponding call to free.</li>
      </ol>
    </li>
    <li>
      <code>void* calloc(size_t n, size_t x)</code>
      <ol>
        <li>Allocates n * x bytes of memory, ensuring every bit is 0.</li>
        <li>
          <p>Works like malloc in all other ways, including your need to typecast to the pointer type from void*</p>

          <pre class="codeblock"><code>int *p;
p = (int*)calloc( 5, sizeof(int) );
</code></pre>
        </li>
      </ol>
    </li>
    <li>
      <code>void* realloc(void *p, size_t x)</code>
      <ol>
        <li>Changes the amount of memory allocated for a block to x bytes.</li>
        <li><code>p</code> must point to the beginning of a block.</li>
        <li>Returns a pointer to the beginning of the block (this is not always the same as <code>p</code>)</li>
        <li>If <code>x</code> is smaller than the original size of the allocation, the extra bytes will be released.</li>
        <li>If <code>x</code> is larger than the original size then either:
          <ul>
            <li>If there is enough space at the end of the original allocation, the original allocation will be updated.</li>
            <li>If there is not enough space, a new allocation will be created, containing all the original values. The original allocation will be freed.</li>
          </ul>
        </li>
      </ol>
    </li>
  </ul>

  <h3>Visualizer is possibly helpful for the differences:</h3>
  <a href="https://pythontutor.com/visualize.html#code=%23include%20%3Cstdio.h%3E%0A%23include%20%3Cstdlib.h%3E%0Avoid%20foo%28int%20*arr,%20int%20size%29%7B%0A%20%20%20%0A%20%20%20for%28int%20i%20%3D%200%3B%20i%20%3C%20size%3B%20i%2B%2B%29%7B%0A%20%20%20%20printf%28%22%25d%20%22,*%28arr%2Bi%29%29%3B%0A%20%20%20%7D%0A%20%20%20printf%28%22%5Cn%22%29%3B%0A%7D%0A%0Aint%20main%28%29%20%7B%0A%20%20int%20nums%5B%5D%20%3D%20%7B10,%2020,%2030%7D%3B%0A%20%20%0A%20%20int%20size%20%3D%204%3B%0A%20%20int%20*nums2%20%3D%20%28int%20*%20%29%20malloc%28size*sizeof%28int%29%29%3B%0A%20%20%0A%20%20for%28int%20i%20%3D%200%3B%20i%20%3C%20size%3B%20i%2B%2B%29%7B%0A%20%20%20%20nums2%5Bi%5D%20%3D%20size-i%3B%0A%20%20%7D%0A%20%20foo%28nums2,%20size%29%3B%0A%20%20return%200%3B%0A%7D&cppShowMemAddrs=true&cumulative=false&heapPrimitives=nevernest&mode=edit&origin=opt-frontend.js&py=c_gcc9.3.0&rawInputLstJSON=%5B%5D&textReferences=false">C Visualizer with array example.</a>


  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK-------------------- -->

<div class="contentBlock" id="2024-09-27n">
  <h5>2024-09-27</h5>
  <h3>Remember your #ifndef</h3>
  <p>In your header files remember to use the ifndef operator to not re-include things. This won't break now, but it will later and you won't know why.</p>
  <p>A good naming convention for filename.h is to use filename_h as your ifndef identifier</p>
  <pre>#ifndef filename_h
#define filename_h
int foo();
void bar(int x);
#endif</code></pre>

  <h3>C Functions</h3>
  <h4>pass by value</h4>
  <p>All functions in C are <em>pass by value</em>.<p>
  <ul>
    <li>This means that the arguments are <strong>copied</strong> into new variables when the function is called.</li>
    <li>As a result, normal values are not modified when passed into a funtion. Consider this function to swap two values:
    <pre class="codeblock"><code>void swap(int x, int y) {
  int temp = x;
  x = y;
  y = temp;
}
int main(){
  int a = 10;
  int b = 20;
  swap(a, b);
  //what happened to a and b?
}</code></pre>
    <p>
    <img src="img/PassByValueSwap.png" alt="">
    </p>
    </li>
    <li>In this example, when <code>swap</code> is run on <code>x</code> and <code>y</code>, <code>a</code> and <code>b</code> are created. The function swaps the values of <code>a</code> and <code>b</code>, but once the function finishes, it is popped off the call stack, and <code>a</code> and <code>b</code> are gone. <code>x</code> and <code>y</code> are left unchanged.</li>
  </ul>

  <h3>The Power of Pointers!</h3>

  <p>This is where pointers come in handy. If you pass a pointer to a memory address, then you can modify the value it points to. Look at this modified version of swap.<p>
  <pre class="codeblock"><code>void swap(int *x, int *y) {
  int temp = *x;
  *x = *y;
  *y = temp;
}

int main(){
  int a = 10;
  int b = 20;
  swap(&amp;a, &amp;b);
}</code></pre>
  <p>
  <img src="img/PassByReferencePointerSwap.png" alt="PassByReferencePointerSwap.png">
  </p>
  <ul>
    <li>Now that <code>swap</code> takes pointers, we can de-reference the parameters to get at the values pointed to. When the function is colled, <code>a</code> and <code>b</code> become copies of the <em>addresses</em> of <code>x</code> and <code>y</code>, so when <code>swap</code> finishes, the values will actaully be swapped.</li>
  </ul>
  </li>
  <h3>Pointer paramters</h3>
  <p>Passing pointers as arguments is actually what happens in java when object variables are used!
  You may recall the phrase <em>pass by reference</em>, all that means is pass by value, but the
  value being passed is a memory address.
  </p>
  <p>
  When you pass an array as a argument to a function, the entire array is <em>not</em> copied.
  Since array variables are pointers, all arrays are treated as regular pointers when passed
  into a function.</p>
  <p> The following function headers are equivalent:</p>
  <ul>
    <li><code>void arr_func( int arr[]);</code></li>
    <li><code>void point_func( int *arr);</code></li>
    <li>It is generally preferred to use the second option, since it makes clear that the parameter
      is a normal pointer. It is possible to use the first option and think that something special
       is going on due to the array notation (but nothing is).</li>
    <li>The sizeof() function will always evaluate to the sizeof a pointer in both cases (8 on 64-bit systems) and <strong>not</strong> the array size, as was the case when used on the immutable pointer variable you created originally.(see demo below)</li>
  </ul>

  <h3>Array parameter Example:</h3>

  <pre> <code>#include &ltstdlib.h>
#include &ltstdio.h>

//n should be int*
void passArray(int n[]){
  printf("  size of n: %lu\n",sizeof(n));
  printf("&n %p\n",&n);
  printf("n %p\n",n);
}
int main(){
  int ARR_SIZE = 10;
  int nums[ ARR_SIZE ];
  nums[0]= 0;
  printf("size of nums: %lu\n",sizeof(nums));
  printf("&nums %p\n",&nums);
  printf("nums %p\n",nums);
  passArray(nums);
  return 0;
}</code></pre>

  <strong>Warning:</strong>
  <pre class="codeblock"><code>array.c: In function ‘passArray-:
array.c:4:35: warning: ‘sizeof- on array function parameter ‘n-
          will return size of ‘int *- [-Wsizeof-array-argument]
4 |   printf("size of n: %lu\n",sizeof(n));
  |</code></pre>
  <strong>Output:</strong>
  <pre class="codeblock"><code>size of nums: 40
&nums 0x7ffda2ebcf30
nums 0x7ffda2ebcf30
size of n: 8
&n 0x7ffda2ebcf18
n 0x7ffda2ebcf30</code></pre>
  <p><a href="#TOP">[back to top of page]</a></p>
</div>




<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-25n">
  <h5>2024-09-25</h5>
  <h1 id="random-numbers">Random Numbers</h1>
  <ul>
  <li>Note: On some systems, you may be able to use other functions than the ones described below, but they are not standard for linux, so you should stay away from them for now.</li>
  <li>Generating a random number in C requires 2 steps
    <ol>
      <li>Seeding the random number generator</li>
    </ol>
    <ul>
      <li><code >srand( time(NULL) );</code>
        <ul>
          <li><code >srand(&lt;SEED&gt;)</code> seeds the random number generator with the provided argument.</li>
          <li>If you use the same argument to <code >srand()</code> multiple times, you will get the exact same sequence of random numbers.</li>
          <li><code >time(NULL)</code> will return the current <a href="https://www.epochconverter.com">EPOCH</a> time, it is commonly used with <code >srand()</code> to get new random sequences.
            <ol>
              <li>Getting a random number</li>
            </ol>
          </li>
        </ul>
      </li>
      <li><code >int x = rand();</code></li>
      <li>Returns the next random number in the sequence seeded by <code >srand()</code>.</li>
      <li>Returns an <code >int</code>.</li>
    </ul>
  </li>
  <li><code >srand()</code> and <code >rand()</code> are both in <code >&lt;stdlib.h&gt;</code></li>
  <li><code >time()</code> is in <code >&lt;time.h&gt;</code>
 </ul>

  <h3>Here is a script to repeat your make command 30 times to test random:</h3>
  <pre class="codeblock"><code> for i in {1..30}; do make; done</code></pre>

  <h3>Here is a 'random' script:</h3>
  <pre class="codeblock"><code>S="Ding"
for i in {1..9}
do
        S=$S" ding"
done
cowsay -f fox $S</code></pre>


  <h2 >Arrays</h2>
  <ul>
  <li>An array is an allocated block of memory meant to hold multiple pieces of data of the same type.</li>
  <li>C arrays do not have a length attribute/function.</li>
  <li>We will use <code >[]</code> to access array elements.</li>
  <li>The size of an array must be set at declaration and cannot be changed.</li>
  <li>The size of an array cannot be dyanmic.</li>
  <li>There is no boundry checking (much more on this later).</li>
  <li>Array declaraion/access syntax:
    <pre  class="codeblock">float ray[5];
ray[2] = 8.22;</code></pre>
  </li>
  <li>The above code requests a block of memory large enough for 5 <code >floats</code> (20 bytes), which then can be accessed using 0-based <code >[]</code> notation.</li>
  </ul>

  <h2>Array Variables</h2>
  <ul>
  <li>Array <em>varibles</em> (not the arrays themselves) are pointers to the allocated array block.</li>
  <li>Unlike standard pointers, array variables are <strong>immutable</strong>, meaning that you can never change the memory address an array variable points to.</li>
  <li>In the previous example, <code >ray</code> is a variable that points to the beginning of the 20 bytes allocated to that array of floats.</li>
  <li>The <code >sizeof</code> function can be used to find the size of a given type (like <code >float</code> or <code >char *</code>), or _the amount of memory associated with a given variable.
    <ul>
      <li><code >sizeof(ray)</code> would return <code >20</code>.</li>
      <li><code >sizeof(ray) / sizeof(float)</code> would return <code >5</code>. It is more standard in C <em>not</em> to use this, instead using other constants/variables to keep track of array sizes. Since array sizes must be set at compile time, you-re more likely to see something like this:
        <pre class="codeblock"><code>int ARR_SIZE = 10;
double trouble[ ARR_SIZE ];
</code></pre>
      </li>
    </ul>
  </li>
  </ul>

  <h2>Array Variables &amp; Pointers</h2>

  <ul>
    <li>Since array variables are pointers, we can assign normal pointers to array variables.
      <pre class="codeblock"><code>float ray[5];
float *rp = ray;
  </code></pre>
    </li>
    <li><code >ray</code>, is immutable, so we <strong>could not</strong> do soemthing like <code >ray++</code>, but <code >rp</code> is a normal pointer, so we could do <code >rp++</code>. Due to <em>pointer arithmetic</em>, <code >rp++</code> would actually add <code >4</code> to <code >rp</code>.</li>
    <li><code >sizeof(ray)</code> would return <code >20</code>, while <code >sizeof(rp)</code> would return <code >8</code>, since <code >rp</code> is a pointer and only holds an 8 byte (on most systems) memory address.</li>
    <li>This is commonly done, and because of pointer arithmetic, you can iterate through an array by using a pointer and incrementing it.</li>
  </ul>

  <h3>Array Indexing and <code >[]</code> Notation</h3>
  <ul>
    <li>
      The following two pieces of code perform the same task:
      <code >ray[3]</code> and <code >*(rp + 3)</code>
    </li>
    <li>In the second example, we add <code >3</code> to <code >rp</code>, which is the same address as the location for <code >ray[3]</code>.</li>
    <li>The de-reference operator (<code >*</code>), is then used to retrieve the value.</li>
    <li>You can think of the standard <code >[]</code> notation in terms of specifying an offset from the beginning memory address of an array.</li>
    <li>Arrays are 0-indexed because the first element is stored at the starting address, so you need not add to get to the correct memory address.</li>
    <li>The <code >a[i]</code> notation is actually shorthand for:
      <ul>
        <li><code >*(a + i)</code>,</li>
      </ul>
    </li>
    <li>This means that you can use <code >[]</code> with pointer variables as well.
      <ul>
        <li><code >rp[3]</code> is valid code.</li>
      </ul>
    </li>
    <li>You can write <code >ray[-1]</code> or <code >rp[-1]</code>, which would go to the value 4  bytes (one float size) before the beginning of your array.</li>
    <li>If you use an index past the end of an array allocation, you will be attempting to access the memory addresses past the end of the array.</li>
    <li>In either case, going past an array allocation on either end is not advised. Your code will compile, but when run, at best you-ll access other variables within the program, at worst, you-ll crash.</li>
  </ul>
  <strong>WARNING: HORRIBLE SYNTAX AHEAD</strong>
  <ul>
    <li>Once again, <code >*(a + i)</code> is the same as <code >a[i]</code></li>
    <li><code >+</code> is a commutative operations, meaning <code >a + i</code> == <code >i + a</code></li>
    <li>… some of you may see where this is going</li>
    <li>Since: <code >*(a + i)</code> == <code >*(i + a)</code></li>
    <li>It follows that: <code >a[i]</code> == <code >i[a]</code></li>
    <li>So <code >ray[2]</code> can also be written as <code >2[ray]</code>. Try it once, then NEVER DO IT AGAIN!</li>
    <li>Use this knowledge wisely.</li>
  </ul>

  <h3 id="2024-09-25h">Lab03 Arrays</h3>
  <h4>Due: Monday 09/30 8:00am</h4>
  <p>You will have today + 1 full class day + home time for this.</p>
  <p>You SHOULD be done with this by Friday.</p>
  <p>Clone link: <a href="https://classroom.github.com/a/9lGpCz-A">https://classroom.github.com/a/9lGpCz-A</a> </p>
  <h4>Do the following in a C program.</h4>
  <p>
    For this assignment, <em>do not create helper functions, put everything inside main</em> (it won't be too long).
    We will talk about passing arrays and pointers are function arguments next week.
  </p>
  <ol>
    <li>Create an array large enough to store 10 ints.</li>
    <li>Set the first value in the array to 0.</li>
    <li>Populate the rest of the array with random values in the range -128 to 127.(you can make a function to generate )</li>
    <li>Print out the values in this array in the format "[1, -3, 4, 7....,9]" that is: ", " between values with [] around the whole set.</li>
    <li>Create a second array of the same size.</li>
    <li>Create pointer variables that will point to each array.</li>
    <li>USING ONLY POINTER VARIABLES (that is, do not use the array variables) do the following:
      <ul>
        <li>Populate the second array with the values in the first but in reverse order</li>
        <li>Print out the values in the second array using pointer notation <code>*</code>  </li>
        <li>Do this last step again using array notation (try the array variable and the pointer variable with the <code >[]</code> ).</li>
      </ul>
    </li>
  </ol>
  <a href="#TOP">go back to the top of the page</a>
  </div>





  <!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-24n">
  <h5>2024-09-24</h5>
  <h3>Goals</h3>
  <ol>
    <li>Clarify issues with poiners and pointer arithmetic.</li>
    <li>Talk about wsl features.</li>
  </ol>
  <h3 id="pointers">Pointers</h3>
  <ul>
    <li>Regular variables are designed to store <em>values</em>.</li>
    <li>Pointers are variables designed to store <em>memory addresses</em>.</li>
    <li>
      Pointers are variables, meaning they are an identifier for a value stored in
      memory at a particular address (see above for detail), the only difference is
      that a pointer is designed to store an address.
    </li>
    <li>
      Pointers must be able to store the value of any potential memory address.
      On 64 bit computers, this means pointers have to be able to represent 64 bits, or 8 bytes.</li>
    <li>Pointers are designed for addresses, which means they are natively <code>unsigned</code>.</li>
    <li>Even though all pointers are the same size, we declare them using the type of the value pointed to.</li>
  </ul>
<h3>Syntax</h3>
  <ul>
    <li><code>*</code> is used to declare a pointer variable.</li>
    <li><pre><code>int x = 5;
int *p = &amp;x;</code><pre></li>
    <li>Here <code>p</code> is a pointer variable that stores the address of the variable <code>x</code>.</li>
    <li>Notice that p is a normal variable, and has its own, different, memory address.</li>
    <li>If you-re thinking, “hey, this looks familiar… like object variables in java”. You-re right! Object variables, or references, are java's pointers. You just don-t have as much control over them as we do in C. In fact, think about the error you get when you try to use an uninitialized object variable in java… <em>null pointer</em>, meaning the reference stored is 0 (null), which is an invlaid memory address.</li>
    <li><code>*</code> is also used as the <strong>de-reference operator</strong>. This will return the value stored at the memory address pointed to by the pointer.</li>
    <li>Given the definitions of <code>x</code> and <code>p</code> above:</li>
    <li><code>int y = *p + 10;</code> would set <code>y</code> to the value <code>15</code>.</li>
    <li><code>*p = y;</code> would set the value at the memory address stored in <code>p</code>, to whatever the value stored in <code>y</code> is.</li>
  </ul>
  <h3>Pointer Arithmetic</h3>
  <ul>
    <li>Consider the following C snippet:
      <pre class="codeblock"><code>  unsigned int i = 2151686160;
  int *ip = &amp;i;
  char *cp = &amp;i;
  </code></pre>
    </li>
    <li><code>ip</code> and <code>cp</code> will store the address of the first byte used to store <code>i</code>. Depending on the <a href="https://en.wikipedia.org/wiki/Endianness">endianness</a> of the system, that byte will either be <code>10000000</code> (big) or <code>00010000</code> (little).</li>
    <li>Let's just say that the first byte is located at memory address <code>3000</code> (using small number for ease of discussion)</li>
    <li>Due to pointer arithmetic: If you perform <code>ip++</code> and <code>cp++</code>, each pointer will be incremented by <code>1 * sizeof(type)</code> ,  <code>ip</code> will increase to <code>3004</code> and <code>cp</code> will increase to <code>3001</code>. In essence, <code>ip</code> would move one <code>int</code> forward in memory, while <code>cp</code> only moves one <code>char</code> (byte) forward.</li>
  </ul>

  <h3>Looking ahead</h3>
  <p>Using pointer arithmetic is needed to make use of arrays. An array[0] points to the start of a block of memory, while array[1] points 1 * sizeof(type) from the start. This is the elegance of arrays in c.</p>

  <h3 id="endianness">Endianness</h3>

  <ol>
    <li>Some more detail on <a href="https://en.wikipedia.org/wiki/Endianness">endianness</a></li>
    <li>Forgetting about computer data for a moment, think aboput normal decimal numbers. In the number 2,354 we would say 2 is the most significant digit, because that 2 represents 2 thousand, the largest value of any digit in that number.</li>
    <li>Generally, we write decimal numbers left-&gt;right from most-&gt;least significant.</li>
    <li>Endianness is a similar concept, except instead of thinking of the significance of digits, we look at the significance of <strong>bytes</strong>.
      <ul>
        <li>Consider the value <code>261</code>. In binary, that would be: <code>100000101</code>, which is a 9 bit number.</li>
        <li>To store <code>261</code> in an <code>int</code>, C will use 4 bytes, so it would really look more like this:
          <ul class="subList">
            <li><code>00000000</code> <code>00000000</code> <code>00000001</code> <code>00000101</code></li>
          </ul>
        </li>
        <li>Think about the significance of bytes in the same way you think about the significance of digits. In the above representation, the most significant byte comes first. Since we only need 9 bits (which is spread over 2 bytes) to represent <code>261</code>, the first two bytes are all <code>0</code>. The third byte, <code>00000001</code>, represents the number <code>256</code>.</li>
        <li>Systems that use this representation are called <strong>big endian</strong>.</li>
        <li>Other systems use the reverse order, going from least significant to most significant byte. These are called <strong>little endian</strong>.</li>
        <li><code>261</code> in <strong>little endian</strong> format would be:
          <ul class="subList">
            <li><code>00000101</code> <code>00000001</code> <code>00000000</code> <code>00000000</code></li>
            <li>Notice that the indicidual bytes are in most-&gt;least significant bit order, but the order of the bytes is reversed.</li>
          </ul>
        </li>
        <li>Another example, <code>2,151,686,160</code>
          <ul class="subList">
            <li>Big endian: <code>10000000</code> <code>01000000</code> <code>00100000</code> <code>00010000</code></li>
            <li>Little endian: <code>00010000</code> <code>00100000</code> <code>01000000</code> <code>10000000</code></li>
          </ul>
        </li>
      </ul>
    </li>

  </ol>

  <h3>WSL demo.</h3>
  <ol>
    <li>You can open your current directory in windows explorer by typing the command <code>explorer.exe .</code></li>
    <li>Your wsl can see your windows drive in <code>/mnt/c/</code> , and your windows install can see your wsl drive.</li>
    <li>You can open windows programs on your linux filesystem as well! try it with a program installed like: <code>/mnt/c/Program\ Files/Notepad++/notepad++.exe</code> </li>
    <li>Alias any windows programs in your config file with something like: <code>alias notepad="/mnt/c/Program\ Files/Notepad++/notepad++.exe"</code> </li>
    <li>You can make a bash script to run pulsar or notepad++ really easily. Create a file called npp in your ~/bin directory of wsl. Then add the script: <pre>#!/bin/bash
/mnt/c/Program\ Files/Notepad++/notepad++.exe $1</pre>
    The $1 means the 1st argument of the script. If you then typed <code>npp hello.txt</code> it would replace $1 with hello.txt </li>
  </ol>
  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-23n">
  <h5>2024-09-23</h5>
  <h3>Why make a script</h3>
  <p>What are some of the advantages of making a script to complete a task?</p>
  <p>Where sholud scripts that you write be stored?</p>
  <p>A quick bash scripting reference can be found here: <a href="https://devhints.io/bash">https://devhints.io/bash</a> </p>

  <h3>Control your environment</h3>
  <p>
    Everyone should be comfortable tweaking and configuring their working environment on a computer.
    Today you will learn to make your scripts more accessible when you are working in the terminal,
    so that you don't have to remember where you place them in order to call them.
  </p>
  <p>
    The tool you created yesterday is a perfect example of something you want to use in multiple places (each of your lab folders).
    It does not make sense to copy this script to each lab folder however!
  </p>
  <p>You can just evoke the script by typing <code>/PATH/TO/SCRIPT/ScriptName.sh </code> e.g. <code>~/scripts/ScriptName.sh </code></p>
  <p>Here is a super simple version of the script:</p>
  <pre class="codeblock"><code>#!/usr/bin/bash
cloneurl=`git remote -v | cut -d ' ' -f 1 | cut -d $'\t' -f 2 | head -n 1`
cd ..
git clone $cloneurl temprepo
cd temprepo
make compile
make run
cd ..
rm -rf temprepo
</code></pre>
  <p>Note: <code>#!/usr/bin/bash</code> is required if your shell is not bash and you want to use the script by name. Otherwise you need to type <code>bash scriptname.sh</code> </p>
  <p>If this fails to find bash, type <code>which bash</code> to get the correct location. </p>
  <h3>Updating your path variable</h3>
  <p>You may have noticed: you cannot just type the name of your script to trigger the script.</p>
  <p>All programs and scripts you make require a <code>./</code> before the script/program name because they are not located in any of your PATH directories.</p>
  <p>In the lab, you cannot put your programs in a pre-designated PATH directory, so you can just set a local directory to hold all of your programs and scripts.</p>

  <h3>Make a direcotry for your binaries/scripts</h3>
  <ol>
    <li>
      <p>Make a directory <code>~/bin</code> </p>
      <pre class="codeblock"><code>mkdir ~/bin</code></pre>
    </li>
    <li>
      <p>Now you can make this directory part of your path using the command:</p>
      <pre class="codeblock"><code>export PATH=$PATH:~/bin</code></pre>
    </li>
    <li>
      <p>Suggested: add this command to your <code>~/.profile</code> so that you don't have to type it every time you use the computer.</p>
    </li>
    <li>
      <p>Place your script <code>clonetest.sh</code> (or whatever you want to call it) from yesterday into your ~/bin directory.</p>
    </li>
    <li>
      <p>Now the moment you have been waiting for: you can now use your script from ANY directory just by typing <code>clonetest.sh</code>, AND you can auto complete the command name with the tab key! </p>
      <p>Any scripts and programs you place in this folder can be called by name much like ls, pwd and all those useful commands you use already.</p>
    </li>
  </ol>

  <h3>Not sure which profile is executing?</h3>
  <p>It is possible you are editing the wrong profile since there are several. Between <code>.profile</code>, <code>.bashrc</code>, <code>.bash_profile</code>, or even <code>.zshrc</code> it can be confusing!</p>
  <p>If you ever need to check what is running, just place an echo command inside your profiles so you can test which is actually being executed.</p>

  <h3>Tweak your script from yesterday</h3>
  <p>The git clone command can be a large wall of text you don't want to see.</p>
  <p>You can silence this command by redirecting the stderr (error text) to /dev/null.</p>
  <p>Try this to make the clone quiet: <code>git clone URL NAME 2&gt /dev/null</code>  </p>

  <h2>Open a remote repo in a browser using the CLI including scripts:</h2>
  <p>Like this: <code>firefox "https://`(git config remote.origin.url | cut -f2 -d@ | tr ':' /)`"</code></p>
  <p>Change the explorer.exe to some other application... like <code>opera</code> on mac, you can use the <code>open</code> command , or <code>explorer.exe</code> on windows</p>

  <h3>Make it a shortcut:</h3>
  <code>alias gh='explorer.exe https://$(git config remote.origin.url | cut -f2 -d@ | tr ':' /)'</code>

  <h3>WSL</h3>
  <p>Demo utility of WSL.</p>

  <h2 id="2024-09-27h">Homework</h2>
  <ul>
    <li>There is a perusall assignment on academic dishonesty. Please Read it and ask any questions about it by tomorrow. Do not worry about the auto scoring.</li>
    <li>Use your google-fu to learn some terminal-fu. (Specifically about the bash shell or scripts). </li>
    <li>Make a post on piazza in the terminal-fu section. Either share something useful/cool/surprising about the shell, or add on to someone else's post with related cool stuff.</li>
  </ul>

    <p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-19n">
  <h5>2024-09-19</h5>
  <h3>Lab02 deadline</h3>
  <p>The lab is due Monday. You will have the majority of the period to work on it today.</p>

  <h3>Math</h3>
  <p>The math library in <code>math.h</code> has a bunch of useful functions such as:</p>
  <ol>
    <li><code>double sqrt(double x)</code> : Returns the square root of x.</li>
    <li><code>double log10(double x)</code> : Returns the common logarithm (base-10 logarithm) of x.</li>
    <li><code>double pow(double x, double y)</code> : Returns x raised to the power of y.</li>
  </ol>
  <p>The only problem is that when you <code>#include &ltmath.h></code> you must compile with the <code>-lm</code> flag. (Both compile and linking steps)</p>

  <h3>Makefile tweaks</h3>
  <p>Don't use make run as a command like this:</p>
  <pre>
    <code>default:
      make run</code>
    </code></pre>
    <p>Instead here is a better way to have make run be default, but easily change it later. It also gives you an idea of how to suppress rm having no target files.</p>
    <p>Note the -lm flag on gcc when compiling files that use the math.h library.</p>
    <pre class="codeblock"><code>.PHONY: clean run compile
run: prog
  @./prog
clean:
  rm -f *.o prog
compile prog: tester.o fun.o
  @gcc -o prog tester.o fun.o -lm
tester.o: tester.c fun.h
  @gcc -c tester.c
fun.o: fun.c
  @gcc -c fun.c -lm</code></pre>
  <p>Notice the following:</p>
  <ol>
    <li>In order for the run command to automatically compile: The output filename <code>prog</code> is also a target. (next to compile) This allows the compiled file to be a dependency.</li>
    <li>The .PHONY targets are NOT files. This is important if you have </li>
    <li>The clean command is not @ suppressed. This is my preference so I see the rm command on the terminal. All other things should be suppressed unless you are debugging.</li>
  </ol>
  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-18n"><!-- ------------------------------------------ -->
  <h5>2024-09-18</h5>

  <h3>SSH</h3>
  <p>The documentation for SSH on my site has been updated to incldue multiple ssh targets in case one is non-functional ( <em>We are looking at you marge...</em> )</p>
  <p> <a href="https://konstantinnovation.github.io/index.html#ssh">https://konstantinnovation.github.io/index.html#ssh</a> </p>
  <h3>the -fu suffix:</h3>
  <p>-fu : (slang) Used to form nouns indicating expertise or mastery of specified skill or area of knowledge.</p>
  <ul>
    ‎<li>Google + ‎-fu → ‎Google-fu
    ‎<li>script + ‎-fu → ‎script-fu
    <li>My Google-fu is weak!
    <li>Aragorn uses Ranger-fu to figure out that Sam and Frodo have taken a boat.
  </ul>
  <h4>Etymology</h4>
  <p>From kung-fu.</p>

  <h3>More <code>printf</code></h3>
  <ul>
    <li><code>printf</code> provides different ways of printing out values.</li>
    <li>Remember that no matter how you write a number in your code, it is stored in memory in binary, so as far as <code>printf</code> is concerned, even printing out a value in decimal (base 10), requires translating the stored data.</li>
    <li>There is no such thing as a “native” hexidecimal or decimal number. You write them in your code in some way, and they turn into binary when the program is compiled.</li>
    <li>So <code>printf</code> takes the binary data, and displays it in a particular way based on the formatting character(s) provided.</li>
    <li><code>%d</code> : print a value as a signed decimal <code>int</code>.</li>
    <li><code>%u</code> : print a value as a decimal <code>unsigned int</code>.</li>
    <li><code>%o</code> : print a value as an octal number.</li>
    <li><code>%x</code> : print a value as a hexidecimal number.
      <ul>
        <li><code>%o</code> and <code>%x</code> will always treat the value as if it were unsigned.</li>
        <li>You can print a value out with <code>%u</code> or <code>%d</code> regardless of how it is declared, that doesn-t mean it will make sense, just that <code>printf</code> will convert the value accordingly.</li>
      </ul>
    </li>
    <li><code>h</code> : modify the printed value to look at 2 bytes instead of 4.</li>
    <li><code>hh</code> : modify the printed value to look at 1 byte.</li>
    <li><code>h</code> and <code>hh</code> can modify <code>u</code>, <code>d</code>, <code>o</code> or <code>x</code>.</li>
    <li>The code snippet below displays these options: (note %% prints a % symbol.)
      <pre class="codeblock"><code>unsigned int q = 2151686160;
printf("%%d: %d\n", q);
printf("%%u: %u\n", q);
printf("%%o: %o\n", q);
printf("%%x: %x\n", q);
printf("%%hhx: %hhx\n", q);
printf("%%hhu: %hhu\n", q);
  </code></pre>
    </li>
    <li>Note: 2151686160 is <code>80402010</code> in hex, and <code>1000 0000 0100 0000 0010 0000 0001 0000</code> in binary.</li>
    <li>When run, this prints (on my computer):
      <div><div><pre class="codeblock"><code>%d: -2143281136
%u: 2151686160
%o: 20020020020
%x: 80402010
%hhx: 10
%hhu: 16
  </code></pre></div>    </div>
    </li>

    <li>Things to notice:
      <ul>
        <li><code>%d</code> is not the actual value we used, this has to do with how negative numbers are represented.</li>
        <li><code>%hhx</code> and <code>%hhu</code> print the first byte of the value. Based on that, you can tell the endianness of the system the program is run on (it is possible you get a different result from my example).</li>
      </ul>
    </li>
  </ul>

  <h3>Bash Scripts</h3>
  <p>Quick discussion on the reasons to use a bash script vs make.</p>
  <h4>Make</h4>
  <ul>
    <li>Make is specialized in compiling source code and building projects</li>
    <li>bash scripts are a general purpose tool</li>
    <li>The ability to have dependencies compiled automatically</li>
    <li>only compile files that are older than their depenencies</li>
  </ul>
  <h4>Bash scripts</h4>
  <p>Bash scripts are just files that run a predetermined set of terminal commands.</p>
  <ol>
    <li>Create a file myScript.sh</li>
    <li>Add the following code:
      <pre><code>#!/usr/bin/bash
S="Ding"
for i in {1..9}
do
	S=$S" ding"
done
cowsay -f fox $S</code> </pre>
    </li>
    <li>Chmod the file to be executable: <code>chmod +x myScript.sh</code> </li>
    <li>Run the script using <code>./myScript.sh</code> </li>
  </ol>
  <p>The first line of the script says to use bash and not zsh to run your script. This is optional, but suggested if you use loops which differ in bash/zsh</p>


  <h2 id="2024-09-19h">Classwork + Homework</h2>
  <p>Write a bash script that is intended to be executed in the main directory of your repo. The script (minimally) does the following:</p>
  <ol>
    <li>
        <p>Get the link remote repo from the current repo (use git remote -v)</p>
        <p>Here is a command to help you put it into a variable: <code>cloneurl=`git remote -v | cut -d ' ' -f 1 | cut -d $'\t' -f 2 | head -n 1`</code> </p>
    </li>
    <li>Clone that repo in the parent directory of the already cloned repo.
      Specify a name that is not going to conflict with your other repositores using:
      <code>git clone GIT_SSH_LINK NAME_OF_FOLDER</code> . </li>
    <li>Change into that newly cloned repo.</li>
    <li>Compile and run the code using <pre>make compile && make run</code></pre> </li>
    <li>You can visually determine if the output is as expected. </li>
    <li>Remove the freshly cloned repo.</li>
    <li>After that works try to use a bash if statement to look at the returned value of <code>make compile</code>
      You should run the program if it compiles, or print out "failed to compile" when it doesn't compile.</li>
    <li>Extra: You can try to do more interesting things by looking at stdout  <code>&gt</code>  and stderr <code>2&gt</code> terminal redirectionand  and verifying that there are no errors automatically! I am not providing notes on this but google a few things and see if you can hack together a bash script!</li>
  </ol>
  <p>You are permitted to use your google-fu, and share ideas/resources with others!</p>
  <p>Note a bash conditional has the following syntax:</p>
  <pre><code>if command ; then
    echo "Command succeeded"
else
    echo "Command failed"
fi
</code> </pre>



  <p><a href="#TOP">[back to top of page]</a></p>
</div>










<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-17n">
<h5>2024-09-17</h5>



  <h3 id="memory-addresses">Memory Addresses</h3>

  <p>In order to understand pointers, we need to take a closer look at what a variable is</p>
  <p>There are three key features to any variable in your code:
    <ol>
      <li>The <strong>identifier</strong>: Name you use in code to refer to the variable.</li>
      <li>The <strong>value</strong>: Data that you store.</li>
      <li>The <strong>address</strong>: The location of data in memory.</li>
    </ol>
  </p>
  <p>Let's focus on the <strong>address</strong> (the following explanation is somewhat simplified, the nitty gritty details are not necessary to understand the concept)</p>
  <p>Memory is addressed by starting at the first byte block (1), going up until the last accessible byte.
    <ul>
      <li>For example, if your computer has 4GB of RAM, then in theory memory addresses would go from 1 to ~4,000,000,000.</li>
    </ul>
  </p>
  <p>The amount of potential memory addresses is limited by the processor, since a processor must be able to read an entire memory address within a single cycle. For modern, 64-bit computers, this means you could theorhetically have 2^64 bytes of memory, though this number is practically limited by hardware.</p>
  <p>The address space of a program is determined by the operating system (OS), when the program is run. Therefore it can be different each time.</p>

  <h3>Get an address of a variable:</h3>
  <p>You can get the address of any variable using the <strong>address of operator</strong> : <code>&amp;</code>;</p>
  <p>The <code>%p</code> placeholder character will print out a memory address in hexadecimal format: <code>printf("x: %d, address of x: %p\n", x, &amp;x);</code>.</p>
  <p>If you would prefer to see the address in decimal, you can use the placeholder for an <code>unsigned long</code> on a 64 bit. (This will most likely result in a warning from gcc): <code>printf("x: %d, address of x: %lu\n", x, &amp;x);</code>.</p>

  <h3>Store an address</h3>
  <p>In order to set a pointer to an existing variable you use the <code>&amp;</code> operator</p>
  <p><pre class="codeblock"><code>int x = 97;
int* ptr;//declar a pointer to an int type.
ptr = &x;//set the value of ptr to the address of x (make ptr point to x)</code></pre>
  </p>


  <h3>Get the value at an address:</h3>
  <p>In order to follow a pointer to where it points, you must de-reference it.</p>
  <p>
    Dereference by using the * operator. This means <code>ptr</code> is the address of x,
    but <code>*ptr</code> is the contents of x which happens to be 97 in this example.</p>

  <h3>Modify an address:</h3>
  <p>You can modify what address the pointer ptr contains by assigning as follows: <code>ptr = NEWER_ADDRESS;</code> or equivalent expressions. </p>


  <h3>Modify the contents of the address:</h3>
  <p>You can modify the value contained in the memory slot ptr points to using the assignment: <code>*ptr = NEWER_VALUE;</code> or equivalent expressions. </p>


  <h3 id="2024-09-21h">Lab02</h3>
  <h2>Do the following in a C program.</h2>
  <p>Clone the repo from here to do your work:</p>
  <a href="https://classroom.github.com/a/qB71UL4A">https://classroom.github.com/a/qB71UL4A</a>
  <h4>It will get a little tricky, so do things one step at a time, compile, run and test frequently.</h4>
  <ol>
    <li>Declare and initialize variables of types <code>char</code>, <code>int</code>, and <code>long</code>.</li>
    <li>Print out the addresses of each variable in hex and decimal.
      <ul>
        <li>What do you notice anything about the addresses?
          </li>
          <li>What about when you run the program more than once?</li>
      </ul>

    </li>
    <li>Declare and initialize pointers for each of your variables.</li>
    <li>Print out the value of what each of the pointers are referencing. (this should be the same value from step 1.).</li>
    <li>Use the pointers to modify the values of the original variables and print out the new values.</li>
    <li>
      Declare and initialize an <code>unsigned int</code> variable and 2 pointers that point to it, one should
      be an <code>int*</code> and the other should be a <code>char *</code></li>
    <li>Print out the value of each pointer (this should be the memory address), and de-reference each pointer to print out the value each points to.
      <ul>
        <li>The output should look something like: <code>p: 0x7ffee3dbd938 p points to: 133</code>.</li>
      </ul>
    </li>
    <li>Print out your <code>unsigned int</code> in decimal and hex.
      <ul>
        <li>The <code>printf</code> formatting character for a hexadecimal int is: <code>%x</code></li>
        <li>The <code>printf</code> formatting character for an unsigned int is: <code>%u</code></li>
      </ul>
    </li>
    <li>Use the <code>char*</code> to print out each individual byte of your <code>unsigned int</code>.
      <ul>
        <li>The <code>printf</code> formatting character for a single byte in hex is <code>%hhu</code> for unsigned decimal integer and <code>hhx</code> for an unsigned hex, (that is half of half of an integer).</li>
      </ul>
    </li>
    <li> <strong>Super helpful option:</strong> Try setting the value of your unsigned int to:  <code>1 + 2 + 4 + 256 + 512 + 1024</code> and then print out the bytes again. </li>
    <li>Use the <code>char*</code> to increment <em>each byte</em> of the <code>unsigned int</code> by 1.
      Print out the <code>unsigned int</code> in both hex and decimal after each modification.
      When done, print out each byte like in step 9. You may need to reset the <code>char *</code> so
      that it points to the <code>unsigned int</code>, depending on how you wrote step 4 out.</li>
    <li>Perform the same operation as in step 11, except add 16 to each byte.</li>
  </ol>

  <ul>
    <li>As you go through this, look at what's happening to each byte, and think about the level of control you have over the memory space used by your program. What values did you see for each individual byte? Can you make sense of them? Does the order make sense?</li>
    <li>If you want to test things further try doing all the above with different kinds of values:</li>
    <li>Try an <code>unsigned int</code> with a value greater that 2.1 billion.</li>
    <li>Try a regular <code>int</code>.</li>
  </ul>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-17n">
  <h5>2024-09-17</h5>

  <h1 id="memory">Memory</h1>

  <h2>Bits &amp; Bytes</h2>
  <ol>
    <li>All digital data is <em>binary</em>, broken up into series of 1s and 0s.</li>
    <li>Physically, this data can take many forms, electronic (high voltage | low voltage), optical (light on | light off), magnetic (+ | - magnetic charge) and so on.</li>
    <li>A single 1 or 0 is a <strong>bit</strong>, a unit of digital data.</li>
    <li>8 bits make a <strong>byte</strong>.
      <ul>
        <li>Why 8? - Some people thought that was a good number. It used to be 4.</li>
      </ul>
    </li>
    <li>If you have a music file that is 5 MB (megabytes) large, that means it takes 5 million bytes, or 40 million bits to be represented digitally. That's 40 million individual 1s and 0s in whatever physical form it may be.</li>
  </ol>

  <h2>Computer Memory 101</h2>
  <ol>
    <li>In order to get all this pointer stuff down, we have to be cool with understanding computer memory. So let's do that.</li>
    <li>In general, memory is the term used to describe the computer part that contains any active data. Active data includes things like:
      <ul>
        <li>All open applications, even ones running in the background.</li>
        <li>All open files.</li>
        <li>Operating system.</li>
        <li>Background processes.</li>
      </ul>
    </li>
    <li>Let us say a computer has 4 gigabytes of memory, that means it can handle 4 billion bytes of data open at once.</li>
    <li>The important distinction to be made is between <em>memory</em> and <em>storage</em>.
      <ul>
        <li><em>Storage</em> refers to data stored on disk (Hard Drive, SSD, Flash Drive, Floppy Disk…).</li>
        <li>Storage is where data gets saved for the long term. At any given time, most computers will have a lot more data in storage than in memory.</li>
        <li>For example, you might have the entire <a href="https://en.wikipedia.org/wiki/Pearl_Jam">Pearl Jam</a> discography stored on your hard drive, but you can only listen to one song at a time, so the song you-re currenlty listening to would be the only data in memory out of all the other songs in storage.</li>
      </ul>
    </li>
    <li>Memory is much faster to access than storage, which is why it is used. THe downside is that memory is <em>volitile</em>, meaning it requires power to retain data (imagine losing everything when you shut your compuer off), and it's much more expensive than storage.</li>
    <li>The most common form of memory is RAM (Random Access Memory). The more RAM you have, the more data you can hape open at once.
      <ul>
        <li>Computers can use a concept called <em>virtual memory</em>, which will allocate unused disk space for memory purposes in the event that your RAM is full.</li>
      </ul>
    </li>
    <li>When you open a program/file (in the *nix world, everthing is a file), the file is <strong>copied</strong> from storage into memory. Saving a file reverses this process, taking the changes you-ve made from memory and copying them into storage.</li>
  </ol>

  <h2>Interacting with Memory in your Programs</h2>

  <ol>
    <li>Just like any other program, when a program you write is run, it takes up memory space.</li>
    <li>Every variable and function you write gets turned into bits which takes up memory space when run.</li>
    <li>In this class, when we talk about the memory usage of a program, we will mostly be talking about variables.</li>
    <li>For example, when you declare an <code >int</code>, that means your program will request 4 bytes of memory to store a value. See prior notes for the chart of types and sizes.</li>
    <li>Some more detail on <a href="https://en.wikipedia.org/wiki/Endianness">endianness</a>:
      <ul>
        <li>Forgetting about computer data for a moment, think aboput normal decimal numbers. In the number 2,354 we would say 2 is the most significant digit, because that 2 represents 2 thousand, the largest value of any digit in that number.</li>
        <li>Generally, we write decimal numbers left-&gt;right from most-&gt;least significant.</li>
        <li>Endianness is a similar concept, except instead of thinking of the significance of digits, we look at the significance of <strong>bytes</strong>.
          <ol>
            <li>Consider the value <code >261</code>. In binary, that would be: <code >100000101</code>, which is a 9 bit number.</li>
            <li>To store <code >261</code> in an <code >int</code>, C will use 4 bytes, so it would really look more like this:
              <ul>
                <li><code >00000000</code> <code >00000000</code> <code >00000001</code> <code >00000101</code></li>
              </ul>
            </li>
            <li>Think about the significance of bytes in the same way you think about the significance of digits. In the above representation, the most significant byte comes first. Since we only need 9 bits (which is spread over 2 bytes) to represent <code >261</code>, the first two bytes are all <code >0</code>. The third byte, <code >00000001</code>, represents the number <code >256</code>.</li>
            <li>Systems that use this representation are called <strong>big endian</strong>.</li>
            <li>Other systems use the reverse order, going from least significant to most significant byte. These are called <strong>little endian</strong>.</li>
            <li><code >261</code> in <strong>little endian</strong> format would be:
              <ul>
                <li><code >00000101</code> <code >00000001</code> <code >00000000</code> <code >00000000</code></li>
                <li>Notice that the indicidual bytes are in most-&gt;least significant bit order, but the order of the bytes is reversed.</li>
              </ul>
            </li>
            <li>Another example, <code >2,151,686,160</code>
              <ul>
                <li>Big endian: <code >10000000</code> <code >01000000</code> <code >00100000</code> <code >00010000</code></li>
                <li>Little endian: <code >00010000</code> <code >00100000</code> <code >01000000</code> <code >10000000</code></li>
              </ul>
            </li>
          </ol>
        </li>
      </ul>
    </li>
  </ol>
  <p><img width="800" src="img/Big-endian-and-Little-endian.png" alt=""> </p>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-16n">
  <h5>2024-09-16</h5>
  <h2>Makefiles</h2>
  <ul>
    <li>Make is a command line tool to help automate building programs with multiple files and dependencies.</li>
    <li>It is designed such that you can compile only the files that have been modified, or that rely on modified files.</li>
    <li>Compiling instructions and file dependencies are put into a file called <em>makefile</em> or <em>Makefile</em>.</li>
    <li>Running <code>make</code>, will look for a file with one of the default names but (you can specify a different file with the <code>make -f FILENAME</code> argument).</li>
    <li>The main parts of makesfiles are:
      <ol>
        <li>Targets: Things to make (usually executables or .o files)</li>
        <li>Dependencies: Files or other targets needed to create a target.</li>
        <li>Rules: The steps to create the target.</li>
      </ol>
    </li>
    <li>Make will always run the first target if none is specified.</li>
    <li>Make recursively goes through dependencies.</li>
    <li>Make will check the modification timestamps for <strong>targets</strong> and <strong>dependencies</strong> and will only run the <strong>rules</strong> if the target is older than one or more of its dependencies.</li>
    <li>Makefile Syntax: (&lt;TAB&gt; is the tab character)
      <pre class="codeblock"><code>target: dependency0 dependency1 dependency2 ...
&lt;TAB&gt;rule</code></pre>
    </li>
    <li>
      <p>There should be a newline between the dependency list and the rules, and the <strong>TAB</strong> is necessary, there should not be any space between it and the rule.</p>
    </li>
    <li>You can try to copy/paste this makefile, but replace the leading spaces (margine only) with tabs.
      <pre class="codeblock"><code>default:
    echo "'make' will run this line"
compile:
    @echo "'make compile' will run this line, but the @ suppresses the echo command on the terminal!"
run:
    @echo "'make run' will run this line, but the @ suppresses the echo command on the terminal!"</code></pre>
    </li>

    <li>Here is a makefile for a program made from three .c files: main.c, foo.c and goo.c.</li>
    <li>main.c calls functions from foo.c</li>
    <li>foo.c calls functions from goo.c
    <p>Note: copy/paste from a website does not preserve tab characters! <strong>DO NOT COPY PASTE, write it yourself with tabs</strong> </p>
    <pre class="codeblock"><code>all: main.o foo.o goo.o
  gcc -o program main.o foo.o goo.o

main.o: main.c foo.h
  gcc -c main.c

foo.o: foo.c goo.h
  gcc -c foo.c

goo.o: goo.c goo.h
  gcc -c goo.c
      </code></pre>
    </li>
    <li>This makefile creates the executable file <strong>program</strong>.</li>
    <li>Since <em>all</em> is not a file and it is the first target, it will always run.
      <ul>
        <li>If instead, the first target was called <strong>program</strong>, then make would check the modification timestamp of that file.</li>
      </ul>
    </li>
    <li><strong>main.o</strong> is the first dependency, so make will go to that target.</li>
    <li><strong>main.o</strong> depends on main.c and foo.h</li>
    <li>
      The rest of the dependencies will go through in a similar way. Running <code>$ make</code>
      the first time would do the following:
      <pre class="codeblock"><code>gcc -c main.c
gcc -c foo.c
gcc -c goo.c
gcc -o porgram main.o foo.o goo.o
      </code></pre>
    </li>
    <li>Notice the order of compilation and trace it through the makefile.</li>
    <li>If goo.h is modified, the following would happen:
      <pre class="codeblock"><code>gcc -c foo.c
gcc -c goo.c
gcc -o porgram main.o foo.o goo.o
      </code></pre>
    </li>
  </ul>



<h2>Actual Example:</h2>
<h3>main.c</h3>
<pre class="codeblock"><code>#include &lt;stdio.h>
#include "foo.h"
int main(){
  printf("fu(5) is: %d\n",fu(5));
}</code></pre>
<h3>foo.h</h3>
<p>Any .h file only contains headers and an include guard:</p>
<pre class="codeblock"><code>#ifndef FOO_H //include guard
#define FOO_H
int fu(int x);
//more function headers can go here
#endif</code></pre>
<h3>foo.c</h3>
<pre class="codeblock"><code>int fu(int x){
  return x+1;
}</code></pre>
<h3>makefile</h3>

<p>This file should be named makefile or Makefile</p>
<p><strong>Please Note:</strong> the clean target will remove any compiled files and executables, so that you can test your compilation from scratch. This is very important.</p>
<p><strong>Also Note</strong> the compile target also has a target "runme" so that it is called EITHER when you use make compile, OR when the file runme needs to be created.</p>
<p>The first target is the default, no matter what you name it.</p>
<pre class="codeblock"><code>notDefault:
  @echo "No arguments runs the first recipe no matter what you call it."
compile runme:  main.o foo.o
  @gcc -o runme foo.o main.o
main.o: main.c foo.h
  @gcc -c main.c
foo.o: foo.c
  @gcc -c foo.c
run: runme
  @./runme
clean:
  rm *.o
  rm runme</code></pre>


  <h2 id="2024-09-13h">Update Lab01</h2>
  <p>Big goal: Set up a makefile for your lab01 and link it as described below</p>
  <p>I will ONLY compile and run using make. You will lose credit for having invalid makfiles.</p>
  <p>Modify your euler assignment such that you have the following files:</p>
  <ol>
    <li><strong>euler.c</strong>
      <ul>
        <li>Your euler assignment, modified to only contain the euler problem functions.</li>
        <li>Get rid of <code>main()</code> by moving it to <strong>main.c</strong>.</li>
        <li>Do not put separate functions headers here (function definitions will have the header line still of course).</li>
      </ul>
    </li>
    <li><strong>euler.h</strong>
      <ul>
        <li>The function headers for the functions in <strong>euler.c</strong></li>
        <li>They should be no argument functions that return a single int. This includes if the intermediary results exceed integer range.</li>
        <li>Name them using the format: <code>int euler01()</code>, <code>int euler01()</code>, etc. Just the problem numbers you were assigned.</li>
      </ul>
    </li>
    <li><strong>main.c</strong>
      <ul>
        <li>Add <code>#include "euler.h"</code> at the top.</li>
        <li>Has a main function that correctly runs all the functions in <strong>euler.c</strong></li>
      </ul>
    </li>
    <li><strong>makefile</strong>
      <ul>
        <li>Appropriately compile <strong>euler.c</strong> and <strong>main.c</strong> separately.</li>
        <li>Generates an executable file called <strong>euler</strong></li>
        <li>The compile target should be to compile the entire program.</li>
        <li>The run target will run your program. Both make run, and <code>./euler</code> should run your program.</li>
        <li>I will ONLY test working makefiles. Test with <code>make compile</code> and <code>make run</code></li>
        <li>For my labs, you MUST use the @ operator before each command of your makefile to suppress the command text, and only see the output.</li>
        <li>If running <code>make run</code> on a clean clone of your lab01 repo works on the lab machines, then you are good to go. You should make a clean target to test this on your non-clean repo that has the extra files.
          <p>output format after using <code>make run</code>:</p>
          <pre class="codeblock">Euler01,1023
Euler02,55552
Euler05,92381
Euler15,31821.123
etc.</pre>
        </li>
      </ul>
    </li>
  </ol>

 <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-14n">
  <h5>2024-09-13</h5>
  <h3 id="compiling-and-linking">Compiling and Linking</h3>

  <p>Compilers are more complex than straightforward source code -&gt; executable code translators, and have multiple components.</p>
  <p>To start, we'll look at three major pieces of gcc, the <strong>preprocessor</strong> <strong>compiler</strong> and the <strong>linker</strong>.</p>
  <h3>Preprocessor</h3>
  <ul>
    <li>The preprocessor is, at it's simplest interpretation, a text replacement system.</li>
    <li>Modifies source code file with text, as opposed to binary data.</li>
    <li>All preprocessor commands start with <code>#</code> (i.e. <code>#include &lt;stdio.h&gt;</code>)</li>
    <li>Note that preprocessor directives do not end in <code>;</code></li>
  </ul>
  <h3>A few basic preprocessor directives</h3>
  <ol>
    <li>
      <code>#include</code>
      <ul>
        <li>Adds the entire text of the included file.</li>
      </ul>
    </li>
    <li>
      <code>#define</code>
      <ul>
        <li>Usage: <code>#define TEXT REPLACEMENT</code></li>
        <li>Will replace every instance of <code>TEXT</code> with the provided <code>REPLACEMENT</code>.</li>
        <li class="subList">Examples:
          <ul>
            <li><code>#define PI 3.14159</code></li>
            <li><code>#define MESSAGE "Hello!"</code></li>
            <li><code>printf("%s, %f\n", MESSAGE, PI);</code> would turn into <code>printf("%s, %f\n", "Hello!", 3.14159);</code>.</li>
          </ul>
        </li>
        <li>Note that define does not use <code>=</code>, becuase this is not an assignment.</li>
        <li>You can also use <code>#define</code> to declare function-like macros.
          <ul  class="subList">
            <li><code>#define MAX(a, b) a &gt; b ? a : b</code></li>
            <li><code>MAX(x, y)</code> would turn into <code>x &gt; y ? x : y</code></li>
            <li>Note that this would be a direct copy/paste, so if x were a command that gives different results each time (random(), next(), x++, etc.), it would be pasted twice and likely evaluate to two different results.</li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <code>#ifndef IDENTIFIER ... #endif</code>
      <ul>
        <li>Conditional preprocessor statement.</li>
        <li>If <code>IDENTIFIER</code> is not defined (for the preprocessor), then include all the lines of code up to the <code>#endif</code>.</li>
        <li>If <code>IDENTIFIER</code> is defined, skip everything up to the <code>#endif</code>.</li>
      </ul>
    </li>
  </ol>
  <p>Example of #ifndef
    <pre class="codeblock"><code>#ifndef PI
#define PI 3.14159
#endif</code></pre>
  </p>
</li>
<li><strong>Compiler</strong>
  <ul>
    <li>Turns C source code into binary code.</li>
    <li>The result is <strong>not</strong> an executable program.</li>
    <li>Only one C file is compiled at a time.</li>
    <li>The compiler checks called functions against their declared hearders, but if a function is defined in a separate file, its code is <strong>not added</strong> at this step.</li>
    <li><code>$ gcc -c &lt;FILE&gt;</code> will run the preprocessor and compile stages only, creating a non executable binary object file. The resulting file will have an extension of <strong>.o</strong>.</li>
    <li>Since an executable is <em>not</em> created, you can successfully compile, via <code>$ gcc -c</code>, a C file that does not have a <code>main</code> function.</li>
  </ul>
</li>
<li><strong>Linker</strong>
  <ul>
    <li>Combines compiled binary code from multiple files into a single executable program.</li>

    <li>Will automatically look for standard library source code, or anything that can be included using <code>&lt;&gt;</code>.</li>
      <li>If multiple definitions for any identifier is found, the linker will fail.</li>
      <li>Must find <strong>one</strong> definition for <code>main</code>.</li>
      <li>If you provide gcc multiple c files, it will compile each one individual and then run the linker on them together.</li>
      <li>If you provide gcc any .o files, it will skip the compilation step for those files and then use them during linking.</li>
      <li>You can mix and match .c and .o files for gcc, but it is not encouraged.</li>
      <li>For example these would be good ways to compile a program, if you had files <code>foo.c goo.c boo.c</code>:
        <ul>
          <li><code>$ gcc -o program foo.c goo.c boo.c</code></li>
          <li>or compile the files separately: (If you only changed one of the c files, you can recompile that one file but not the rest.)
            <pre class="codeblock"><code>$ gcc -c foo.c
$ gcc -c goo.c
$ gcc -c boo.c
$ gcc foo.o goo.o boo.o
            </code></pre>
	    The output would be the default <code>a.out</code> but you could optionally use the -o flag to change it.
          </li>
        </ul>
      </li>
    </ul>
  </li>
  </ul>
  <h3>Homework:</h3>
  <p>Monday you will modify your lab, so make sure you have it working.</p>


  <p><a href="#TOP">[back to top of page]</a></p>
  </div>

<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-12n">
  <h5>2024-09-12</h5>
  <h2 id="variables">Variables</h2>
  <ol>
    <li>C is statically typed, meaning every variable must be given a type.</li>
    <li>Variables must be declared before they are used <code >TYPE IDENTIFIER;</code> e.g. <code >int x;</code>.
      <ul>
        <li>You can assign a variable a value at declaration (i.e. <code >int x = 10;</code>)</li>
      </ul>
    </li>
    <li><em>THERE IS NO DEFAULT VALUE FOR VARIABLES</em>
      <ul>
        <li>In Java, instance variables got initialized to 0, arrays were also zeroed out. That’s a thing of the past.</li>
        <li>
          Remember that declaring a variable means requesting a piece of memory to be used by your program of the
          corresponding variable size. (<code >int</code> means you are asking for 4 bytes of memory.)
        </li>
        <li>
          If you do not initialize (provide a value for) a variable, its initial value will be whatever happens
            to be in the piece of memory that was assigned to your variable. Sometimes, that’s 0, sometimes it’s 2167354.
            You cannot predict this reliably.
        </li>
        <li>
          This is cause for one of the most frustrating kind of programming errors in C. Normally,
            if you run the same function with the same input twice, you will get the same result.
            If you don’t initialize a variable, you could run the same program twice and get two different
            results, because you’re not guranteed that variable will have had the same value twice
            (common occurance: you run your program and get lucky, a variable is initialized to 0. Then
            I run your work  and the program crashes or does not give the required result because the
            variable is initialized to some junk value).

        </li>
      </ul>
    </li>
    <li>Variables can be declared as <code >unsigned</code> (i.e. <code >unsigned int u;</code>).
      <ul>
        <li><code >unsigned</code> variables have a lower bound of 0 and a higher upper bound than their signed counterparts.</li>
        <li><code >unsigned char uc;</code> declares a 1 byte integer type that can hold any number in the range [0, 255] otherwise known as [0, 2^8 - 1], as in there are 8 bits used for the number.</li>
        <li><code >unsigned</code> variables don’t need to set aside a bit for the sign of the value, hence the larger upper bound.</li>
        <li>There is an additional u in the printf placeholder string for unsigned types. <code>"%d"</code> becomes <code>"%ud"</code>.</li>
      </ul>
    </li>
  </ol>

<h3>Functions</h3>
  <p>Function and variable names are both examples or identifiers.</p>
  <p>All identifiers must be declared before they can be used.</p>
  <p>A function declaration provides its return type, name and parameters.</p>
  <p>This is also known as a function header: <code>double foo(int bar)</code> </p>
  <p>A function body is almost always attached to the header to make a complete function:</p>
  <pre class="codeblock"><code>double foo(int bar){
    return 1.23;
}</code></pre>

<h2 id="loopsandconditionals">Loops and conditionals have the same syntax as java!</h2>
<p>Since java and c have the same syntax for <code>if/while/for</code> you can experiement with them to make sure you can use them with real problems.</p>


<h2 id="2024-09-12h">Lab01</h2>
<a href="https://classroom.github.com/a/gh4en8wj">Assignment01 repo</a>
<p>Select your name the first time you use our github classroom page. Please click on your name only.</p>
<p>Look at the problems here: <a href="http://projecteuler.net/index.php?section=problems">http://projecteuler.net/index.php?section=problems</a></p>
<p>    They are all math problems of some sort, you will be writing a program with several functions to solve them</p>
<ul>
  <li>Keep the file names provided in the repo.</li>
  <li>Write a function for each problem you solve. <em>You may wish to have auxiliary functions.</em> </li>
  <li>Each of your problem functions should return the numerical solution.</li>
  <li>In your main(), call and print the results of each function in numerical order(problem number, not result) one per line as seen in the example below.</li>
  <li>Please do the following: 1,5,6 after that try 14 and 2.</li>
</ul>
<p>Sample output (not correct values):</p>
<pre class="codeblock">
  Euler01,1023
  Euler05,92381
  Euler15,31821.123
  etc.</pre>
<p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-11n">
  <h5>2024-09-11</h5>
  <h3>Piazza questions are really important today</h3>
  <p>Ask questions about todays notes on piazza. This was meant to have an in person lecture but I was not in school to give a demo + answer questions.</p>


  <h3>Binary</h3>
  <p>Internally to computers numbers are written in binary, which is base 2. The number 111<sub>2</sub> is actually the decimal number 7, but it is expressed in base 2.</p>
  <table>
    <tr><th>Binary</th><th>Decimal</th></tr>
    <tr><td>1<sub>2</sub></td>   <td>1<sub>10</sub></td></tr>
    <tr><td>10<sub>2</sub></td>   <td>2<sub>10</sub></td></tr>
    <tr><td>11<sub>2</sub></td>   <td>3<sub>10</sub></td></tr>
  <tr><td>101<sub>2</sub></td>   <td>5<sub>10</sub></td></tr>
  <tr> <td>1000<sub>2</sub></td>   <td>8<sub>10</sub></td> </tr>
  <tr> <td>1010<sub>2</sub></td>   <td>10<sub>10</sub></td> </tr>

  </table>
  <p>The way you convert from binary to decimal is the same as how you view the value of a base 10 number,
    you multiply the digit times the column value, e.g. 523 is 5*100 + 2*10 + 3*1. Since binary only has 0 and 1, you just sum the column values of each digit that is <code>1</code>.</p>
  <p>Incidentally a <code>bit</code> is a single binary digit. A <code>byte</code> is 8 bits. </p>
  <p>Take this diagram, which explains how to determine the value of 11100111101<sub>2</sub> </p>
  <p><img src="img/base2.gif" alt=""></p>
  <p>You don't have to be a master of binary, and I won't quiz you on converting, but you should understand the concept, and what a term like <code>32-bit integer</code> or <code>4-byte integer</code> means. They both mean a binary number with 32 digits (4 bytes = 4 x 8 bits).</p>
  <p>You should know that the more digits a number has the more numbers you can represent, e.g. a 3 digit number in base 10 can be from 000 up to 999, so 1000 options. The more digits, the bigger the range of values, a 10 digit number has more possible values than a 3 digit number.</p>
  <p>We designate the size of a variables use binary digits, or <code>bits</code>. The larger the number of bits (or bytes), the larger the range of values.</p>


  <h2 id="primitive-types">Primitive Types</h2>
  <ul>
    <li>
      All C primitives are numeric.
      The only differences are floating point vs. integer and size of variable in memory.</li>
    <li><code >sizeof(type)</code> can be used to find the size in bytes (<code >stdlib.h</code>).</li>
    <li>Size of different types is <em>platform <strong>de</strong>pendent</em> , you have to use sizeof to be certain.</li>

  </ul>

  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Size (bytes)</th>
        <th>Range</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code >char</code></td>
        <td>1</td>
        <td>-128 to 127</td>
      </tr>
      <tr>
        <td><code >short</code></td>
        <td>2</td>
        <td>-32,768 to 32,767</td>
      </tr>
      <tr>
        <td><code >int</code></td>
        <td>4</td>
        <td>-2<sup>31</sup> to 2<sup>31</sup>-1</td>
      </tr>
      <tr>
        <td><code >long</code></td>
        <td>8</td>
        <td>-2<sup>63</sup> to 2<sup>63</sup>-1</td>
      </tr>
      <tr>
        <td><code >float</code></td>
        <td>4</td>
        <td>7 digits of precision</td>
      </tr>
      <tr>
        <td><code >double</code></td>
        <td>8</td>
        <td>14 digits of precision</td>
      </tr>
    </tbody>
  </table>

  <ul>
    <li>
      <code >char</code> is an integer type, but can be used to refer to character literals as well.
      <ul>
        <li><code >char c = 97;</code> and <code >char c = 'a';</code> are both equally valid statements.</li>
        <li>This also means you can perform arithmetic operations on chars natively.</li>
      </ul>
    </li>
    <li>Variables can be declared as <code >unsigned</code>. Unsigned variables do not use a bit to store the sign of the number, making the lower bound 0 and increasing the upper bound.</li>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Size (bytes)</th>
          <th>Range</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code >unsigned char</code></td>
          <td>1</td>
          <td>0 to 255</td>
        </tr>
        <tr>
          <td><code >unsigned short</code></td>
          <td>2</td>
          <td>0 to 65,535</td>
        </tr>
        <tr>
          <td><code >unsigned int</code></td>
          <td>4</td>
          <td>0 to 2<sup>32</sup>-1</td>
        </tr>

      </tbody>
    </table>
    <li>Note there is no boolean type. In c, any number is a boolean value:
      <ul>
        <li><strong>0 is false</strong></li>
        <li><strong>All other numeric values are true</strong></li>
        <li>the expression <code>if(x = 2){}</code> which has an assignment instead of a comparison does not cause an error. It evaluates the assignment and becomes: <code>if(2){}</code> This is desired behavior, but does NOT check if x has the same value as 2. <code>x=0</code> is false while <code>x = non-zero numbers</code> is true. This is the source of bugs in many programs </li>
      </ul>
    </li>

  </ul>


  <h3 id="operator-precedence">Operator Precedence</h3>
  <p>Operators evaluate from left to right unless otherwise noted</p>
  <ol>
    <li><code >() [] -&gt; .</code></li>
    <li><code >RIGHT TO LEFT ! ~ ++ -- +(unary) -(unary) *(de-reference) &amp;(address of) (type cast) sizeof</code></li>
    <li><code >* / %</code></li>
    <li><code >+ -</code></li>
    <li><code >&lt;&lt; &gt;&gt;</code></li>
    <li><code >&lt; &lt;= &gt; &gt;=</code></li>
    <li><code >== !=</code></li>
    <li><code >&amp; (bitwise and)</code></li>
    <li><code >^ (bitwise xor)</code></li>
    <li><code >| (bitwise or)</code></li>
    <li><code >&amp;&amp;</code></li>
    <li><code >||</code></li>
    <li><code >RIGHT TO LEFT ?:</code></li>
    <li><code >RIGHT TO LEFT = += -= *= /= %= ^= |= &amp;= &lt;&lt;= &gt;&gt;=</code></li>
  </ol>


  <h3>Experiment!</h3>
  <p>Please experiment with some things.</p>
  <p>Write the example and explanation in your notes.</p>
  <ol>
    <li>Create some expressions using opeators and print the results. Many of the operators are the same as in java. Do not worry about dereferencing, address of, bit shifts (>>) and bitwise operators.</li>
    <li>Make an example of using multiple assignment operators "=" evaluating from right to left.</li>
    <li>How does the <code>?:</code> (ternary operator) work, create an example.</li>
    <li>The ternary operators in the same expression are right to left, what does this allow a programmer to do that would not work it it were left to right?</li>


  </ol>

  <p><a href="#TOP">[back to top of page]</a></p>
</div>

<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-10n">
  <h5>2024-09-10</h5>
  <h3 id="printf">printf</h3>
  <p> <i>The thinking person's</i> <code >System.out.println</code> </p>
  <p>Extensive documentation can be found by using the command: <code>man 3 printf</code> </p>
  <ol class="mainList" >
    <li><code >printf</code> is the function normally used in C to print to standard out.</li>
    <li>usage: <code >printf( string, arg0, arg1, ...)</code>
      <ul>
        <li>Sends <code >string</code> to standard out.</li>
        <li>The first argument must be a literal string enclosed by <code >"</code>, as in the example program above.</li>
        <li><code >string</code> can contain special placeholder characters that are used to insert other values into the output.</li>
        <li><code >%d</code> is the placeholder to display a value as an <code >int</code>.</li>
        <li><code >%lf</code> is the placeholder to display a value as a <code >double</code>.</li>
        <li>There are other placeholder characters that we will see later on.</li>
        <li>If placeholder characters are used, then they will be replaced by the arguments following the string when <code >printf</code> is executed.</li>
        <li>The value arguments can be either variables or literal values.</li>
        <li>example: <code >printf("these are numbers: %d %lf\n", 3, 845.273);</code> would display: <code >these are numbers: 3 845.273</code></li>
      </ul>
    </li>

    <li>Once you get used to it, most people prefer <code >printf</code>'s value replacement system to Java's string concatenation (+) inside <code >System.out.println</code>. In fact, Java does have a <code >System.out.printf</code> because of it.</li>
    <li>The printf command does not add a new line at the end of the output, so you can use multiple printf statements to output on the same line.</li>
    <li>As an exercise, add some <code >printf</code> statements to your existing example program. Try declaring variables and printing their values. Once you get the hang of it, try using the wrong formatting characters, see what happens…</li>
    <li>
      <table>
        <thead>
          <tr>
            <th>Type</th>
            <th>Placeholder</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code >int</code></td>
            <td><code >%d</code></td>
          </tr>
          <tr>
            <td><code >long</code></td>
            <td><code >%ld</code></td>
          </tr>
          <tr>
            <td><code >float</code></td>
            <td><code >%f</code> <sup>*</sup> </td>
          </tr>
          <tr>
            <td><code >double</code></td>
            <td><code >%lf</code><sup>*</sup> </td>
          </tr>
          <tr>
            <td><code >char</code></td>
            <td><code >%c</code></td>
          </tr>
          <tr>
            <td>string</td>
            <td><code >%s</code></td>
          </tr>
          <tr>
            <td>pointer</td>
            <td><code >%p</code></td>
          </tr>
        </tbody>
      </table>
    </li>
    <li>* <code >%.xf</code> or <code >%.xlf</code> will print up to <code >x</code> significant digits after the floating point</li>
    <li>There are many formatting options, you should look at the man pages of printf for more options using <code>man 3 printf</code> </li>
  </ol>
  <p><a href="#TOP">[back to top of page]</a></p>
</div>


<!-- --------------------CONTENT BLOCK-------------------- -->
<div class="contentBlock" id="2024-09-09n">
  <h5>2024-09-09</h5>
    <h3>C Quickstart</h3>
    <ol>
      <li>By convention, C source files should have a <code>.c</code> file extension (i.e. <code>program.c</code>).</li>
      <li>The C compiler we will be using is <strong>gcc</strong> (the Gnu C Compiler)</li>
      <li>
        usage: <code >$ gcc program.c</code>
        <ul>
          <li>This will create a standalone executable file.</li>
          <li>The default name for the output file is <code >a.out</code></li>
          <li>There is no preferred extension for c executable files (think about programs like <code >ls</code>, <code >ssh</code>, <code >chmod</code>, these are all C programs, notice the lack of file extension).</li>
          <li>You can provide your own output file name with the <code >-o</code> flag.
            <ul class="subList" >
                <li>usage: <code >$ gcc -o pro program.c</code></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        Compiled C programs are natively executable, to run them just type <code >./program</code>
        (i.e. <code >$ ./a.out</code> or <code >$ ./pro</code>
      </li>
      <li>
        C compilers assume you wanted to do what you did, and don't give errors for a variety of things you think should not work.
      </li>
      <li>
        The <code >./</code> is only needed because you probably compiled the file in a directory(folder)
        outside your PATH environment variable (if that is unclear, you can forget the previous sentence entirely for now).
      </li>
      <li>
        Before moving on, you should write, compile and run the example program provided below.
        I promise it is 100% sytactically correct. (Yes, you may get a compiler warning message, this is the only time you're allowed to ignore it.
        <pre class="codeblock"><code>int main(){
      printf("Hello world.");</code></pre>
      </li>
      <li>
        <p><strong>Addendum:</strong> Return values</p>
        <p>By default gcc will not tell you if a return statement is missing. Please use the <code>-Wall</code> flag
          to give you more warnings.
        </p>
        <p>
          Additionally there is a special case in that the main function is to return 0 if control reaches the
          end without an explicit return. This only applies to the main function in C99, and older compilers will
          NOT guarantee this behavior. (This is not likely to be an issue for you.)
        </p>

      </li>

    </ol>



    <h3>SSH Keys</h3>
    <p> <a href="index.html#sshkeygen">Create SSH Keys on the lab computers if you haven't done so already.</a></p>

    <h3 id="2024-09-13h">Homework</h3>
    <p>Get your home computer setup to compile and run C programs</p>
    <p>Test your home environment to ensure you can compile.</p>

    <p><a href="#TOP">[back to top of page]</a></p>
</div>



<div class="contentBlock" id="2024-09-06n"><!-- --------------------CONTENT BLOCK-------------------- -->
  <h5>2024-09-06</h5>
  <h3>Class overview</h3>
  <p>
    In this class you will be learning to write programs for a Unix-like system using the C programming language. You will learn about memory, processes, networking, and as a by product: how to better use a unix-like system (in this case Mint Linux).
  </p>
  <h3>Autonomy in my class</h3>
  <p>
    I treat you as if you were responsible individuals, even if you aren't.
    This means that I will not always check if you are doing what you are supposed to.
    You need to let me know if you are having any issues in class or at home.
  </p>
  <p>
    If you do not understand even a single word, you need to speak up.
    In a technical class context clues are NOT sufficient to convey nuanced
    meaning that is needed. e.g. <em>shibboleth </em>
  </p>
  <p>
    You also must read... <b>all</b> of the directions when trying to solve problems or work
    on assignments. Failure to do so will jeapordize your ability to succeed. A single word
    missed like "not" or "all" could mean you are solving the wrong problem.
  </p>

  <h3>prerequisite terminal skills:</h3>
  <ul>
    <li>Opening a terminal</li>
    <li>Creating folders and files</li>
    <li>File paths</li>
    <li>Moving and manipulating files</li>
    <li>Using SSH to run commands on other computers</li>
  </ul>

  <h3>Terminal Refresher tutorial:</h3>
  <p>
    If you feel you do not have these skills at this point, please refresh your memory here:
    <a href="https://ubuntu.com/tutorials/command-line-for-beginners#1-overview">https://ubuntu.com/tutorials/command-line-for-beginners#1-overview</a>
  </p>
  <p>Please note that only sections 1-5 are needed.</p>


  <h3 id="2024-09-06h">Homework 02</h3>
  <ol>
    <li>Post a greeting on piazza in the section for your period. You can additionally post if you have questions
      or issues with the summer assignment.</li>
    <li>
    <li>Get your ssh-keys working on your personal devices (see the landing page for my website for all classes for instructions).</li>
    <li>Optinally : complete the Terminal Refresher tutorial sections 1-5</li>
  </ol>
  <p><a href="#TOP">[back to top of page]</a></p>
</div>



<div class="contentBlock" id="2024-09-05n"><!-- --------------------CONTENT BLOCK-------------------- -->
  <h5>2024-09-05</h5>

  <h3>Logistics</h3>
  <p>What to expect in this class.</p>
  <p>Discussion of policies and the landing page.</p>
  <h3><a href="https://konstantinnovation.github.io">https://konstantinnovation.github.io</a> </h3>

  <h3>Resources</h3>
  <p>Most of the resources are listed in the summer assignment found on the systems page of my website. (this page)</p>


  <h3 id="2024-09-05h">Homework 01</h3>
  <h4>1. Forms:</h4>
  <p>Please fill out the <a href="https://forms.gle/qJBUnFZN9kjmegHS8">start of term survey</a></p>
  <p>Please read and fill out the <a href="https://forms.gle/T9bHX4ffwokLghTu7">Computer Lab and Resources usage Policy</a> </p>

  <h4>2. Working environment</h4>
  <p>Please ensure you have a working linux os on your home machine.</p>
  <p>If you have a mac or linux computer, you already have one!</p>
  <h5>Mac</h5>
  <p>
    To work on a Mac computer you must install Xcode from the App Store.
  Run the following in a terminal in install xcode command line tools: <pre>xcode-select --install</code></pre> </p>
  <h5>Windows</h5>
  <p>Windows users can install WSL (a linux virtual machine) on your windows computers:</p>
  <a href="https://docs.microsoft.com/en-us/windows/wsl/install">https://docs.microsoft.com/en-us/windows/wsl/install</a>
  <h5>On all machines:</h5>
  <p>Verify the gcc command runs on your home machine.</p>


  <p><a href="#TOP">go back to the top of the page</a></p>
</div>





<!--end class content block section-->
</div>


</main>
</body>

</html>
